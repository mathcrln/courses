(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{3454:function(t,e,n){"use strict";var r,i;t.exports=(null===(r=n.g.process)||void 0===r?void 0:r.env)&&"object"===typeof(null===(i=n.g.process)||void 0===i?void 0:i.env)?n.g.process:n(7663)},6840:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(652)}])},8218:function(t,e,n){"use strict";n.d(e,{S:function(){return r},d:function(){return i}});var r=(0,n(7294).createContext)({user:null,username:null}),i=r.Provider},6482:function(t,e,n){"use strict";n.d(e,{mC:function(){return bg},I8:function(){return fg},RZ:function(){return dg},Lg:function(){return gg},qV:function(){return pg},nP:function(){return mg},Bt:function(){return vg},tO:function(){return yg}});n(4051);var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(xd){o(xd)}}function s(t){try{u(r.throw(t))}catch(xd){o(xd)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(xd){o=[6,xd],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function u(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var l=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},f={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(l(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var h=a<<4&240|s>>2;if(r.push(h),64!==u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},p=function(t){return function(t){var e=l(t);return f.encodeByteArray(e,!0)}(t).replace(/\./g,"")};function d(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=d(t[n],e[n]));return t}var v=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function g(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=o({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[p(JSON.stringify({alg:"none",type:"JWT"})),p(JSON.stringify(a)),""].join(".")}function m(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(xd){return!1}}var b=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,w.prototype.create),o}return i(e,t),e}(Error),w=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?_(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new b(i,s,r);return u},t}();function _(t,e){return t.replace(I,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var I=/\{\$([^}]+)}/g;function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782);i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();function E(t,e){var n=new S(t,e);return n.subscribe.bind(n)}var S=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=A),void 0===r.error&&(r.error=A),void 0===r.complete&&(r.complete=A);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(xd){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(xd){"undefined"!==typeof console&&console.error&&console.error(xd)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function A(){}function k(t){return t&&t._delegate?t._delegate:t}var N=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),O="[DEFAULT]",C=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new v;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(xd){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(xd){if(r)return null;throw xd}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:O})}catch(xd){}try{for(var r=u(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=c(i.value,2),a=o[0],s=o[1],h=this.normalizeInstanceIdentifier(a);try{var l=this.getOrInitializeService({instanceIdentifier:h});s.resolve(l)}catch(xd){}}}catch(f){e={error:f}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=O),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return a(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(h(h([],c(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),c(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=O),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=O),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var s=u(this.instancesDeferred.entries()),h=s.next();!h.done;h=s.next()){var l=c(h.value,2),f=l[0],p=l[1];o===this.normalizeInstanceIdentifier(f)&&p.resolve(a)}}catch(d){e={error:d}}finally{try{h&&!h.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=u(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(c){}}}catch(h){n={error:h}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===O?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(pd){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=O),this.component?this.component.multipleInstances?t:O:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var D,R=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new C(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function x(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var P,L=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(P||(P={}));var M,U={debug:P.DEBUG,verbose:P.VERBOSE,info:P.INFO,warn:P.WARN,error:P.ERROR,silent:P.SILENT},F=P.INFO,j=((D={})[P.DEBUG]="log",D[P.VERBOSE]="log",D[P.INFO]="info",D[P.WARN]="warn",D[P.ERROR]="error",D),V=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=j[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,x(["["+i+"]  "+t.name+":"],n))}},q=function(){function t(t){this.name=t,this._logLevel=F,this._logHandler=V,this._userLogHandler=null,L.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in P))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?U[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,x([this,P.DEBUG],t)),this._logHandler.apply(this,x([this,P.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,x([this,P.VERBOSE],t)),this._logHandler.apply(this,x([this,P.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,x([this,P.INFO],t)),this._logHandler.apply(this,x([this,P.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,x([this,P.WARN],t)),this._logHandler.apply(this,x([this,P.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,x([this,P.ERROR],t)),this._logHandler.apply(this,x([this,P.ERROR],t))},t}();function B(t){L.forEach((function(e){e.setLogLevel(t)}))}var K,G=((M={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",M["bad-app-name"]="Illegal App name: '{$appName}",M["duplicate-app"]="Firebase App named '{$appName}' already exists",M["app-deleted"]="Firebase App named '{$appName}' already deleted",M["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",M["invalid-log-argument"]="First argument to `onLog` must be null or a function.",M),H=new w("app","Firebase",G),z="@firebase/app",W="[DEFAULT]",Q=((K={})[z]="fire-core",K["@firebase/analytics"]="fire-analytics",K["@firebase/app-check"]="fire-app-check",K["@firebase/auth"]="fire-auth",K["@firebase/database"]="fire-rtdb",K["@firebase/functions"]="fire-fn",K["@firebase/installations"]="fire-iid",K["@firebase/messaging"]="fire-fcm",K["@firebase/performance"]="fire-perf",K["@firebase/remote-config"]="fire-rc",K["@firebase/storage"]="fire-gcs",K["@firebase/firestore"]="fire-fst",K["fire-js"]="fire-js",K["firebase-wrapper"]="fire-js-all",K),X=new q("@firebase/app"),Y=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=d(void 0,t),this.container=new R(e.name),this._addComponent(new N("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=W),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=W),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(xd){X.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,xd)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw H.create("app-deleted",{appName:this.name_})},t}();Y.prototype.name&&Y.prototype.options||Y.prototype.delete||console.log("dc");function J(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!==typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=W);var a=o.name;if("string"!==typeof a||!a)throw H.create("bad-app-name",{appName:String(a)});if(T(e,a))throw H.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Q[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void X.warn(u.join(" "))}o(new N(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:B,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw H.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=U[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:P[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=L;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!T(e,t=t||W))throw H.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return X.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(t){if(void 0===t&&(t=i()),"function"!==typeof t[a])throw H.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&d(s,o.serviceProps),r[a]=s,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}var $=function t(){var e=J(Y);return e.INTERNAL=o(o({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){d(e,t)},createSubscribe:E,ErrorFactory:w,deepExtend:d}),e}(),Z=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if("object"===typeof self&&self.self===self&&void 0!==self.firebase){X.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&X.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var et=$.initializeApp;$.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return y()&&X.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),et.apply(void 0,t)};var nt=$;!function(t,e){t.INTERNAL.registerComponent(new N("platform-logger",(function(t){return new Z(t)}),"PRIVATE")),t.registerVersion(z,"0.6.30",e),t.registerVersion("fire-js","")}(nt);var rt=nt,it="8.10.1";rt.registerVersion("firebase",it,"app"),rt.SDK_VERSION=it,function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,n){if(n){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[t=t[t.length-1]]))!=o&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(pt){this.f(pt)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(pt){n.reject(pt)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(Pr){o(Pr)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),a=r.next();!a.done;a=r.next())i(a.value).Ra(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Ra(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var a=a||{},s=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function l(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++y)}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function I(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function E(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t){return t}function A(t,e,n){this.code=O+t,this.message=e||C[t]||"",this.a=n||null}function k(t){var e=t&&t.code;return e?new A(e.substring(O.length),t.message,t.serverResponse):null}E(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var N,O="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},D={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function R(t){for(var e in D)if(D[e].id===t)return{firebaseEndpoint:(t=D[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function M(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function U(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function F(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function j(){this.b=this.a=null}N=R("__EID__")?"__EID__":void 0,E(P,Error),P.prototype.name="CustomError",E(L,P),L.prototype.name="AssertionError",U.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new U((function(){return new B}),(function(t){t.reset()}));function q(){var t=_e,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}j.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var K=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},G=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=K(t,e)}function X(t,e){var n;return(n=0<=(e=K(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function J(t){return Array.prototype.concat.apply([],arguments)}function $(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,it=/>/g,ot=/"/g,at=/'/g,st=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var lt=s.navigator;if(lt){var ft=lt.userAgent;if(ft){Z=ft;break t}}Z=""}function dt(t){return ct(Z,t)}function vt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function gt(t){for(var e in t)return!1;return!0}function mt(t){var e,n={};for(e in t)n[e]=t[e];return n}var yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<yt.length;o++)n=yt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function wt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function _t(t,e){this.a=t===St&&e||"",this.b=Et}function It(t){return t instanceof _t&&t.constructor===_t&&t.b===Et?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}_t.prototype.ta=!0,_t.prototype.sa=function(){return this.a},_t.prototype.toString=function(){return"Const{"+this.a+"}"};var Tt,Et={},St={};function At(){if(void 0===Tt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(n){s.console&&s.console.error(n.message)}Tt=t}else Tt=t}return Tt}function kt(t,e){this.a=e===Rt?t:""}function Nt(t){return t instanceof kt&&t.constructor===kt?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function Ot(t,e){var n=It(t);if(!Dt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=At();return new kt(t=e?e.createScriptURL(t):t,Rt)}(t=n.replace(Ct,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof _t?It(t):encodeURIComponent(String(t))})))}kt.prototype.ta=!0,kt.prototype.sa=function(){return this.a.toString()},kt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ct=/%{(\w+)}/g,Dt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Rt={};function xt(t,e){this.a=e===Vt?t:""}function Pt(t){return t instanceof xt&&t.constructor===xt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}xt.prototype.ta=!0,xt.prototype.sa=function(){return this.a.toString()},xt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Lt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Mt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ut=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof xt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Ut.test(t))t=new xt(t,Vt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Mt);t=e&&Lt.test(e[1])?new xt(t,Vt):null}return t}function jt(t){return t instanceof xt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Ut.test(t)||(t="about:invalid#zClosurez"),new xt(t,Vt))}var Vt={},qt=new xt("about:invalid#zClosurez",Vt);function Bt(t,e,n){this.a=n===Kt?t:""}Bt.prototype.ta=!0,Bt.prototype.sa=function(){return this.a.toString()},Bt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Kt={};function Gt(t,e,n,r){return t=t instanceof xt?t:jt(t),e=e||s,n=n instanceof _t?It(n):n||"",e.open(Pt(t),n,r,void 0)}function Ht(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function zt(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(at,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function Wt(t){return Wt[" "](t),t}Wt[" "]=l;var Qt,Xt=dt("Opera"),Yt=dt("Trident")||dt("MSIE"),Jt=dt("Edge"),$t=Jt||Yt,Zt=dt("Gecko")&&!(ct(Z.toLowerCase(),"webkit")&&!dt("Edge"))&&!(dt("Trident")||dt("MSIE"))&&!dt("Edge"),te=ct(Z.toLowerCase(),"webkit")&&!dt("Edge");function ee(){var t=s.document;return t?t.documentMode:void 0}t:{var ne="",re=function(){var t=Z;return Zt?/rv:([^\);]+)(\)|;)/.exec(t):Jt?/Edge\/([\d\.]+)/.exec(t):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):te?/WebKit\/(\S+)/.exec(t):Xt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(re&&(ne=re?re[1]:""),Yt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Qt=String(ie);break t}}Qt=ne}var oe,ae={};function se(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=tt(String(Qt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ht(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ht(0==a[2].length,0==s[2].length)||ht(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(s.document&&Yt){var ue=ee();oe=ue||(parseInt(Qt,10)||void 0)}else oe=void 0;var ce=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(da){}var he=!Yt||9<=Number(ce);function le(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function fe(t,e){vt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:ve.hasOwnProperty(n)?t.setAttribute(ve[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var pe,de,ve={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ge(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){a="function"==typeof o.item;break t}}a=!1}G(a?$(o):o,r)}}}function me(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ye(t){s.setTimeout((function(){throw t}),0)}function be(t,e){de||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);de=function(){t.then(Ie)}}else de=function(){var t=Ie;!d(s.setImmediate)||s.Window&&s.Window.prototype&&!dt("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(pe||(pe=function(){var t=s.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!dt("Presto")&&(t=function(){var t=me(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!dt("Trident")&&!dt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),pe(t)):s.setImmediate(t)}}(),we||(de(),we=!0),_e.add(t,e)}var we=!1,_e=new j;function Ie(){for(var t;t=q();){try{t.a.call(t.b)}catch(e){ye(e)}F(V,t)}we=!1}function Te(t,e){if(this.a=Ee,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Ue(n,Se,t)}),(function(t){if(!(t instanceof Ge))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(xd){}Ue(n,Ae,t)}))}catch(r){Ue(this,Ae,r)}}var Ee=0,Se=2,Ae=3;function ke(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ke.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ne=new U((function(){return new ke}),(function(t){t.reset()}));function Oe(t,e,n){var r=Ne.get();return r.g=t,r.b=e,r.f=n,r}function Ce(t){if(t instanceof Te)return t;var e=new Te(l);return Ue(e,Se,t),e}function De(t){return new Te((function(e,n){n(t)}))}function Re(t,e,n){Fe(t,e,n,null)||be(I(e,t))}function xe(t){return new Te((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Re(t[o],I(i,o,!0),I(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==Ee)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Ee&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ve(n),qe(n,i,Ae,e)))}t.c=null}else Ue(t,Ae,e)}function Le(t,e){t.b||t.a!=Se&&t.a!=Ae||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function Me(t,e,n,r){var i=Oe(null,null,null);return i.a=new Te((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(pt){o(pt)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ge?o(e):t(i)}catch(pt){o(pt)}}:o})),i.a.c=t,Le(t,i),i.a}function Ue(t,e,n){t.a==Ee&&(t===n&&(e=Ae,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Fe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,je(t),e!=Ae||n instanceof Ge||function(t,e){t.g=!0,be((function(){t.g&&Ke.call(null,e)}))}(t,n)))}function Fe(t,e,n,r){if(t instanceof Te)return Le(t,Oe(e||l,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(u){o(u)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function je(t){t.h||(t.h=!0,be(t.gc,t))}function Ve(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function qe(t,e,n,r){if(n==Ae&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Be(e,n,r);else try{e.c?e.g.call(e.f):Be(e,n,r)}catch(xd){Ke.call(null,xd)}F(Ne,e)}function Be(t,e,n){e==Se?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Te.prototype.then=function(t,e,n){return Me(this,d(t)?t:null,d(e)?e:null,n)},Te.prototype.$goog_Thenable=!0,(t=Te.prototype).oa=function(t,e){return(t=Oe(t,t,e)).c=!0,Le(this,t),this},t.o=function(t,e){return Me(this,null,t,e)},t.cancel=function(t){if(this.a==Ee){var e=new Ge(t);be((function(){Pe(this,e)}),this)}},t.$c=function(t){this.a=Ee,Ue(this,Se,t)},t.ad=function(t){this.a=Ee,Ue(this,Ae,t)},t.gc=function(){for(var t;t=Ve(this);)qe(this,t,this.a,this.i);this.h=!1};var Ke=ye;function Ge(t){P.call(this,t)}function He(){0!=ze&&(We[g(this)]=this),this.ya=this.ya,this.pa=this.pa}E(Ge,P),Ge.prototype.name="cancel";var ze=0,We={};function Qe(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=ze)){var e=g(t);if(0!=ze&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete We[e]}}He.prototype.ya=!1,He.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Xe=Object.freeze||function(t){return t},Ye=!Yt||9<=Number(ce),Je=Yt&&!se("9"),$e=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(n){}return t}();function Ze(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function tn(t,e){if(Ze.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{Wt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:en[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ze.prototype.preventDefault=function(){this.defaultPrevented=!0},E(tn,Ze);var en=Xe({2:"touch",3:"pen",4:"mouse"});tn.prototype.preventDefault=function(){tn.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Je)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},tn.prototype.g=function(){return this.a};var nn="closure_listenable_"+(1e6*Math.random()|0),rn=0;function on(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++rn,this.wa=this.Qa=!1}function an(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function sn(t){this.src=t,this.a={},this.b=0}function un(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(an(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function cn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}sn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=cn(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):((e=new on(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var hn="closure_lm_"+(1e6*Math.random()|0),ln={};function fn(t,e,n,r,i){if(r&&r.once)dn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else n=Tn(n),t&&t[nn]?Sn(t,e,n,v(r)?!!r.capture:!!r,i):pn(t,e,n,!1,r,i)}function pn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=_n(t);if(s||(t[hn]=s=new sn(t)),!(n=s.add(e,n,r,a,o)).proxy){if(r=function(){var t=wn,e=Ye?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else n=Tn(n),t&&t[nn]?An(t,e,n,v(r)?!!r.capture:!!r,i):pn(t,e,n,!0,r,i)}function vn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)vn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=Tn(n),t&&t[nn]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=cn(o=t.a[e],n,r,i))&&(an(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=_n(t))&&(e=t.a[e.toString()],t=-1,e&&(t=cn(e,n,r,i)),(n=-1<t?e[t]:null)&&gn(n))}function gn(t){if("number"!==typeof t&&t&&!t.wa){var e=t.src;if(e&&e[nn])un(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_n(e))?(un(n,t),0==n.b&&(n.src=null,e[hn]=null)):an(t)}}}function mn(t){return t in ln?ln[t]:ln[t]="on"+t}function yn(t,e,n,r){var i=!0;if((t=_n(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=bn(o,r),i=i&&!1!==o)}return i}function bn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&gn(t),n.call(r,e)}function wn(t,e){if(t.wa)return!0;if(!Ye){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new tn(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=yn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=yn(r[i],t,!1,e),n=n&&o}return n}return bn(t,new tn(e,this))}function _n(t){return(t=t[hn])instanceof sn?t:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(t){return d(t)?t:(t[In]||(t[In]=function(e){return t.handleEvent(e)}),t[In])}function En(){He.call(this),this.v=new sn(this),this.bc=this,this.hb=null}function Sn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function An(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function kn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&un(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Nn(t,e,n){if(d(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function On(t){var e=null;return new Te((function(n,r){-1==(e=Nn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Cn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"===typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Dn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(p(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Rn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Rn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(En,He),En.prototype[nn]=!0,En.prototype.addEventListener=function(t,e,n,r){fn(this,t,e,n,r)},En.prototype.removeEventListener=function(t,e,n,r){vn(this,t,e,n,r)},En.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"===typeof t)t=new Ze(t,n);else if(t instanceof Ze)t.target=t.target||n;else{var i=t;bt(t=new Ze(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=kn(a,r,!0,t)&&i}if(i=kn(a=t.b=n,r,!0,t)&&i,i=kn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=kn(a=t.b=e[o],r,!1,t)&&i;return i},En.prototype.Da=function(){if(En.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)an(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=Rn.prototype).X=function(){xn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return xn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ln=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Mn?(this.i=void 0!==e?e:t.i,Un(this,t.c),this.l=t.l,this.a=t.a,Fn(this,t.g),this.f=t.f,jn(this,ir(t.b)),this.h=t.h):t&&(n=String(t).match(Ln))?(this.i=!!e,Un(this,n[1]||"",!0),this.l=Gn(n[2]||""),this.a=Gn(n[3]||"",!0),Fn(this,n[4]),this.f=Gn(n[5]||"",!0),jn(this,n[6]||"",!0),this.h=Gn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function Un(t,e,n){t.c=n?Gn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Zn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(er(this,e),rr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Hn(e,Yn)),t.b=new $n(e,t.i))}function Vn(t,e,n){t.b.set(e,n)}function qn(t,e){return t.b.get(e)}function Bn(t){return t instanceof Mn?new Mn(t):new Mn(t,void 0)}function Kn(t,e,n,r){var i=new Mn(null,void 0);return t&&Un(i,t),e&&(i.a=e),n&&Fn(i,n),r&&(i.f=r),i}function Gn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Mn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Hn(e,Wn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Hn(e,Wn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hn(n,"/"==n.charAt(0)?Xn:Qn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Hn(n,Jn)),t.join("")},Mn.prototype.resolve=function(t){var e=new Mn(this),n=!!t.c;n?Un(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Fn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?jn(e,ir(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Wn=/[#\/\?@]/g,Qn=/[#\?:]/g,Xn=/[#\?]/g,Yn=/[#\?@]/g,Jn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Zn(t){t.a||(t.a=new Rn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function tr(t){var e=Dn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=Cn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?rr(n,i,o):n.add(i,o)}return n}function er(t,e){Zn(t),e=or(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xn(t)))}function nr(t,e){return Zn(t),e=or(t,e),Pn(t.a.b,e)}function rr(t,e,n){er(t,e),0<n.length&&(t.c=null,t.a.set(or(t,e),$(n)),t.b+=n.length)}function ir(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new Rn(t.a),e.b=t.b),e}function or(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ar(t){var e=[];return ur(new sr,t,e),e.join("")}function sr(){}function ur(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ur(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),lr(r,n),n.push(":"),ur(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":lr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){Zn(this),this.c=null,t=or(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Zn(this),this.a.forEach((function(n,r){G(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Zn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Zn(this);var e=[];if("string"===typeof t)nr(this,t)&&(e=J(e,this.a.get(or(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},t.set=function(t,e){return Zn(this),this.c=null,nr(this,t=or(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var cr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},hr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function lr(t,e){e.push('"',t.replace(hr,(function(t){var e=cr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),cr[t]=e),e})),'"')}function fr(){var t=Rr();return Yt&&!!ce&&11==ce||/Edge\/\d+/.test(t)}function pr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function dr(t,e){e=e||s.window;var n="about:blank";t&&(n=Pt(Ft(t)||qt)),e.location.href=n}function vr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<vr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function gr(t){return!!((t=(t||Rr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function mr(t){t=t||s.window;try{t.close()}catch(e){}}function yr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Rr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Or(Rr())==kr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof xt?n:Ft("undefined"!=typeof n.href?n.href:String(n))||qt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((dt("iPhone")&&!dt("iPod")&&!dt("iPad")||dt("iPad")||dt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(wt(a=me(document,"A"),"HTMLAnchorElement"),e=e instanceof xt?e:jt(e),a.href=Pt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Gt("",r,n,a),t=Pt(e),a&&($t&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+zt(t)+'">',t=new Bt(t=(r=At())?r.createHTML(t):t,null,Kt),r=a.document)&&(r.write(function(t){return t instanceof Bt&&t.constructor===Bt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Gt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var br=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wr=/^[^@]+@[^@]+$/;function _r(){var t=null;return new Te((function(e){"complete"==s.document.readyState?e():(t=function(){e()},dn(window,"load",t))})).o((function(e){throw vn(window,"load",t),e}))}function Ir(t){return t=t||Rr(),!("file:"!==Fr()&&"ionic:"!==Fr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Tr(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Er(){return"undefined"!==typeof s.WorkerGlobalScope&&"function"===typeof s.importScripts}function Sr(){return rt.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":rt.INTERNAL.hasOwnProperty("node")?"Node":Er()?"Worker":"Browser"}function Ar(){var t=Sr();return"ReactNative"===t||"Node"===t}var kr="Firefox",Nr="Chrome";function Or(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?kr:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Nr:"Safari"}var Cr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Dr(t,e){e=e||[];var n,r=[],i={};for(n in Cr)i[Cr[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Sr())?r=Or(i=Rr()):"Worker"===r&&(r=Or(i=Rr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Rr(){return s.navigator&&s.navigator.userAgent||""}function xr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Lr(){try{var t=s.localStorage,e=Kr();if(t)return t.setItem(e,"1"),t.removeItem(e),!fr()||!!s.indexedDB}catch(n){return Er()&&!!s.indexedDB}return!1}function Mr(){return(Ur()||"chrome-extension:"===Fr()||Ir())&&!Ar()&&Lr()&&!Er()}function Ur(){return"http:"===Fr()||"https:"===Fr()}function Fr(){return s.location&&s.location.protocol||null}function jr(t){return!gr(t=t||Rr())&&Or(t)!=kr}function Vr(t){return"undefined"===typeof t?null:ar(t)}function qr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Br(t){if(null!==t)return JSON.parse(t)}function Kr(t){return t||Math.floor(1e9*Math.random()).toString()}function Gr(t){return"Safari"!=Or(t=t||Rr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Hr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function zr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Rr(),e=Sr(),this.b=gr(t)||"ReactNative"===e}function Wr(){var t=s.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function Qr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Xr(){return!(!xr("fireauth.oauthhelper",s)&&!xr("fireauth.iframe",s))}zr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!==typeof t.onLine||!Ur()&&"chrome-extension:"!==Fr()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Yr,Jr={};function $r(t){Jr[t]||(Jr[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var Zr={};Object.defineProperty(Zr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Zr,"abcd",{configurable:!0,enumerable:!0,value:2}),Yr=2==Zr.abcd}catch(da){Yr=!1}function ti(t,e,n){Yr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function ei(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&ti(t,n,e[n])}function ni(t){var e={};return ei(e,t),e}function ri(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)ti(e,n,ri(t[n]));return e}function ii(t){var e=t&&(t[ci]?"phone":null);if(!(e&&t&&t[ui]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");ti(this,"uid",t[ui]),ti(this,"displayName",t[ai]||null);var n=null;t[si]&&(n=new Date(t[si]).toUTCString()),ti(this,"enrollmentTime",n),ti(this,"factorId",e)}function oi(t){try{var e=new hi(t)}catch(n){e=null}return e}ii.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ai="displayName",si="enrolledAt",ui="mfaEnrollmentId",ci="phoneInfo";function hi(t){ii.call(this,t),ti(this,"phoneNumber",t[ci])}function li(t){var e={},n=t[vi],r=t[mi],i=t[yi];if(t=oi(t[gi]),!i||i!=pi&&i!=di&&!n||i==di&&!r||i==fi&&!t)throw Error("Invalid checkActionCode response!");i==di?(e[wi]=n||null,e[Ii]=n||null,e[bi]=r):(e[wi]=r||null,e[Ii]=r||null,e[bi]=n||null),e[_i]=t||null,ti(this,Ei,i),ti(this,Ti,ri(e))}E(hi,ii),hi.prototype.w=function(){var t=hi.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var fi="REVERT_SECOND_FACTOR_ADDITION",pi="EMAIL_SIGNIN",di="VERIFY_AND_CHANGE_EMAIL",vi="email",gi="mfaInfo",mi="newEmail",yi="requestType",bi="email",wi="fromEmail",_i="multiFactorInfo",Ii="previousEmail",Ti="data",Ei="operation";function Si(t){var e=qn(t=Bn(t),Ai)||null,n=qn(t,ki)||null,r=qn(t,Ci)||null;if(r=r&&Ri[r]||null,!e||!n||!r)throw new A("argument-error",Ai+", "+ki+"and "+Ci+" are required in a valid action code URL.");ei(this,{apiKey:e,operation:r,code:n,continueUrl:qn(t,Ni)||null,languageCode:qn(t,Oi)||null,tenantId:qn(t,Di)||null})}var Ai="apiKey",ki="oobCode",Ni="continueUrl",Oi="languageCode",Ci="mode",Di="tenantId",Ri={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:fi,signIn:pi,verifyAndChangeEmail:di,verifyEmail:"VERIFY_EMAIL"};function xi(t){try{return new Si(t)}catch(e){return null}}function Pi(t){var e=t[ji];if("undefined"===typeof e)throw new A("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new A("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Li];if(n&&"object"===typeof n){e=n[Bi];var r=n[Vi];if(n=n[qi],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new A("argument-error",Vi+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new A("argument-error",qi+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new A("argument-error",Bi+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new A("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new A("argument-error",Li+" property must be a non null object when specified.");if(this.f=null,(e=t[Fi])&&"object"===typeof e){if("string"===typeof(e=e[Ki])&&e.length)this.f=e;else if("undefined"!==typeof e)throw new A("argument-error",Ki+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new A("argument-error",Fi+" property must be a non null object when specified.");if("undefined"!==typeof(e=t[Ui])&&"boolean"!==typeof e)throw new A("argument-error",Ui+" property must be a boolean when specified.");if(this.c=!!e,"undefined"!==typeof(t=t[Mi])&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new A("argument-error",Mi+" property must be a non empty string when specified.");this.i=t||null}var Li="android",Mi="dynamicLinkDomain",Ui="handleCodeInApp",Fi="iOS",ji="url",Vi="installApp",qi="minimumVersion",Bi="packageName",Ki="bundleId";function Gi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Hi=null;function zi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Hi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Hi){Hi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Hi[o]&&(Hi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function Wi(t){var e=Xi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Qi(t){try{return new Wi(t)}catch(e){return null}}function Xi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=zi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(pt){}return null}Wi.prototype.T=function(){return this.f},Wi.prototype.l=function(){return this.c},Wi.prototype.toString=function(){return this.h};var Yi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ji=["client_id","response_type","scope","redirect_uri","state"],$i={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Ji},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Ji},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Ji},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Yi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Zi(t){for(var e in $i)if($i[e].fa==t)return $i[e];return null}function to(t){var e={};e["facebook.com"]=oo,e["google.com"]=so,e["github.com"]=ao,e["twitter.com"]=uo;var n=t&&t[no];try{if(n)return e[n]?new e[n](t):new io(t);if("undefined"!==typeof t[eo])return new ro(t)}catch(r){}return null}var eo="idToken",no="providerId";function ro(t){var e=t[no];if(!e&&t[eo]){var n=Qi(t[eo]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),ti(this,"providerId",e),ti(this,"isNewUser",n)}function io(t){ro.call(this,t),ti(this,"profile",ri((t=Br(t.rawUserInfo||"{}"))||{}))}function oo(t){if(io.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ao(t){if(io.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");ti(this,"username",this.profile&&this.profile.login||null)}function so(t){if(io.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function uo(t){if(io.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");ti(this,"username",t.screenName||null)}function co(t){var e=Bn(t),n=qn(e,"link"),r=qn(Bn(n),"link");return e=qn(e,"deep_link_id"),qn(Bn(e),"link")||e||r||n||t}function ho(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?lo:fo}E(io,ro),E(oo,io),E(ao,io),E(so,io),E(uo,io);var lo="enroll",fo="signin";function po(){}function vo(t,e){return t.then((function(t){if(t[is]){var n=Qi(t[is]);if(!n||e!=n.i)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==O+"user-not-found"?new A("user-mismatch"):t}))}function go(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,ti(this,"providerId",t),ti(this,"signInMethod",t)}function mo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function yo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new go(t.providerId,t.pendingToken)}catch(e){}return null}function bo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&ti(this,"idToken",e.idToken),e.accessToken&&ti(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&ti(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");ti(this,"accessToken",e.oauthToken),ti(this,"secret",e.oauthTokenSecret)}ti(this,"providerId",t),ti(this,"signInMethod",n)}function wo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:tr(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function _o(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new bo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function Io(t,e){this.Qc=e||[],ei(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Zi(t)||{}).Ja||null,this.pb=null}function To(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');Io.call(this,t,[])}function Eo(t){Io.call(this,t,Ji),this.a=[]}function So(){Eo.call(this,"facebook.com")}function Ao(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new So).credential({accessToken:e})}function ko(){Eo.call(this,"github.com")}function No(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new ko).credential({accessToken:e})}function Oo(){Eo.call(this,"google.com"),this.Ca("profile")}function Co(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new Oo).credential({idToken:n,accessToken:e})}function Do(){Io.call(this,"twitter.com",Yi)}function Ro(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new bo("twitter.com",n,"twitter.com")}function xo(t,e,n){this.a=t,this.f=e,ti(this,"providerId","password"),ti(this,"signInMethod",n===Lo.EMAIL_LINK_SIGN_IN_METHOD?Lo.EMAIL_LINK_SIGN_IN_METHOD:Lo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Po(t){return t&&t.email&&t.password?new xo(t.email,t.password,t.signInMethod):null}function Lo(){ei(this,{providerId:"password",isOAuthProvider:!1})}function Mo(t,e){if(!(e=Uo(e)))throw new A("argument-error","Invalid email link!");return new xo(t,e.code,Lo.EMAIL_LINK_SIGN_IN_METHOD)}function Uo(t){return(t=xi(t=co(t)))&&t.operation===pi?t:null}function Fo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new A("internal-error");this.a=t,ti(this,"providerId","phone"),this.fa="phone",ti(this,"signInMethod","phone")}function jo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return G(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Fo(e)}return null}function Vo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function qo(t){try{this.a=t||rt.auth()}catch(e){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ei(this,{providerId:"phone",isOAuthProvider:!1})}function Bo(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Fo({fb:t,eb:e})}function Ko(t){if(t.temporaryProof&&t.phoneNumber)return new Fo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Co(o,n);case"facebook.com":return Ao(n);case"github.com":return No(n);case"twitter.com":return Ro(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new go(e,a):new bo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Eo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Go(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function Ho(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function zo(t){return(t=t||{}).type?new Ho(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&k(t.error),t.postBody,t.tenantId):null}function Wo(){this.b=null,this.a=[]}ho.prototype.Ha=function(){return this.a?Ce(this.a):Ce(this.b)},ho.prototype.w=function(){return this.type==lo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},po.prototype.ka=function(){},po.prototype.b=function(){},po.prototype.c=function(){},po.prototype.w=function(){},go.prototype.ka=function(t){return As(t,mo(this))},go.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,ks(t,n)},go.prototype.c=function(t,e){return vo(Ns(t,mo(this)),e)},go.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},bo.prototype.ka=function(t){return As(t,wo(this))},bo.prototype.b=function(t,e){var n=wo(this);return n.idToken=e,ks(t,n)},bo.prototype.c=function(t,e){return vo(Ns(t,wo(this)),e)},bo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Io.prototype.Ka=function(t){return this.Jb=mt(t),this},E(To,Io),E(Eo,Io),Eo.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},Eo.prototype.Rb=function(){return $(this.a)},Eo.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new bo(this.providerId,n,this.providerId)},E(So,Eo),ti(So,"PROVIDER_ID","facebook.com"),ti(So,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(ko,Eo),ti(ko,"PROVIDER_ID","github.com"),ti(ko,"GITHUB_SIGN_IN_METHOD","github.com"),E(Oo,Eo),ti(Oo,"PROVIDER_ID","google.com"),ti(Oo,"GOOGLE_SIGN_IN_METHOD","google.com"),E(Do,Io),ti(Do,"PROVIDER_ID","twitter.com"),ti(Do,"TWITTER_SIGN_IN_METHOD","twitter.com"),xo.prototype.ka=function(t){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?cu(t,Ms,{email:this.a,oobCode:this.f}):cu(t,iu,{email:this.a,password:this.f})},xo.prototype.b=function(t,e){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?cu(t,Us,{idToken:e,email:this.a,oobCode:this.f}):cu(t,Ys,{idToken:e,email:this.a,password:this.f})},xo.prototype.c=function(t,e){return vo(this.ka(t),e)},xo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ei(Lo,{PROVIDER_ID:"password"}),ei(Lo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ei(Lo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Fo.prototype.ka=function(t){return t.gb(Vo(this))},Fo.prototype.b=function(t,e){var n=Vo(this);return n.idToken=e,cu(t,au,n)},Fo.prototype.c=function(t,e){var n=Vo(this);return n.operation="REAUTH",vo(t=cu(t,su,n),e)},Fo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},qo.prototype.gb=function(t,e){var n=this.a.a;return Ce(e.verify()).then((function(r){if("string"!==typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===e.type){var i,o=v(t)?t.session:null,a=v(t)?t.phoneNumber:t;return i=o&&o.type==lo?o.Ha().then((function(t){return function(t,e){return cu(t,$s,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==fo?o.Ha().then((function(e){return function(t,e){return cu(t,Zs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return cu(t,Qs,e)}(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}))}throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},ei(qo,{PROVIDER_ID:"phone"}),ei(qo,{PHONE_SIGN_IN_METHOD:"phone"}),Ho.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Ho.prototype.T=function(){return this.h},Ho.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Qo,Xo=null;function Yo(t){var e="unauthorized-domain",n=void 0,r=Bn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ht("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ht("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Jo(t,e,n){A.call(this,t,n),(t=e||{}).Kb&&ti(this,"email",t.Kb),t.ea&&ti(this,"phoneNumber",t.ea),t.credential&&ti(this,"credential",t.credential),t.$b&&ti(this,"tenantId",t.$b)}function $o(t){if(t.code){var e=t.code||"";0==e.indexOf(O)&&(e=e.substring(O.length));var n={credential:Ko(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Jo(e,n,t.message)}return null}function Zo(){}function ta(t){return t.c||(t.c=t.b())}function ea(){}function na(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(xd){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ra(){}function ia(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Tb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function oa(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function aa(t,e,n){this.reset(t,e,n,void 0,void 0)}E(Yo,A),E(Jo,A),Jo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&bt(t,e),t},Jo.prototype.toJSON=function(){return this.w()},Zo.prototype.c=null,E(ea,Zo),ea.prototype.a=function(){var t=na(this);return t?new ActiveXObject(t):new XMLHttpRequest},ea.prototype.b=function(){var t={};return na(this)&&(t[0]=!0,t[1]=!0),t},Qo=new ea,E(ra,Zo),ra.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ia;throw Error("Unsupported browser")},ra.prototype.b=function(){return{}},(t=ia.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,oa(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",oa(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,oa(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},aa.prototype.a=null;function sa(t){this.f=t,this.b=this.c=this.a=null}function ua(t,e){this.name=t,this.value=e}aa.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||T(),delete this.a},ua.prototype.toString=function(){return this.name};var ca=new ua("SEVERE",1e3),ha=new ua("WARNING",900),la=new ua("CONFIG",700),fa=new ua("FINE",500);function pa(t){return t.c?t.c:t.a?pa(t.a):(M("Root logger has no level set."),null)}sa.prototype.log=function(t,e,n){if(t.value>=pa(this).value)for(d(e)&&(e=e()),t=new aa(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var da,va={},ga=null;function ma(t){var e;if(ga||(ga=new sa(""),va[""]=ga,ga.c=la),!(e=va[t])){e=new sa(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ma(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,va[t]=e}return e}function ya(t,e){t&&t.log(fa,e,void 0)}function ba(t){this.f=t}function wa(t){En.call(this),this.u=t,this.h=void 0,this.readyState=_a,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ma("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(ba,Zo),ba.prototype.a=function(){return new wa(this.f)},ba.prototype.b=(da={},function(){return da}),E(wa,En);var _a=0;function Ia(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function Ta(t){t.readyState=4,t.g=null,t.c=null,t.m=null,Ea(t)}function Ea(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Sa(t){En.call(this),this.headers=new Rn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Aa,this.u=this.S=!1}(t=wa.prototype).open=function(t,e){if(this.readyState!=_a)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,Ea(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Ta(this)),this.readyState=_a},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Ea(this)),this.a&&(this.readyState=3,Ea(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,Ia(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Ta(this):Ea(this),3==this.readyState&&Ia(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,Ta(this))},t.sc=function(t){this.a&&(this.response=t,Ta(this))},t.Va=function(t){var e=this.i;e&&e.log(ha,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&Ta(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ha,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ha,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),E(Sa,En);var Aa="";Sa.prototype.b=ma("goog.net.XhrIo");var ka=/^https?$/i,Na=["POST","PUT"];function Oa(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Qo.a(),t.C=t.D?ta(t.D):ta(Qo),t.a.onreadystatechange=_(t.Wb,t);try{ya(t.b,Fa(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(a){return ya(t.b,Fa(t,"Error opening Xhr: "+a.message)),void Da(t,a)}e=r||"";var o=new Rn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"===typeof t)G(t,e,void 0);else for(var n=Dn(t),r=Cn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ca,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!Q(Na,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{La(t),0<t.g&&(t.u=function(t){return Yt&&se(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(t.a),ya(t.b,Fa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=Nn(t.Ma,t.g,t)),ya(t.b,Fa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){ya(t.b,Fa(t,"Send error: "+a.message)),Da(t,a)}}function Ca(t){return"content-type"==t.toLowerCase()}function Da(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ra(t),Pa(t)}function Ra(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function xa(t){if(t.c&&"undefined"!=typeof a)if(t.C[1]&&4==Ma(t)&&2==Ua(t))ya(t.b,Fa(t,"Local request error detected and ignored"));else if(t.i&&4==Ma(t))Nn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ma(t)){ya(t.b,Fa(t,"Request complete")),t.c=!1;try{var e,n=Ua(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Ln)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!ka.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ma(t)?t.a.statusText:""}catch(h){ya(t.b,"Can not get status: "+h.message),c=""}t.h=c+" ["+Ua(t)+"]",Ra(t)}}finally{Pa(t)}}}function Pa(t,e){if(t.a){La(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(xd){(t=t.b)&&t.log(ca,"Problem encountered resetting onreadystatechange: "+xd.message,void 0)}}}function La(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Ma(t){return t.a?t.a.readyState:0}function Ua(t){try{return 2<Ma(t)?t.a.status:-1}catch(e){return-1}}function Fa(t,e){return e+" ["+t.P+" "+t.l+" "+Ua(t)+"]"}function ja(t){var e=Ya;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Va(t,e,n){t.a=!0,t.c=n,t.f=!e,Ga(t)}function qa(t){if(t.a){if(!t.v)throw new Ha(t);t.v=!1}}function Ba(t,e,n,r){t.g.push([e,n,r]),t.a&&Ga(t)}function Ka(t){return W(t.g,(function(t){return d(t[1])}))}function Ga(t){if(t.h&&t.a&&Ka(t)){var e=t.h,n=Qa[e];n&&(s.clearTimeout(n.a),delete Qa[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(x(e)||"function"===typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ka(t)||(n=!0)}}t.c=e,r&&(u=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof ja?(Ba(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Wa(e),Qa[e.a]=e,t.h=e.a)}function Ha(){P.call(this)}function za(){P.call(this)}function Wa(t){this.a=s.setTimeout(_(this.c,this),0),this.b=t}(t=Sa.prototype).Ma=function(){"undefined"!=typeof a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ya(this.b,Fa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ya(this.b,Fa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Pa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Pa(this,!0)),Sa.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?xa(this):this.Jc())},t.Jc=function(){xa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Aa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ca,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ya(this.b,"Can not get response: "+e.message),null}},ja.prototype.cancel=function(t){if(this.a)this.c instanceof ja&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new za(this),qa(this),Va(this,!1,t))}},ja.prototype.m=function(t,e){this.i=!1,Va(this,t,e)},ja.prototype.then=function(t,e,n){var r,i,o=new Te((function(t,e){r=t,i=e}));return Ba(this,r,(function(t){t instanceof za?o.cancel():i(t)})),o.then(t,e,n)},ja.prototype.$goog_Thenable=!0,E(Ha,P),Ha.prototype.message="Deferred has already fired",Ha.prototype.name="AlreadyCalledError",E(za,P),za.prototype.message="Deferred was canceled",za.prototype.name="CanceledError",Wa.prototype.c=function(){throw delete Qa[this.a],this.b};var Qa={};function Xa(t){var e={},n=e.document||document,r=Nt(t).toString(),i=me(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new ja(o),u=null,l=null!=e.timeout?e.timeout:5e3;return 0<l&&(u=window.setTimeout((function(){Ja(i,!0);var t=new ts(Za,"Timeout reached for loading script "+r);qa(a),Va(a,!1,t)}),l),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ja(i,e.xd||!1,u),qa(a),Va(a,!0,null))},i.onerror=function(){Ja(i,!0,u);var t=new ts($a,"Error while loading script "+r);qa(a),Va(a,!1,t)},bt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),fe(i,o),function(t,e){wt(t,"HTMLScriptElement"),t.src=Nt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=h(e.document):(null===c&&(c=h(s.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ya(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Ja(t,!0,this.Ma)}}function Ja(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var $a=0,Za=1;function ts(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function es(t){this.f=t}function ns(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||os,this.g=mt(t.secureTokenHeaders||as),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ss,this.a=mt(t.firebaseHeaders||us),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Sr(),!(n=s.XMLHttpRequest||n&&rt.INTERNAL.node&&rt.INTERNAL.node.XMLHttpRequest)&&!Er())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Er()?this.f=new ba(self):Ar()?this.f=new es(n):this.f=new ra,this.b=null}E(ts,P),E(es,Zo),es.prototype.a=function(){return new this.f},es.prototype.b=function(){return{}};var rs,is="idToken",os=new zr(3e4,6e4),as={"Content-Type":"application/x-www-form-urlencoded"},ss=new zr(3e4,6e4),us={"Content-Type":"application/json"};function cs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function hs(t,e){e&&(t.l=ls("https://securetoken.googleapis.com/v1/token",e),t.h=ls("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ls("https://identitytoolkit.googleapis.com/v2/",e))}function ls(t,e){return t=Bn(t),e=Bn(e.url),t.f=t.a+t.f,Un(t,e.c),t.a=e.a,Fn(t,e.g),t.toString()}function fs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ps(t,e,n,r,i,o,a){(function(){var t=Rr();return!((t=Or(t)!=Nr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Yt||!ce||9<ce)})()||Er()?t=_(t.u,t):(rs||(rs=new Te((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[vs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ba(t,null,e,void 0)}(Xa(Ot(ds,{onload:vs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=_(t.s,t)),t(e,n,r,i,o,a)}ns.prototype.T=function(){return this.b},ns.prototype.u=function(t,e,n,r,i,o){if(Er()&&("undefined"===typeof s.fetch||"undefined"===typeof s.Headers||"undefined"===typeof s.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Sa(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Sn(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ya(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(pt){t=null}e&&e(t)})),An(a,"ready",(function(){u&&clearTimeout(u),Qe(this)})),An(a,"timeout",(function(){u&&clearTimeout(u),Qe(this),e&&e(null)})),Oa(a,t,n,r,i)};var ds=new _t(St,"https://apis.google.com/js/client.js?onload=%{onload}"),vs="__fcb"+Math.floor(1e6*Math.random()).toString();function gs(t,e,n,r,i,o,a){var s=Bn(e+n);Vn(s,"key",t.c),a&&Vn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Vn(s,c,i[c]);return new Te((function(e,n){ps(t,s.toString(),(function(t){t?t.error?n(lu(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:ar(qr(i)),t.a,t.v.get())}))}function ms(t){if("string"!==typeof(t=t.email)||!wr.test(t))throw new A("invalid-email")}function ys(t){"email"in t&&ms(t)}function bs(t){if(!t[is]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,mt(t));throw new A("internal-error")}}function ws(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}ns.prototype.s=function(t,e,n,r,i){var o=this;rs.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},ns.prototype.Ab=function(){return cu(this,Js,{})},ns.prototype.Cb=function(t,e){return cu(this,Xs,{idToken:t,email:e})},ns.prototype.Db=function(t,e){return cu(this,Ys,{idToken:t,password:e})};var _s={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Is(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function Ts(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function Es(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(nr(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Ss(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=$o(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=$o(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=$o(t)):t.errorMessage&&(e=hu(t.errorMessage)),e)throw e;bs(t)}function As(t,e){return e.returnIdpCredential=!0,cu(t,tu,e)}function ks(t,e){return e.returnIdpCredential=!0,cu(t,nu,e)}function Ns(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,cu(t,eu,e)}function Os(t){if(!t.oobCode)throw new A("invalid-action-code")}(t=ns.prototype).Eb=function(t,e){var n={idToken:t},r=[];return vt(_s,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),cu(this,Xs,n)},t.wb=function(t,e){return bt(t={requestType:"PASSWORD_RESET",email:t},e),cu(this,Gs,t)},t.xb=function(t,e){return bt(t={requestType:"EMAIL_SIGNIN",email:t},e),cu(this,qs,t)},t.vb=function(t,e){return bt(t={requestType:"VERIFY_EMAIL",idToken:t},e),cu(this,Bs,t)},t.Fb=function(t,e,n){return bt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),cu(this,Ks,t)},t.gb=function(t){return cu(this,ou,t)},t.ob=function(t,e){return cu(this,Ws,{oobCode:t,newPassword:e})},t.Sa=function(t){return cu(this,Ds,{oobCode:t})},t.kb=function(t){return cu(this,Cs,{oobCode:t})};var Cs={endpoint:"setAccountInfo",A:Os,Z:"email",B:!0},Ds={endpoint:"resetPassword",A:Os,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},B:!0},Rs={endpoint:"signupNewUser",A:function(t){if(ms(t),!t.password)throw new A("weak-password")},G:bs,V:!0,B:!0},xs={endpoint:"createAuthUri",B:!0},Ps={endpoint:"deleteAccount",O:["idToken"]},Ls={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new A("internal-error")}},Ms={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ms,G:bs,V:!0,B:!0},Us={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ms,G:bs,V:!0},Fs={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:Is,G:bs,B:!0,Na:!0},js={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:Is,G:bs,B:!0,Na:!0},Vs={endpoint:"getAccountInfo"},qs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");ms(t)},Z:"email",B:!0},Bs={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Ks={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Gs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");ms(t)},Z:"email",B:!0},Hs={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},zs={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},Ws={endpoint:"resetPassword",A:Os,Z:"email",B:!0},Qs={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Xs={endpoint:"setAccountInfo",O:["idToken"],A:ys,V:!0},Ys={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(ys(t),!t.password)throw new A("weak-password")},G:bs,V:!0},Js={endpoint:"signupNewUser",G:bs,V:!0,B:!0},$s={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Zs={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},tu={endpoint:"verifyAssertion",A:Ts,Za:Es,G:Ss,V:!0,B:!0},eu={endpoint:"verifyAssertion",A:Ts,Za:Es,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw hu(t.errorMessage);bs(t)},V:!0,B:!0},nu={endpoint:"verifyAssertion",A:function(t){if(Ts(t),!t.idToken)throw new A("internal-error")},Za:Es,G:Ss,V:!0},ru={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new A("invalid-custom-token")},G:bs,V:!0,B:!0},iu={endpoint:"verifyPassword",A:function(t){if(ms(t),!t.password)throw new A("wrong-password")},G:bs,V:!0,B:!0},ou={endpoint:"verifyPhoneNumber",A:ws,G:bs,B:!0},au={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new A("internal-error");ws(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",$o(t);bs(t)}},su={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ws,G:bs,B:!0},uu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[is]^!!t.refreshToken)throw new A("internal-error")},B:!0,Na:!0};function cu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.O))return De(new A("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ce(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),gs(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new A("internal-error");return r[e.Z]}))}function hu(t){return lu({error:{errors:[{message:t}],code:400,message:t}})}function lu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",bt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=Vr(t)),new A("internal-error",e)}function fu(t){this.b=t,this.a=null,this.sb=function(t){return(gu||(gu=new Te((function(t,e){function n(){Hr(),xr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Hr(),e(Error("Network Error"))},timeout:du.get()})}if(xr("gapi.iframes.Iframe"))t();else if(xr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){xr("gapi.load")?n():e(Error("Network Error"))},Ce(Xa(r=Ot(pu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw gu=null,t})))).then((function(){return new Te((function(e,n){xr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),vu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var pu=new _t(St,"https://apis.google.com/js/api.js?onload=%{onload}"),du=new zr(3e4,6e4),vu=new zr(5e3,15e3),gu=null;function mu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Kn((t=Bn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Kn("https",this.l,null,"/__/auth/iframe"),this.a=t,Vn(this.a,"apiKey",this.h),Vn(this.a,"appName",this.i),this.b=null,this.c=[]}function yu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function bu(t){try{return rt.app(t).auth().Ga()}catch(e){return[]}}function wu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function _u(t){var e=pr();return function(t){return cu(t,Hs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Bn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Bn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:br.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Yo(pr())}))}function Iu(t){return t.m||(t.m=_r().then((function(){if(!t.u){var e=t.c,n=t.i,r=bu(t.b),i=new mu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=$(r||[]),t.u=i.toString()}t.v=new fu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=zo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ce(n)}return n.status="ERROR",Ce(n)}))}(t)}))),t.m}function Tu(t){return t.l||(t.C=t.c?Dr(t.c,bu(t.b)):null,t.l=new ns(t.g,R(t.i),t.C),t.f&&hs(t.l,t.f)),t.l}function Eu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new yu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=mt(u||null),t.f=c,t.zb(h).toString()}function Su(t){if(this.a=t||rt.INTERNAL.reactNative&&rt.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Au(t){this.b=t,this.a={},this.f=_(this.c,this)}mu.prototype.toString=function(){return this.f?Vn(this.a,"v",this.f):er(this.a.b,"v"),this.b?Vn(this.a,"eid",this.b):er(this.a.b,"eid"),this.c.length?Vn(this.a,"fw",this.c.join(",")):er(this.a.b,"fw"),this.a.toString()},yu.prototype.zb=function(t){return this.h=t,this},yu.prototype.toString=function(){if(this.v){var t=Bn(this.v.url);t=Kn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Kn("https",this.u,null,"/__/auth/handler");if(Vn(t,"apiKey",this.s),Vn(t,"appName",this.c),Vn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=rt.app(this.c).auth().la()}catch(s){n=null}for(var r in e.pb=n,Vn(t,"providerId",this.a.providerId),e=qr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=mt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),gt(e)||Vn(t,"customParameters",Vr(e))}if("function"===typeof this.a.Rb&&((n=this.a.Rb()).length&&Vn(t,"scopes",n.join(","))),this.l?Vn(t,"redirectUrl",this.l):er(t.b,"redirectUrl"),this.g?Vn(t,"eventId",this.g):er(t.b,"eventId"),this.i?Vn(t,"v",this.i):er(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!qn(t,a)&&Vn(t,a,this.b[a]);return this.h?Vn(t,"tid",this.h):er(t.b,"tid"),this.f?Vn(t,"eid",this.f):er(t.b,"eid"),(a=bu(this.c)).length&&Vn(t,"fw",a.join(",")),t.toString()},(t=wu.prototype).Pb=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return Iu(t).then((function(){return function(t,e){return t.sb.then((function(){return new Te((function(n){t.a.send(e.type,e,n,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&mr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Te((function(e){return function n(){On(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return On(n).then((function(){e(r)}))}))},t.Yb=function(){var t=Rr();return!jr(t)&&!Gr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,a,s){if(!t)return De(new A("popup-blocked"));if(a&&!jr())return this.ma().o((function(e){mr(t),i(e)})),r(),Ce();this.a||(this.a=_u(Tu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw mr(t),i(e),e}));return r(),e})).then((function(){(Go(n),a)||dr(Eu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=_u(Tu(this)));var i=this;return this.a.then((function(){Go(e),dr(Eu(i.s,i.g,i.b,t,e,pr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return Iu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new A("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){Y(this.h,(function(e){return e==t}))},(t=Su.prototype).get=function(t){return Ce(this.a.getItem(t)).then((function(t){return t&&Br(t)}))},t.set=function(t,e){return Ce(this.a.setItem(t,Vr(e)))},t.U=function(t){return Ce(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var ku,Nu=[];function Ou(t,e,n){gt(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Cu(t){this.a=t}function Du(t){this.c=t,this.b=!1,this.a=[]}function Ru(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return De(Error("connection_unavailable"));var h=r?800:50,l="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Te((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:l,onMessage:o},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return xu(t,c),e})).o((function(e){throw xu(t,c),e}))}function xu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function Pu(){if(!Fu())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Er()&&self?(this.v=function(){var t=Er()?self:null;if(G(Nu,(function(n){n.b==t&&(e=n)})),!e){var e=new Au(t);Nu.push(e)}return e}(),Ou(this.v,"keyChanged",(function(e,n){return Ku(t).then((function(e){return 0<e.length&&G(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),Ou(this.v,"ping",(function(){return Ce(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Ce().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ce(null)}().then((function(e){(t.h=e)&&(t.g=new Du(new Cu(e)),Ru(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Lu(t){return new Te((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Te((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Lu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Mu(t){return t.i||(t.i=Lu(t)),t.i}function Uu(t,e){var n=0;return new Te((function r(i,o){Mu(t).then(e).then(i).o((function(e){if(!(3<++n))return Mu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Fu(){try{return!!s.indexedDB}catch(da){return!1}}function ju(t){return t.objectStore("firebaseLocalStorage")}function Vu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function qu(t){return new Te((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Bu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Ru(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ce()}function Ku(t){return Mu(t).then((function(t){var e=ju(Vu(t,!1));return e.getAll?qu(e.getAll()):new Te((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=vr(t.c,n),t.c=n}return r}))}function Gu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Hu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ce().then((function(){if(Fu()){var t=Kr(),r="__sak"+t;return ku||(ku=new Pu),(n=ku).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){G(e.a,(function(e){e(t)}))})),t}))}function zu(){this.a={},this.type="inMemory"}function Wu(){if(!function(){var t="Node"==Sr();if(!(t=Qu()||t&&rt.INTERNAL.node&&rt.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Sr())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Qu()||rt.INTERNAL.node.localStorage,this.type="localStorage"}function Qu(){try{var t=s.localStorage,e=Kr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Xu(){this.type="nullStorage"}function Yu(){if(!function(){var t="Node"==Sr();if(!(t=Ju()||t&&rt.INTERNAL.node&&rt.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Sr())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Ju()||rt.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ju(){try{var t=s.sessionStorage,e=Kr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function $u(){var t={};t.Browser=ec,t.Node=nc,t.ReactNative=rc,t.Worker=ic,this.a=t[Sr()]}Au.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];G(r,(function(e){i.push(Ce().then((function(){return e(t.origin,t.data.data)})))})),xe(i).then((function(r){var i=[];G(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),G(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Cu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Du.prototype.close=function(){for(;0<this.a.length;)xu(this,this.a[0]);this.b=!0},(t=Pu.prototype).set=function(t,e){var n=this,r=!1;return Uu(this,(function(e){return qu((e=ju(Vu(e,!0))).get(t))})).then((function(i){return Uu(n,(function(o){if(o=ju(Vu(o,!0)),i)return i.value=e,qu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,qu(o.add(a))}))})).then((function(){return n.c[t]=e,Bu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Uu(this,(function(e){return qu(ju(Vu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Uu(this,(function(r){return n=!0,e.b++,qu(ju(Vu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Bu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Ku(t).then((function(e){0<e.length&&G(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Gu(t),e()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&Gu(this)},(t=Hu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t}))},(t=zu.prototype).get=function(t){return Ce(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ce()},t.U=function(t){return delete this.a[t],Ce()},t.ca=function(){},t.ia=function(){},(t=Wu.prototype).get=function(t){var e=this;return Ce().then((function(){return Br(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Vr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&fn(s.window,"storage",t)},t.ia=function(t){s.window&&vn(s.window,"storage",t)},(t=Xu.prototype).get=function(){return Ce(null)},t.set=function(){return Ce()},t.U=function(){return Ce()},t.ca=function(){},t.ia=function(){},(t=Yu.prototype).get=function(t){var e=this;return Ce().then((function(){return Br(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Vr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Zu,tc,ec={F:Wu,cb:Yu},nc={F:Wu,cb:Yu},rc={F:Su,cb:Xu},ic={F:Wu,cb:Xu},oc={rd:"local",NONE:"none",td:"session"};function ac(){var t=!(Gr(Rr())||!Tr()),e=jr(),n=Lr();this.m=t,this.h=e,this.l=n,this.a={},Zu||(Zu=new $u),t=Zu;try{this.g=!fr()&&Xr()||!s.indexedDB?new t.a.F:new Hu(Er()?new zu:new t.a.F)}catch(r){this.g=new zu,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new zu}this.v=new zu,this.f=_(this.Zb,this),this.b={}}function sc(){return tc||(tc=new ac),tc}function uc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function cc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function hc(t,e,n){return n=cc(e,n),"local"==e.F&&(t.b[n]=null),uc(t,e.F).U(n)}function lc(t){t.c&&(clearInterval(t.c),t.c=null)}function fc(t){this.a=t,this.b=sc()}(t=ac.prototype).get=function(t,e){return uc(this,t.F).get(cc(t,e))},t.set=function(t,e,n){var r=cc(t,n),i=this,o=uc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=cc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),gt(this.a)&&(uc(this,"local").ca(this.f),this.h||(fr()||!Xr())&&s.indexedDB||!this.l||function(t){lc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new tn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=cc(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),gt(this.a)&&(uc(this,"local").ia(this.f),lc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?uc(this,"local").ia(this.f):lc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.nb(e))},Yt&&ce&&10==ce&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else G(t,_(this.nb,this))},t.nb=function(t){this.a[t]&&G(this.a[t],(function(t){t()}))};var pc,dc={name:"authEvent",F:"local"};function vc(){this.a=sc()}function gc(t,e){this.b=mc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===pc&&(pc=s.Int32Array?new Int32Array(Ec):Ec),this.reset()}E(gc,(function(){this.b=-1}));for(var mc=64,yc=mc-1,bc=[],wc=0;wc<yc;wc++)bc[wc]=0;var _c=J(128,bc);function Ic(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|pc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function Tc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Ic(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Ic(t),i=0)}}t.c=i,t.g+=n}gc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):$(this.h)};var Ec=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Sc(){gc.call(this,8,Ac)}E(Sc,gc);var Ac=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function kc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new vc,this.g=new fc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Nc(t){return new A("invalid-cordova-configuration",t)}function Oc(t){var e=new Sc;Tc(e,t),t=[];var n=8*e.g;56>e.c?Tc(e,_c,56-e.c):Tc(e,_c,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Ic(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Cc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Dc(t){return t.f||(t.f=t.ma().then((function(){return new Te((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Rc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=co(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Br(qn(o=Bn(i),"firebaseError")||null))?k(o):null)?new Ho(r.c,r.b,null,null,o,null,r.T()):new Ho(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Cc(t,i)}))}var n=new Ho("unknown",null,null,null,new A("no-auth-event")),r=!1,i=On(500).then((function(){return Rc(t).then((function(){r||Cc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(xr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(n){console.error(n)}},Xo||(Xo=new Wo),function(t){var e=Xo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"===typeof(t=xr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Rc(t){var e=null;return function(t){return t.b.get(dc,t.a).then((function(t){return zo(t)}))}(t.g).then((function(n){return e=n,hc((n=t.g).b,dc,n.a)})).then((function(){return e}))}function xc(t){this.a=t,this.b=sc()}(t=kc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Ir(void 0)?_r().then((function(){return new Te((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):De(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof xr("universalLinks.subscribe",s))throw Nc("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof xr("BuildInfo.packageName",s))throw Nc("cordova-plugin-buildinfo is not installed");if("function"!==typeof xr("cordova.plugins.browsertab.openUrl",s))throw Nc("cordova-plugin-browsertab is not installed");if("function"!==typeof xr("cordova.InAppBrowser.open",s))throw Nc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},t.Pb=function(t,e){return e(new A("operation-not-supported-in-this-environment")),Ce()},t.Nb=function(){return De(new A("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return De(new A("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=Ce().then((function(){return Go(e),Dc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Ho(e,r,null,o,new A("no-auth-event"),null,i),u=xr("BuildInfo.packageName",s);if("string"!==typeof u)throw new A("invalid-cordova-configuration");var c=xr("BuildInfo.displayName",s),h={};if(Rr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Rr().toLowerCase().match(/android/))return De(new A("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Oc(o),h.sessionId=o;var l=Eu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(dc,a.w(),e)})).then((function(){var e=xr("cordova.plugins.browsertab.isAvailable",s);if("function"!==typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!==typeof(n=xr("cordova.plugins.browsertab.openUrl",s)))throw new A("invalid-cordova-configuration");n(l)}else{if("function"!==typeof(n=xr("cordova.InAppBrowser.open",s)))throw new A("invalid-cordova-configuration");e=Rr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Te((function(t,e){u=function(){var e=xr("cordova.plugins.browsertab.close",s);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=On(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},h=function(){Wr()&&c()},o.addEventListener("resume",c,!1),Rr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Rc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Dc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Ho("unknown",null,null,null,new A("no-auth-event")),t(e))}))},t.Ta=function(t){Y(this.b,(function(e){return e==t}))};var Pc={name:"pendingRedirect",F:"session"};function Lc(t){return hc(t.b,Pc,t.a)}function Mc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Jc,this.C=new nh,this.g=new xc(Xc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Uc(this.D,this.v,this.m,N,this.J)}function Uc(t,e,n,r,i){var o=rt.SDK_VERSION||null;return Ir()?new kc(t,e,n,o,r,i):new wu(t,e,n,o,r,i)}function Fc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function jc(t){t.a.Yb()&&Fc(t).o((function(e){var n=new Ho("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Hc(e)&&t.s(n)})),t.a.Ub()||$c(t.b)}function Vc(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Pc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Lc(t.g).then((function(){Fc(t).o((function(e){var n=new Ho("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Hc(e)&&t.s(n)}))})):jc(t)})).o((function(){jc(t)}))}function qc(t,e){Y(t.h,(function(t){return t==e}))}Mc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Uc(this.D,this.v,this.m,null,this.J),this.i={}},Mc.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return $c(this.b),e};var Bc=new zr(2e3,1e4),Kc=new zr(3e4,6e4);function Gc(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Hc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function zc(t,e,n,r,i){var o;return function(t){return t.b.set(Pc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Hc(e))throw new A("operation-not-supported-in-this-environment");return o=e,Lc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new Te((function(){})):Lc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Wc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Bc.get())}Mc.prototype.ra=function(){return this.b.ra()};var Qc={};function Xc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Yc(t,e,n,r){var i=Xc(e,n,r);return Qc[i]||(Qc[i]=new Mc(t,e,n,r)),Qc[i]}function Jc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function $c(t){t.g||(t.g=!0,eh(t,!1,null,null))}function Zc(t){t.g&&!t.i&&eh(t,!1,null,null)}function th(t,e){if(t.b=function(){return Ce(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function eh(t,e,n,r){e?r?function(t,e){if(t.b=function(){return De(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):th(t,n):th(t,{user:null}),t.f=[],t.c=[]}function nh(){}function rh(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function ih(t,e){this.a=e,ti(this,"verificationId",t)}function oh(t,e,n,r){return new qo(t).gb(e,n).then((function(t){return new ih(t,r)}))}function ah(t){var e=Xi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ei(this,{token:t,expirationTime:Qr(1e3*e.exp),authTime:Qr(1e3*e.auth_time),issuedAtTime:Qr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function sh(t,e,n){var r=e&&e[ch];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=mt(e),this.g=n,this.c=new ho(null,r),this.b=[];var i=this;G(e[uh]||[],(function(t){(t=oi(t))&&i.b.push(t)})),ti(this,"auth",this.a),ti(this,"session",this.c),ti(this,"hints",this.b)}Jc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Jc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(eh(this,!0,null,t.a),Ce()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){eh(t,s,e,null)})).o((function(e){eh(t,s,null,e)}))}(this,t,e):De(new A("invalid-auth-event")):(eh(this,!1,null,null),Ce())}else De(new A("invalid-auth-event"))},Jc.prototype.ra=function(){var t=this;return new Te((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=On(Kc.get()).then((function(){t.b||(t.g=!0,eh(t,!0,null,e))}))}(t))}))},nh.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ce()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):De(new A("invalid-auth-event"))}else De(new A("invalid-auth-event"))},ih.prototype.confirm=function(t){return t=Bo(this.verificationId,t),this.a(t)};var uh="mfaInfo",ch="mfaPendingCredential";function hh(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new sh(t,e,n),ti(this,"resolver",this.b)}function lh(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new hh(e,t.serverResponse,n,t.message)}catch(r){}return null}function fh(){}function ph(t){ti(this,"factorId",t.fa),this.a=t}function dh(t){if(ph.call(this,t),this.a.fa!=qo.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function vh(t,e){for(var n in Ze.call(this,t),e)this[n]=e[n]}function gh(t,e){this.a=t,this.b=[],this.c=_(this.yc,this),fn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&G(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ui]=t.uid),t.displayName&&(r[ai]=t.displayName),t.enrollmentTime&&(r[si]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ci]=t.phoneNumber);try{e=new hi(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),mh(this,n)}function mh(t,e){t.b=e,ti(t,"enrolledFactors",e)}function yh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function bh(t,e){t.stop(),t.b=On(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return Wr()||!t?Ce():new Te((function(n){e=function(){Wr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){bh(t,!0)})).o((function(e){t.i(e)&&bh(t,!1)}))}function wh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function _h(t,e){"undefined"===typeof e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function Ih(t,e){t.b=Qi(e[is]||""),t.a=e.refreshToken,_h(t,"undefined"!==typeof(e=e.expiresIn)?Number(e):void 0)}function Th(t,e){return function(t,e){return new Te((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ps(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(lu(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",tr(e).toString(),t.g,t.m.get()):r(new A("internal-error"))}))}(t.f,e).then((function(e){return t.b=Qi(e.access_token),t.a=e.refresh_token,_h(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Eh(t,e){this.a=t||null,this.b=e||null,ei(this,{lastSignInTime:Qr(e||null),creationTime:Qr(t||null)})}function Sh(t,e,n,r,i,o){ei(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Ah(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=rt.SDK_VERSION?Dr(rt.SDK_VERSION):null;this.a=new ns(this.l,R(N),r),(this.u=t.emulatorConfig||null)&&hs(this.a,this.u),this.h=new wh(this.a),Lh(this,e[is]),Ih(this.h,e),ti(this,"refreshToken",this.h.a),Fh(this,n||{}),En.call(this),this.P=!1,this.s&&Mr()&&(this.b=Yc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new yh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=_(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){kh(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Ch(i,t.f)},this.ja=null,this.S=new gh(this,n),ti(this,"multiFactor",this.S)}function kh(t,e){t.u=e,hs(t.a,e),t.b&&(e=t.b,t.b=Yc(t.s,t.l,t.m,t.u),t.P&&(qc(e,t),Vc(t.b,t)))}function Nh(t,e){t.qa&&vn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&fn(e,"languageCodeChanged",t.Pa)}function Oh(t,e){t.$&&vn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&fn(e,"emulatorConfigChanged",t.Ba)}function Ch(t,e){t.aa=e,fs(t.a,rt.SDK_VERSION?Dr(rt.SDK_VERSION,t.aa):null)}function Dh(t,e){t.ja&&vn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&fn(e,"frameworkChanged",t.Oa)}function Rh(t){try{return rt.app(t.m).auth()}catch(e){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function xh(t){t.J||t.D.b||(t.D.start(),vn(t,"tokenChanged",t.ba),fn(t,"tokenChanged",t.ba))}function Ph(t){vn(t,"tokenChanged",t.ba),t.D.stop()}function Lh(t,e){t.Aa=e,ti(t,"_lat",e)}function Mh(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return xe(e).then((function(){return t}))}function Uh(t){t.b&&!t.P&&(t.P=!0,Vc(t.b,t))}function Fh(t,e){ei(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Eh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function jh(){}function Vh(t){return Ce().then((function(){if(t.J)throw new A("app-deleted")}))}function qh(t){return z(t.providerData,(function(t){return t.providerId}))}function Bh(t,e){e&&(Kh(t,e.providerId),t.providerData.push(e))}function Kh(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Gh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&ti(t,e,n)}function Hh(t,e){t!=e&&(ei(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?ti(t,"metadata",function(t){return new Eh(t.a,t.b)}(e.metadata)):ti(t,"metadata",new Eh),G(e.providerData,(function(e){Bh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),ti(t,"refreshToken",t.h.a),mh(t.S,e.S.b))}function zh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return cu(t.a,Vs,{idToken:e}).then(_(t.Kc,t))}(t,e).then((function(){return n||Gh(t,"isAnonymous",!1),e}))}))}function Wh(t,e){e[is]&&t.Aa!=e[is]&&(Ih(t.h,e),t.dispatchEvent(new vh("tokenChanged")),Lh(t,e[is]),Gh(t,"refreshToken",t.h.a))}function Qh(t,e){return zh(t).then((function(){if(Q(qh(t),e))return Mh(t).then((function(){throw new A("provider-already-linked")}))}))}function Xh(t,e,n){return ni({user:t,credential:Ko(e),additionalUserInfo:e=to(e),operationType:n})}function Yh(t,e){return Wh(t,e),t.reload().then((function(){return t}))}function Jh(t,e,n,r,i){if(!Mr())return De(new A("operation-not-supported-in-this-environment"));if(t.i&&!i)return De(t.i);var o=Zi(n.providerId),a=Kr(t.uid+":::"),s=null;(!jr()||Tr())&&t.s&&n.isOAuthProvider&&(s=Eu(t.s,t.l,t.m,e,n,null,a,rt.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=yr(s,o&&o.va,o&&o.ua);return r=r().then((function(){if(Zh(t),!i)return t.I().then((function(){}))})).then((function(){return Gc(t.b,u,e,n,a,!!s,t.tenantId)})).then((function(){return new Te((function(n,r){t.na(e,null,new A("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Wc(t.b,t,e,u,a)}))})).then((function(t){return u&&mr(u),t?ni(t):null})).o((function(t){throw u&&mr(u),t})),tl(t,r,i)}function $h(t,e,n,r,i){if(!Mr())return De(new A("operation-not-supported-in-this-environment"));if(t.i&&!i)return De(t.i);var o=null,a=Kr(t.uid+":::");return r=r().then((function(){if(Zh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Mh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(rl,t.w(),e.a)),e})).then((function(){return zc(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return il(t.ha);throw o})).then((function(){if(o)throw o})),tl(t,r,i)}function Zh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new A("internal-error");throw new A("auth-domain-config-required")}}function tl(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),De(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new vh("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){X(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=lh(e.w(),Rh(t),_(t.jc,t))),n||e}))}function el(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[is]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Ah(e,n,t);return t.providerData&&G(t.providerData,(function(t){t&&Bh(i,ni(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function nl(t){this.a=t,this.b=sc()}sh.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=mt(e.f);return delete n[uh],delete n[ch],bt(n,t),e.g(n)}))},E(hh,A),fh.prototype.tb=function(t,e,n){return e.type==lo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),bt(n,{phoneVerificationInfo:Vo(t.a)}),cu(e,Fs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return bt(n={mfaPendingCredential:n},{phoneVerificationInfo:Vo(t.a)}),cu(e,js,n)}))}(this,t,e)},E(ph,fh),E(dh,ph),E(vh,Ze),(t=gh.prototype).yc=function(t){mh(this,function(t){var e=[];return G(t.mfaInfo||[],(function(t){(t=oi(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new ho(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Wh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return cu(r,uu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return mh(e,r),Wh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(t){return t.w()}))}}},yh.prototype.start=function(){this.a=this.c,bh(this,!0)},yh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},wh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},wh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?De(new A("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?Th(this,{grant_type:"refresh_token",refresh_token:this.a}):Ce(null):Ce({accessToken:this.b.toString(),refreshToken:this.a})},Eh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(Ah,En),Ah.prototype.xa=function(t){this.za=t,cs(this.a,t)},Ah.prototype.la=function(){return this.za},Ah.prototype.Ga=function(){return $(this.aa)},Ah.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},ti(Ah.prototype,"providerId","firebase"),(t=Ah.prototype).reload=function(){var t=this;return tl(this,Vh(this).then((function(){return zh(t).then((function(){return Mh(t)})).then(jh)})))},t.oc=function(t){return this.I(t).then((function(t){return new ah(t)}))},t.I=function(t){var e=this;return tl(this,Vh(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.Aa&&(Lh(e,t.accessToken),e.dispatchEvent(new vh("tokenChanged"))),Gh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");Fh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new Sh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Bh(this,e[n]);Gh(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new vh("userReloaded",{hd:t}))},t.Lc=function(t){return $r("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return tl(this,t.c(this.a,this.uid).then((function(t){return Wh(e,t),n=Xh(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return $r("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return tl(this,Qh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Xh(e,t,"link"),Yh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return tl(this,Qh(this,"phone").then((function(){return oh(Rh(n),t,e,_(n.rb,n))})))},t.Mc=function(t,e){var n=this;return tl(this,Ce().then((function(){return oh(Rh(n),t,e,_(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return tl(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Wh(e,t),e.reload()})))},t.ed=function(t){var e=this;return tl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Wh(e,t),e.reload()})))},t.Db=function(t){var e=this;return tl(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Wh(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Vh(this);var e=this;return tl(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Wh(e,t),Gh(e,"displayName",t.displayName||null),Gh(e,"photoURL",t.photoUrl||null),G(e.providerData,(function(t){"password"===t.providerId&&(ti(t,"displayName",e.displayName),ti(t,"photoURL",e.photoURL))})),Mh(e)})).then(jh))},t.cd=function(t){var e=this;return tl(this,zh(this).then((function(n){return Q(qh(e),t)?function(t,e,n){return cu(t,Ls,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return G(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),G(qh(e),(function(t){n[t]||Kh(e,t)})),n[qo.PROVIDER_ID]||ti(e,"phoneNumber",null),Mh(e)})):Mh(e).then((function(){throw new A("no-such-provider")}))})))},t.delete=function(){var t=this;return tl(this,this.I().then((function(e){return cu(t.a,Ps,{idToken:e})})).then((function(){t.dispatchEvent(new vh("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Nh(t,null),Oh(t,null),Dh(t,null),t.N=[],t.J=!0,Ph(t),ti(t,"refreshToken",null),t.b&&qc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Mb,this):null},t.Ec=function(t){var e=this;return Jh(this,"linkViaPopup",t,(function(){return Qh(e,t.providerId).then((function(){return Mh(e)}))}),!1)},t.Nc=function(t){return Jh(this,"reauthViaPopup",t,(function(){return Ce()}),!0)},t.Fc=function(t){var e=this;return $h(this,"linkViaRedirect",t,(function(){return Qh(e,t.providerId)}),!1)},t.Oc=function(t){return $h(this,"reauthViaRedirect",t,(function(){return Ce()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return tl(this,this.I().then((function(n){return ks(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Xh(i,t,"link"),Yh(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return tl(this,Ce().then((function(){return vo(Ns(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Xh(i,t,"reauthenticate"),Wh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return tl(this,this.I().then((function(e){return n=e,"undefined"===typeof t||gt(t)?{}:Gi(new Pi(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return tl(this,this.I().then((function(t){return r=t,"undefined"===typeof e||gt(e)?{}:Gi(new Pi(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return tl(this,t=vo(Ce(t),n.uid).then((function(t){return e=Xh(n,t,"reauthenticate"),Wh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&bt(t,this.metadata.w()),G(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),bt(t,this.S.w()),t};var rl={name:"redirectUser",F:"session"};function il(t){return hc(t.b,rl,t.a)}function ol(t){this.a=t,this.b=sc(),this.c=null,this.f=function(t){var e=ul("local"),n=ul("session"),r=ul("none");return function(t,e,n){var r=cc(e,n),i=uc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Br(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(sl,t.a).then((function(t){return t?ul(t):e}))}))}))})).then((function(e){return t.c=e,al(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(ul("local"),this.a,_(this.g,this))}function al(t,e){var n,r=[];for(n in oc)oc[n]!==e&&r.push(hc(t.b,ul(oc[n]),t.a));return r.push(hc(t.b,sl,t.a)),function(t){return new Te((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Re(t[s],I(o,s),a);else e(i)}))}(r)}ol.prototype.g=function(){var t=this,e=ul("local");fl(this,(function(){return Ce().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return al(t,"local").then((function(){t.c=e}))}))}))};var sl={name:"persistence",F:"session"};function ul(t){return{name:"authUser",F:t}}function cl(t,e){return fl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function hl(t){return fl(t,(function(){return hc(t.b,t.c,t.a)}))}function ll(t,e,n){return fl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),el(t||{})}))}))}function fl(t,e){return t.f=t.f.then(e,e),t.f}function pl(t){if(this.l=!1,ti(this,"settings",new rh),ti(this,"app",t),!Il(this).options||!Il(this).options.apiKey)throw new A("invalid-api-key");t=rt.SDK_VERSION?Dr(rt.SDK_VERSION):null,this.a=new ns(Il(this).options&&Il(this).options.apiKey,R(N),t),this.P=[],this.s=[],this.N=[],this.Pa=rt.INTERNAL.createSubscribe(_(this.zc,this)),this.W=void 0,this.ib=rt.INTERNAL.createSubscribe(_(this.Ac,this)),wl(this,null),this.i=new ol(Il(this).options.apiKey+":"+Il(this).name),this.D=new nl(Il(this).options.apiKey+":"+Il(this).name),this.$=Al(this,function(t){var e=Il(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(rl,t.a).then((function(t){return t&&e&&(t.authDomain=e),el(t||{})}))}(t.D,Il(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),il(t.D)}));return Al(t,e)}(t).then((function(){return ll(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return cl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:hl(t.i)}))):null})).then((function(e){wl(t,e||null)}));return Al(t,n)}(this)),this.h=Al(this,function(t){return t.$.then((function(){return yl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(ul("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.qa=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(t){var e=Il(t).options.authDomain,n=Il(t).options.apiKey;e&&Mr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Yc(e,n,Il(t).name,t.R),Vc(t.b,t),Tl(t)&&Uh(Tl(t)),t.m){Uh(t.m);var r=t.m;r.xa(t.la()),Nh(r,t),Ch(r=t.m,t.J),Dh(r,t),kh(r=t.m,t.R),Oh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,En.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Bn(this.R.url);t=ni({protocol:t.c,host:t.a,port:t.g,options:ni({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function dl(t){Ze.call(this,"languageCodeChanged"),this.h=t}function vl(t){Ze.call(this,"emulatorConfigChanged"),this.c=t}function gl(t){Ze.call(this,"frameworkChanged"),this.f=t}function ml(t){return t.Oa||De(new A("auth-domain-config-required"))}function yl(t){if(!Mr())return De(new A("operation-not-supported-in-this-environment"));var e=ml(t).then((function(){return t.b.ra()})).then((function(t){return t?ni(t):null}));return Al(t,e)}function bl(t,e){var n={};return n.apiKey=Il(t).options.apiKey,n.authDomain=Il(t).options.authDomain,n.appName=Il(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new Ah(t,e);return n&&(i.ha=n),r&&Ch(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return Tl(t)&&e.uid==Tl(t).uid?(Hh(Tl(t),e),t.da(e)):(wl(t,e),Uh(e),t.da(e))})).then((function(){Sl(t)}))}function wl(t,e){Tl(t)&&(function(t,e){Y(t.W,(function(t){return t==e}))}(Tl(t),t.Ba),vn(Tl(t),"tokenChanged",t.qa),vn(Tl(t),"userDeleted",t.za),vn(Tl(t),"userInvalidated",t.Aa),Ph(Tl(t))),e&&(e.W.push(t.Ba),fn(e,"tokenChanged",t.qa),fn(e,"userDeleted",t.za),fn(e,"userInvalidated",t.Aa),0<t.u&&xh(e)),ti(t,"currentUser",e),e&&(e.xa(t.la()),Nh(e,t),Ch(e,t.J),Dh(e,t),kh(e,t.R),Oh(e,t))}function _l(t,e){var n=null,r=null;return Al(t,e.then((function(e){return n=Ko(e),r=to(e),bl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=lh(e.w(),t,_(t.kc,t))),n||e})).then((function(){return ni({user:Tl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Il(t){return t.app}function Tl(t){return t.currentUser}function El(t){return Tl(t)&&Tl(t)._lat||null}function Sl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](El(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](El(t))}}function Al(t,e){return t.P.push(e),e.oa((function(){X(t.P,e)})),e}function kl(){}function Nl(){this.a={},this.b=1e12}ol.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in oc)if(oc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(Sr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Fu()&&"none"!==t)throw n;break;default:if(!Lr()&&"none"!==t)throw n}}(t),fl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,al(n,t)})).then((function(){if(n.c=ul(t),e)return n.b.set(n.c,e,n.a)})):Ce()}))},E(pl,En),E(dl,Ze),E(vl,Ze),E(gl,Ze),(t=pl.prototype).yb=function(t){return Al(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,cs(this.a,this.aa),this.dispatchEvent(new dl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&_r().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,hs(this.a,this.R),this.dispatchEvent(new vl(this.R))}},t.Gc=function(t){this.J.push(t),fs(this.a,rt.SDK_VERSION?Dr(rt.SDK_VERSION,this.J):null),this.dispatchEvent(new gl(this.J))},t.Ga=function(){return $(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:Il(this).options.apiKey,authDomain:Il(this).options.authDomain,appName:Il(this).name,currentUser:Tl(this)&&Tl(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return _l(i,As(i.a,o))}))},t.Xc=function(t){if(!Mr())return De(new A("operation-not-supported-in-this-environment"));var e=this,n=Zi(t.providerId),r=Kr(),i=null;(!jr()||Tr())&&Il(this).options.authDomain&&t.isOAuthProvider&&(i=Eu(Il(this).options.authDomain,Il(this).options.apiKey,Il(this).name,"signInViaPopup",t,null,r,rt.SDK_VERSION||null,null,null,this.T(),this.R));var o=yr(i,n&&n.va,n&&n.ua);return Al(this,n=ml(this).then((function(n){return Gc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Te((function(t,n){e.na("signInViaPopup",null,new A("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Wc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&mr(o),t?ni(t):null})).o((function(t){throw o&&mr(o),t})))},t.Yc=function(t){if(!Mr())return De(new A("operation-not-supported-in-this-environment"));var e=this,n=ml(this).then((function(){return function(t){return fl(t,(function(){return t.b.set(sl,t.c.F,t.a)}))}(e.i)})).then((function(){return zc(e.b,"signInViaRedirect",t,void 0,e.T())}));return Al(this,n)},t.ra=function(){var t=this;return yl(this).then((function(e){return t.b&&Zc(t.b.b),e})).o((function(e){throw t.b&&Zc(t.b.b),e}))},t.dd=function(t){if(!t)return De(new A("null-user"));if(this.S!=t.tenantId)return De(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=Il(this).options.apiKey,n.authDomain=Il(this).options.authDomain,n.appName=Il(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[is]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new Ah(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Ch(e,r),Hh(e,t),e}(t,n,e.D,e.Ga());return Al(this,this.h.then((function(){if(Il(e).options.apiKey!=t.l)return r.reload()})).then((function(){return Tl(e)&&t.uid==Tl(e).uid?(Hh(Tl(e),t),e.da(t)):(wl(e,r),Uh(r),e.da(r))})).then((function(){Sl(e)})))},t.Bb=function(){var t=this;return Al(this,this.h.then((function(){return t.b&&Zc(t.b.b),Tl(t)?(wl(t,null),hl(t.i).then((function(){Sl(t)}))):Ce()})))},t.Zc=function(){var t=this;return ll(this.i,Il(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=Tl(t)&&e){n=Tl(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Hh(Tl(t),e),Tl(t).I();(Tl(t)||e)&&(wl(t,e),e&&(Uh(e),e.ha=t.D),t.b&&Vc(t.b,t),Sl(t))}}))},t.da=function(t){return cl(this.i,t)},t.mc=function(){Sl(this),this.da(Tl(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return _l(e,Ce(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Tl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),Al(t,t.h.then((function(){!t.l&&Q(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(El(t)))})))}(this,(function(){t.next(Tl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(Tl(r)):"function"===typeof t.next&&t.next(Tl(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof t?t(Tl(r)):"function"===typeof t.next&&t.next(Tl(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return Al(this,this.h.then((function(){return Tl(e)?Tl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return _l(e,cu(e.a,ru,{token:t}))})).then((function(t){var n=t.user;return Gh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return _l(n,cu(n.a,iu,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return _l(n,cu(n.a,Rs,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return _l(e,t.ka(e.a))}))},t.Sc=function(t){return $r("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=Tl(t);if(e&&e.isAnonymous){var n=ni({providerId:null,isNewUser:!1});return ni({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return _l(t,t.a.Ab()).then((function(e){var n=e.user;return Gh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return Tl(this)&&Tl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&Tl(this)&&xh(Tl(this))},t.Pc=function(t){var e=this;G(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&Tl(this)&&Ph(Tl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),Al(this,this.h.then((function(){e.l||Q(e.s,t)&&t(El(e))})))},t.removeAuthTokenListener=function(t){Y(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(ul("local"),t.a,this.ja),this.b&&(qc(this.b,this),Zc(this.b.b)),Promise.resolve()},t.hc=function(t){return Al(this,function(t,e){return cu(t,xs,{identifier:e,continueUri:Ur()?pr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Uo(t)},t.xb=function(t,e){var n=this;return Al(this,Ce().then((function(){var t=new Pi(e);if(!t.c)throw new A("argument-error",Ui+" must be true when sending sign in link to email");return Gi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return Al(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return Al(this,this.a.Sa(t).then((function(t){return new li(t)})))},t.kb=function(t){return Al(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return Al(this,Ce().then((function(){return"undefined"===typeof e||gt(e)?{}:Gi(new Pi(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return Al(this,oh(this,t,e,_(this.ab,this)))},t.Vc=function(t,e){var n=this;return Al(this,Ce().then((function(){var r=e||pr(),i=Mo(t,r);if(!(r=Uo(r)))throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new A("tenant-id-mismatch");return n.ab(i)})))},kl.prototype.render=function(){},kl.prototype.reset=function(){},kl.prototype.getResponse=function(){},kl.prototype.execute=function(){};var Ol=null;function Cl(t,e){return(e=Dl(e))&&t.a[e]||null}function Dl(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function Rl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=le(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():fn(this.f,"click",this.i)}function xl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Pl(){}function Ll(){}Nl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Rl(t,e),this.b++},Nl.prototype.reset=function(t){var e=Cl(this,t);t=Dl(t),e&&t&&(e.delete(),delete this.a[t])},Nl.prototype.getResponse=function(t){return(t=Cl(this,t))?t.getResponse():null},Nl.prototype.execute=function(t){(t=Cl(this,t))&&t.execute()},Rl.prototype.getResponse=function(){return xl(this),this.b},Rl.prototype.execute=function(){xl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Rl.prototype.delete=function(){xl(this),this.g=!0,clearTimeout(this.a),this.a=null,vn(this.f,"click",this.i)},ti(Pl,"FACTOR_ID","phone"),Ll.prototype.g=function(){return Ol||(Ol=new Nl),Ce(Ol)},Ll.prototype.c=function(){};var Ml=null;function Ul(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Fl=new _t(St,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),jl=new zr(3e4,6e4);Ul.prototype.g=function(t){var e=this;return new Te((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),jl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete s[e.a]},Ce(Xa(Ot(Fl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Ul.prototype.c=function(){this.b--};var Vl=null;function ql(t,e,n,r,i,o,a){if(ti(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Ml||(Ml=new Ll),a=Ml):(Vl||(Vl=new Ul),a=Vl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Gl])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Hl],!s.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!le(e)||!this.i&&le(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ns(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Bl];this.a[Bl]=function(t){if(zl(u,t),"function"===typeof c)c(t);else if("string"===typeof c){var e=xr(c,s);"function"===typeof e&&e(t)}};var h=this.a[Kl];this.a[Kl]=function(){if(zl(u,null),"function"===typeof h)h();else if("string"===typeof h){var t=xr(h,s);"function"===typeof t&&t()}}}var Bl="callback",Kl="expired-callback",Gl="sitekey",Hl="size";function zl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Wl(t,e){return t.h.push(e),e.oa((function(){X(t.h,e)})),e}function Ql(t){if(t.J)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Xl(t,e,n){var r=!1;try{this.b=n||rt.app()}catch(a){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=rt.SDK_VERSION?Dr(rt.SDK_VERSION,o):null,ql.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,R(N),r)}function Yl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Jl.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=Jl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}(t=ql.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Wl(this,Ce().then((function(){if(Ur()&&!Er())return _r();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,cu(t.s,zs,{})})).then((function(e){t.a[Gl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Ql(this);var t=this;return Wl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=le(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!he&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',zt(a.name),'"'),a.type){o.push(' type="',zt(a.type),'"');var s={};bt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=me(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):fe(o,a)),2<r.length&&ge(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Ql(this);var t=this;return Wl(this,this.render().then((function(e){return new Te((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Ql(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ql(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=le(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},E(Xl,ql);var Jl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function $l(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function Zl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function tf(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function ef(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function nf(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function rf(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function of(t,e){return v(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function af(t){return v(t)&&"string"===typeof t.uid}function sf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function uf(t,e){for(var n in e){var r=e[n].name;t[r]=lf(r,t[n],e[n].j)}}function cf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:I((function(t){return this[t]}),n),set:I((function(t,e,n,r){Yl(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function hf(t,e,n,r){t[e]=lf(e,n,r)}function lf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Yl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}uf(pl.prototype,{kb:{name:"applyActionCode",j:[$l("code")]},Sa:{name:"checkActionCode",j:[$l("code")]},ob:{name:"confirmPasswordReset",j:[$l("code"),$l("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[$l("email"),$l("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[$l("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[$l("emailLink")]},Hc:{name:"onAuthStateChanged",j:[sf(tf(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[sf(tf(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[$l("email"),sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[$l("email"),tf("actionCodeSettings")]},yb:{name:"setPersistence",j:[$l("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[rf()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[rf()]},Tc:{name:"signInWithCustomToken",j:[$l("token")]},Uc:{name:"signInWithEmailAndPassword",j:[$l("email"),$l("password")]},Vc:{name:"signInWithEmailLink",j:[$l("email"),$l("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[sf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof Ah)}},nf(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[$l(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[$l("url"),tf("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[$l("code")]}}),cf(pl.prototype,{lc:{name:"languageCode",lb:sf($l(),nf(),"languageCode")},ti:{name:"tenantId",lb:sf($l(),nf(),"tenantId")}}),pl.Persistence=oc,pl.Persistence.LOCAL="local",pl.Persistence.SESSION="session",pl.Persistence.NONE="none",uf(Ah.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Zl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Zl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[rf()]},rb:{name:"linkWithCredential",j:[rf()]},Dc:{name:"linkWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[rf()]},ub:{name:"reauthenticateWithCredential",j:[rf()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[$l(null,!0)]},cd:{name:"unlink",j:[$l("provider")]},Cb:{name:"updateEmail",j:[$l("email")]},Db:{name:"updatePassword",j:[$l("password")]},ed:{name:"updatePhoneNumber",j:[rf("phone")]},Eb:{name:"updateProfile",j:[tf("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[$l("email"),sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]}}),uf(Nl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uf(kl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uf(Te.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),cf(rh.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Zl("appVerificationDisabledForTesting")}}),uf(ih.prototype,{confirm:{name:"confirm",j:[$l("verificationCode")]}}),hf(po,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[_o,Po,jo,yo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[sf($l(),tf(),"json")]),hf(Lo,"credential",(function(t,e){return new xo(t,e)}),[$l("email"),$l("password")]),uf(xo.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),uf(So.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(So,"credential",Ao,[sf($l(),tf(),"token")]),hf(Lo,"credentialWithLink",Mo,[$l("email"),$l("emailLink")]),uf(ko.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(ko,"credential",No,[sf($l(),tf(),"token")]),uf(Oo.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Oo,"credential",Co,[sf($l(),sf(tf(),nf()),"idToken"),sf($l(),nf(),"accessToken",!0)]),uf(Do.prototype,{Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Do,"credential",Ro,[sf($l(),tf(),"token"),$l("secret",!0)]),uf(Eo.prototype,{Ca:{name:"addScope",j:[$l("scope")]},credential:{name:"credential",j:[sf($l(),sf(tf(),nf()),"optionsOrIdToken"),sf($l(),nf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),uf(bo.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),uf(go.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),hf(qo,"credential",Bo,[$l("verificationId"),$l("verificationCode")]),uf(qo.prototype,{gb:{name:"verifyPhoneNumber",j:[sf($l(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?of(t.session,lo)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?of(t.session,fo)&&af(t.multiFactorHint):t.session&&t.multiFactorUid?of(t.session,fo)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]}}),uf(Fo.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),uf(A.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),uf(Jo.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),uf(Yo.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),uf(hh.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),uf(sh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),uf(gh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},$l("displayName",!0)]},bd:{name:"unenroll",j:[sf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:af},$l(),"multiFactorInfoIdentifier")]}}),uf(Xl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),hf(Si,"parseLink",xi,[$l("link")]),hf(Pl,"assertion",(function(t){return new dh(t)}),[rf("phone")]),function(){if("undefined"===typeof rt||!rt.INTERNAL||!rt.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:pi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:fi,VERIFY_AND_CHANGE_EMAIL:di,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:pl,AuthCredential:po,Error:A};hf(t,"EmailAuthProvider",Lo,[]),hf(t,"FacebookAuthProvider",So,[]),hf(t,"GithubAuthProvider",ko,[]),hf(t,"GoogleAuthProvider",Oo,[]),hf(t,"TwitterAuthProvider",Do,[]),hf(t,"OAuthProvider",Eo,[$l("providerId")]),hf(t,"SAMLAuthProvider",To,[$l("providerId")]),hf(t,"PhoneAuthProvider",qo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof pl)}}]),hf(t,"RecaptchaVerifier",Xl,[sf($l(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),tf("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof rt.app.App)}}]),hf(t,"ActionCodeURL",Si,[]),hf(t,"PhoneMultiFactorGenerator",Pl,[]),rt.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new pl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),rt.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.nc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),rt.registerVersion("@firebase/auth","0.16.8"),rt.INTERNAL.extendNamespace({User:Ah})}()}.apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ot=function(t,e){return ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},ot(t,e)};function at(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var st,ut="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ct=ct||{},ht=ut||self;function lt(){}function ft(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function pt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var dt="closure_uid_"+(1e9*Math.random()>>>0),vt=0;function gt(t,e,n){return t.call.apply(t.bind,arguments)}function mt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function yt(t,e,n){return(yt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gt:mt).apply(null,arguments)}function bt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function wt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function _t(){this.s=this.s,this.o=this.o}var It={};_t.prototype.s=!1,_t.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,dt)&&t[dt]||(t[dt]=++vt)}(this);delete It[t]}},_t.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Tt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Et=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function St(t){return Array.prototype.concat.apply([],arguments)}function At(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function kt(t){return/^[\s\xa0]*$/.test(t)}var Nt,Ot=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ct(t,e){return-1!=t.indexOf(e)}function Dt(t,e){return t<e?-1:t>e?1:0}t:{var Rt=ht.navigator;if(Rt){var xt=Rt.userAgent;if(xt){Nt=xt;break t}}Nt=""}function Pt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Lt(t){var e={};for(var n in t)e[n]=t[n];return e}var Mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ut(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Mt.length;o++)n=Mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ft(t){return Ft[" "](t),t}Ft[" "]=lt;var jt,Vt=Ct(Nt,"Opera"),qt=Ct(Nt,"Trident")||Ct(Nt,"MSIE"),Bt=Ct(Nt,"Edge"),Kt=Bt||qt,Gt=Ct(Nt,"Gecko")&&!(Ct(Nt.toLowerCase(),"webkit")&&!Ct(Nt,"Edge"))&&!(Ct(Nt,"Trident")||Ct(Nt,"MSIE"))&&!Ct(Nt,"Edge"),Ht=Ct(Nt.toLowerCase(),"webkit")&&!Ct(Nt,"Edge");function zt(){var t=ht.document;return t?t.documentMode:void 0}t:{var Wt="",Qt=function(){var t=Nt;return Gt?/rv:([^\);]+)(\)|;)/.exec(t):Bt?/Edge\/([\d\.]+)/.exec(t):qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Ht?/WebKit\/(\S+)/.exec(t):Vt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Qt&&(Wt=Qt?Qt[1]:""),qt){var Xt=zt();if(null!=Xt&&Xt>parseFloat(Wt)){jt=String(Xt);break t}}jt=Wt}var Yt,Jt={};function $t(){return function(t){var e=Jt;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=Ot(String(jt)).split("."),n=Ot("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=Dt(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||Dt(0==o[2].length,0==a[2].length)||Dt(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}))}if(ht.document&&qt){var Zt=zt();Yt=Zt||(parseInt(jt,10)||void 0)}else Yt=void 0;var te=Yt,ee=function(){if(!ht.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ht.addEventListener("test",lt,e),ht.removeEventListener("test",lt,e)}catch(n){}return t}();function ne(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function re(t,e){if(ne.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Gt){t:{try{Ft(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:ie[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&re.Z.h.call(this)}}ne.prototype.h=function(){this.defaultPrevented=!0},wt(re,ne);var ie={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),ae=0;function se(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++ae,this.ca=this.fa=!1}function ue(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ce(t){this.src=t,this.g={},this.h=0}function he(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Tt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ue(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function le(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}ce.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=le(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new se(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var fe="closure_lm_"+(1e6*Math.random()|0),pe={};function de(t,e,n,r,i){if(r&&r.once)return ge(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)de(t,e[o],n,r,i);return null}return n=Te(n),t&&t[oe]?t.N(e,n,pt(r)?!!r.capture:!!r,i):ve(t,e,n,!1,r,i)}function ve(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=pt(i)?!!i.capture:!!i,s=_e(t);if(s||(t[fe]=s=new ce(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=we;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ee||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(be(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ge(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ge(t,e[o],n,r,i);return null}return n=Te(n),t&&t[oe]?t.O(e,n,pt(r)?!!r.capture:!!r,i):ve(t,e,n,!0,r,i)}function me(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)me(t,e[o],n,r,i);else r=pt(r)?!!r.capture:!!r,n=Te(n),t&&t[oe]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=le(o=t.g[e],n,r,i))&&(ue(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=_e(t))&&(e=t.g[e.toString()],t=-1,e&&(t=le(e,n,r,i)),(n=-1<t?e[t]:null)&&ye(n))}function ye(t){if("number"!==typeof t&&t&&!t.ca){var e=t.src;if(e&&e[oe])he(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(be(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_e(e))?(he(n,t),0==n.h&&(n.src=null,e[fe]=null)):ue(t)}}}function be(t){return t in pe?pe[t]:pe[t]="on"+t}function we(t,e){if(t.ca)t=!0;else{e=new re(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&ye(t),t=n.call(r,e)}return t}function _e(t){return(t=t[fe])instanceof ce?t:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function Te(t){return"function"===typeof t?t:(t[Ie]||(t[Ie]=function(e){return t.handleEvent(e)}),t[Ie])}function Ee(){_t.call(this),this.i=new ce(this),this.P=this,this.I=null}function Se(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"===typeof e)e=new ne(e,t);else if(e instanceof ne)e.target=e.target||t;else{var i=e;Ut(e=new ne(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=Ae(a,r,!0,e)&&i}if(i=Ae(a=e.g=t,r,!0,e)&&i,i=Ae(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ae(a=e.g=n[o],r,!1,e)&&i}function Ae(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&he(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}wt(Ee,_t),Ee.prototype[oe]=!0,Ee.prototype.removeEventListener=function(t,e,n,r){me(this,t,e,n,r)},Ee.prototype.M=function(){if(Ee.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ue(n[r]);delete e.g[t],e.h--}}this.I=null},Ee.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Ee.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var ke=ht.JSON.stringify;function Ne(){var t=Me,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Oe,Ce=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=De.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),De=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Re}),(function(t){return t.reset()})),Re=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function xe(t){ht.setTimeout((function(){throw t}),0)}function Pe(t,e){Oe||function(){var t=ht.Promise.resolve(void 0);Oe=function(){t.then(Ue)}}(),Le||(Oe(),Le=!0),Me.add(t,e)}var Le=!1,Me=new Ce;function Ue(){for(var t;t=Ne();){try{t.h.call(t.g)}catch(n){xe(n)}var e=De;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Le=!1}function Fe(t,e){Ee.call(this),this.h=t||1,this.g=e||ht,this.j=yt(this.kb,this),this.l=Date.now()}function je(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Ve(t,e,n){if("function"===typeof t)n&&(t=yt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=yt(t.handleEvent,t)}return 2147483647<Number(e)?-1:ht.setTimeout(t,e||0)}function qe(t){t.g=Ve((function(){t.g=null,t.i&&(t.i=!1,qe(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}wt(Fe,Ee),(st=Fe.prototype).da=!1,st.S=null,st.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Se(this,"tick"),this.da&&(je(this),this.start()))}},st.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.M=function(){Fe.Z.M.call(this),je(this),delete this.g};var Be=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ot(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:qe(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(_t);function Ke(t){_t.call(this),this.h=t,this.g={}}wt(Ke,_t);var Ge=[];function He(t,e,n,r){Array.isArray(n)||(n&&(Ge[0]=n.toString()),n=Ge);for(var i=0;i<n.length;i++){var o=de(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function ze(t){Pt(t.g,(function(t,e){this.g.hasOwnProperty(e)&&ye(t)}),t),t.g={}}function We(){this.g=!0}function Qe(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return ke(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}Ke.prototype.M=function(){Ke.Z.M.call(this),ze(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},We.prototype.Aa=function(){this.g=!1},We.prototype.info=function(){};var Xe={},Ye=null;function Je(){return Ye=Ye||new Ee}function $e(t){ne.call(this,Xe.Ma,t)}function Ze(t){var e=Je();Se(e,new $e(e,t))}function tn(t,e){ne.call(this,Xe.STAT_EVENT,t),this.stat=e}function en(t){var e=Je();Se(e,new tn(e,t))}function nn(t,e){ne.call(this,Xe.Na,t),this.size=e}function rn(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return ht.setTimeout((function(){t()}),e)}Xe.Ma="serverreachability",wt($e,ne),Xe.STAT_EVENT="statevent",wt(tn,ne),Xe.Na="timingevent",wt(nn,ne);var on={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},an={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function sn(){}function un(t){return t.h||(t.h=t.i())}function cn(){}sn.prototype.h=null;var hn,ln={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function fn(){ne.call(this,"d")}function pn(){ne.call(this,"c")}function dn(){}function vn(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Ke(this),this.P=mn,t=Kt?125:void 0,this.W=new Fe(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new gn}function gn(){this.i=null,this.g="",this.h=!1}wt(fn,ne),wt(pn,ne),wt(dn,sn),dn.prototype.g=function(){return new XMLHttpRequest},dn.prototype.i=function(){return{}},hn=new dn;var mn=45e3,yn={},bn={};function wn(t,e,n){t.K=1,t.v=Kn(Un(e)),t.s=n,t.U=!0,_n(t,null)}function _n(t,e){t.F=Date.now(),Sn(t),t.A=Un(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),nr(n.h,"t",r),t.C=0,n=t.l.H,t.h=new gn,t.g=ii(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Be(yt(t.Ia,t,t.g),t.O)),He(t.V,t.g,"readystatechange",t.gb),e=t.H?Lt(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ze(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function In(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Tn(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=En(t,n))==bn){4==e&&(t.o=4,en(14),i=!1),Qe(t.j,t.m,null,"[Incomplete Response]");break}if(r==yn){t.o=4,en(15),Qe(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Qe(t.j,t.m,r,null),Cn(t,r)}In(t)&&r!=bn&&r!=yn&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,en(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Yr(e),e.L=!0,en(11))):(Qe(t.j,t.m,n,"[Invalid Chunked Response]"),On(t),Nn(t))}function En(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?bn:(n=Number(e.substring(n,r)),isNaN(n)?yn:(r+=1)+n>e.length?bn:(e=e.substr(r,n),t.C=r+n,e))}function Sn(t){t.Y=Date.now()+t.P,An(t,t.P)}function An(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=rn(yt(t.eb,t),e)}function kn(t){t.B&&(ht.clearTimeout(t.B),t.B=null)}function Nn(t){0==t.l.G||t.I||Zr(t.l,t)}function On(t){kn(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,je(t.W),ze(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Cn(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||hr(n.i,t)))if(n.I=t.N,!t.J&&hr(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;$r(n),qr(n)}Xr(n),en(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=rn(yt(n.ab,n),6e3));if(1>=cr(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else ei(n,11)}else if((t.J||n.g==t)&&$r(n),!kt(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(Ct(h,"spdy")||Ct(h,"quic")||Ct(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(lr(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Bn(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=ri(r,r.H?r.la:null,r.W),p.J){fr(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(kn(d),Sn(d)),r.g=p}else Qr(r);0<n.l.length&&Gr(n)}else"stop"!=o[0]&&"close"!=o[0]||ei(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?ei(n,7):Vr(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Ze(4)}catch(o){}}function Dn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ft(t)||"string"===typeof t)Et(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(ft(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"===typeof t)return t.split("");if(ft(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Rn(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Rn)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xn(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Pn(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Pn(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(st=vn.prototype).setTimeout=function(t){this.P=t},st.gb=function(t){t=t.target;var e=this.L;e&&3==Lr(t)?e.l():this.Ia(t)},st.Ia=function(t){try{if(t==this.g)t:{var e=Lr(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Kt||this.g&&(this.h.h||this.g.ga()||Mr(this.g)))){this.I||4!=e||7==n||Ze(8==n||0>=r?3:2),kn(this);var i=this.g.ba();this.N=i;e:if(In(this)){var o=Mr(this.g);t="";var a=o.length,s=4==Lr(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){On(this),Nn(this);var u="";break e}this.h.i=new ht.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kt(c)){var l=c;break e}}l=null}if(!(i=l)){this.i=!1,this.o=3,en(12),On(this),Nn(this);break t}Qe(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Cn(this,i)}this.U?(Tn(this,e,u),Kt&&this.i&&3==e&&(He(this.V,this.W,"tick",this.fb),this.W.start())):(Qe(this.j,this.m,u,null),Cn(this,u)),4==e&&On(this),this.i&&!this.I&&(4==e?Zr(this.l,this):(this.i=!1,Sn(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,en(12)):(this.o=0,en(13)),On(this),Nn(this)}}}catch(e){}},st.fb=function(){if(this.g){var t=Lr(this.g),e=this.g.ga();this.C<e.length&&(kn(this),Tn(this,t,e),this.i&&4!=t&&Sn(this))}},st.cancel=function(){this.I=!0,On(this)},st.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Ze(3),en(17)),On(this),this.o=2,Nn(this)):An(this,this.Y-t)},(st=Rn.prototype).R=function(){xn(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},st.T=function(){return xn(this),this.g.concat()},st.get=function(t,e){return Pn(this.h,t)?this.h[t]:e},st.set=function(t,e){Pn(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},st.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ln=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mn(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Mn){this.g=void 0!==e?e:t.g,Fn(this,t.j),this.s=t.s,jn(this,t.i),Vn(this,t.m),this.l=t.l,e=t.h;var n=new $n;n.i=e.i,e.g&&(n.g=new Rn(e.g),n.h=e.h),qn(this,n),this.o=t.o}else t&&(n=String(t).match(Ln))?(this.g=!!e,Fn(this,n[1]||"",!0),this.s=Gn(n[2]||""),jn(this,n[3]||"",!0),Vn(this,n[4]),this.l=Gn(n[5]||"",!0),qn(this,n[6]||"",!0),this.o=Gn(n[7]||"")):(this.g=!!e,this.h=new $n(null,this.g))}function Un(t){return new Mn(t)}function Fn(t,e,n){t.j=n?Gn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function jn(t,e,n){t.i=n?Gn(e,!0):e}function Vn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function qn(t,e,n){e instanceof $n?(t.h=e,function(t,e){e&&!t.j&&(Zn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Hn(e,Yn)),t.h=new $n(e,t.g))}function Bn(t,e,n){t.h.set(e,n)}function Kn(t){return Bn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Gn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Mn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Hn(e,Wn,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Hn(e,Wn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hn(n,"/"==n.charAt(0)?Xn:Qn,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Hn(n,Jn)),t.join("")};var Wn=/[#\/\?@]/g,Qn=/[#\?:]/g,Xn=/[#\?]/g,Yn=/[#\?@]/g,Jn=/#/g;function $n(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Zn(t){t.g||(t.g=new Rn,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function tr(t,e){Zn(t),e=rr(t,e),Pn(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Pn((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&xn(t)))}function er(t,e){return Zn(t),e=rr(t,e),Pn(t.g.h,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.i=null,t.g.set(rr(t,e),At(n)),t.h+=n.length)}function rr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(st=$n.prototype).add=function(t,e){Zn(this),this.i=null,t=rr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},st.forEach=function(t,e){Zn(this),this.g.forEach((function(n,r){Et(n,(function(n){t.call(e,n,r,this)}),this)}),this)},st.T=function(){Zn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},st.R=function(t){Zn(this);var e=[];if("string"===typeof t)er(this,t)&&(e=St(e,this.g.get(rr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=St(e,t[n])}return e},st.set=function(t,e){return Zn(this),this.i=null,er(this,t=rr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},st.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var ir=function(t,e){this.h=t,this.g=e};function or(t){this.l=t||sr,ht.PerformanceNavigationTiming?t=0<(t=ht.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(ht.g&&ht.g.Ea&&ht.g.Ea()&&ht.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ar,sr=10;function ur(t){return!!t.h||!!t.g&&t.g.size>=t.j}function cr(t){return t.h?1:t.g?t.g.size:0}function hr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function lr(t,e){t.g?t.g.add(e):t.h=e}function fr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function pr(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=at(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return At(t.i)}function dr(){}function vr(){this.g=new dr}function gr(t,e,n){var r=n||"";try{Dn(t,(function(t,n){var i=t;pt(t)&&(i=ke(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(xd){throw e.push(r+"type="+encodeURIComponent("_badmap")),xd}}function mr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function yr(t){this.l=t.$b||null,this.j=t.ib||!1}function br(t,e){Ee.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=wr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}or.prototype.cancel=function(){var t,e;if(this.i=pr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=at(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},dr.prototype.stringify=function(t){return ht.JSON.stringify(t,void 0)},dr.prototype.parse=function(t){return ht.JSON.parse(t,void 0)},wt(yr,sn),yr.prototype.g=function(){return new br(this.l,this.j)},yr.prototype.i=(ar={},function(){return ar}),wt(br,Ee);var wr=0;function _r(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Ir(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Tr(t)}function Tr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(st=br.prototype).open=function(t,e){if(this.readyState!=wr)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Tr(this)},st.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ht).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ir(this)),this.readyState=wr},st.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof ht.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_r(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},st.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ir(this):Tr(this),3==this.readyState&&_r(this)}},st.Ua=function(t){this.g&&(this.response=this.responseText=t,Ir(this))},st.Ta=function(t){this.g&&(this.response=t,Ir(this))},st.ha=function(){this.g&&Ir(this)},st.setRequestHeader=function(t,e){this.v.append(t,e)},st.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(br.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Er=ht.JSON.parse;function Sr(t){Ee.call(this),this.headers=new Rn,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ar,this.K=this.L=!1}wt(Sr,Ee);var Ar="",kr=/^https?$/i,Nr=["POST","PUT"];function Or(t){return"content-type"==t.toLowerCase()}function Cr(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Dr(t),xr(t)}function Dr(t){t.D||(t.D=!0,Se(t,"complete"),Se(t,"error"))}function Rr(t){if(t.h&&"undefined"!=typeof ct&&(!t.C[1]||4!=Lr(t)||2!=t.ba()))if(t.v&&4==Lr(t))Ve(t.Fa,0,t);else if(Se(t,"readystatechange"),4==Lr(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Ln)[1]||null;if(!o&&ht.self&&ht.self.location){var a=ht.self.location.protocol;o=a.substr(0,a.length-1)}i=!kr.test(o?o.toLowerCase():"")}e=i}if(e)Se(t,"complete"),Se(t,"success");else{t.m=6;try{var s=2<Lr(t)?t.g.statusText:""}catch(u){s=""}t.j=s+" ["+t.ba()+"]",Dr(t)}}finally{xr(t)}}}function xr(t,e){if(t.g){Pr(t);var n=t.g,r=t.C[0]?lt:null;t.g=null,t.C=null,e||Se(t,"ready");try{n.onreadystatechange=r}catch(xd){}}}function Pr(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ht.clearTimeout(t.A),t.A=null)}function Lr(t){return t.g?t.g.readyState:0}function Mr(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Ar:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ur(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Pt(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Bn(t,e,n))}function Fr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function jr(t){this.za=0,this.l=[],this.h=new We,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fr("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fr("baseRetryDelayMs",5e3,t),this.$a=Fr("retryDelaySeedMs",1e4,t),this.Ya=Fr("forwardChannelMaxRetries",2,t),this.ra=Fr("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new or(t&&t.concurrentRequestLimit),this.Ca=new vr,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Vr(t){if(Br(t),3==t.G){var e=t.V++,n=Un(t.F);Bn(n,"SID",t.J),Bn(n,"RID",e),Bn(n,"TYPE","terminate"),zr(t,n),(e=new vn(t,t.h,e,void 0)).K=2,e.v=Kn(Un(n)),n=!1,ht.navigator&&ht.navigator.sendBeacon&&(n=ht.navigator.sendBeacon(e.v.toString(),"")),!n&&ht.Image&&((new Image).src=e.v,n=!0),n||(e.g=ii(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Sn(e)}ni(t)}function qr(t){t.g&&(Yr(t),t.g.cancel(),t.g=null)}function Br(t){qr(t),t.u&&(ht.clearTimeout(t.u),t.u=null),$r(t),t.i.cancel(),t.m&&("number"===typeof t.m&&ht.clearTimeout(t.m),t.m=null)}function Kr(t,e){t.l.push(new ir(t.Za++,e)),3==t.G&&Gr(t)}function Gr(t){ur(t.i)||t.m||(t.m=!0,Pe(t.Ha,t),t.C=0)}function Hr(t,e){var n;n=e?e.m:t.V++;var r=Un(t.F);Bn(r,"SID",t.J),Bn(r,"RID",n),Bn(r,"AID",t.U),zr(t,r),t.o&&t.s&&Ur(r,t.o,t.s),n=new vn(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Wr(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),lr(t.i,n),wn(n,r,e)}function zr(t,e){t.j&&Dn({},(function(t,n){Bn(e,n,t)}))}function Wr(t,e,n){n=Math.min(t.l.length,n);var r=t.j?yt(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{gr(h,a,"req"+c+"_")}catch(Vi){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Qr(t){t.g||t.u||(t.Y=1,Pe(t.Ga,t),t.A=0)}function Xr(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=rn(yt(t.Ga,t),ti(t,t.A)),t.A++,!0)}function Yr(t){null!=t.B&&(ht.clearTimeout(t.B),t.B=null)}function Jr(t){t.g=new vn(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Un(t.oa);Bn(e,"RID","rpc"),Bn(e,"SID",t.J),Bn(e,"CI",t.N?"0":"1"),Bn(e,"AID",t.U),zr(t,e),Bn(e,"TYPE","xmlhttp"),t.o&&t.s&&Ur(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Kn(Un(e)),n.s=null,n.U=!0,_n(n,t)}function $r(t){null!=t.v&&(ht.clearTimeout(t.v),t.v=null)}function Zr(t,e){var n=null;if(t.g==e){$r(t),Yr(t),t.g=null;var r=2}else{if(!hr(t.i,e))return;n=e.D,fr(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Se(r=Je(),new nn(r,n,e,i)),Gr(t)}else Qr(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(cr(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=e.D.concat(t.l),!0):!(1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya))&&(t.m=rn(yt(t.Ha,t,e),ti(t,t.C)),t.C++,!0))}(t,e)||2==r&&Xr(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ei(t,5);break;case 4:ei(t,10);break;case 3:ei(t,6);break;default:ei(t,2)}}function ti(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function ei(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=yt(t.jb,t);n||(n=new Mn("//www.google.com/images/cleardot.gif"),ht.location&&"http"==ht.location.protocol||Fn(n,"https"),Kn(n)),function(t,e){var n=new We;if(ht.Image){var r=new Image;r.onload=bt(mr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=bt(mr,n,r,"TestLoadImage: error",!1,e),r.onabort=bt(mr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=bt(mr,n,r,"TestLoadImage: timeout",!1,e),ht.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else en(2);t.G=0,t.j&&t.j.va(e),ni(t),Br(t)}function ni(t){t.G=0,t.I=-1,t.j&&(0==pr(t.i).length&&0==t.l.length||(t.i.i.length=0,At(t.l),t.l.length=0),t.j.ua())}function ri(t,e,n){var r=function(t){return t instanceof Mn?Un(t):new Mn(t,void 0)}(n);if(""!=r.i)e&&jn(r,e+"."+r.i),Vn(r,r.m);else{var i=ht.location;r=function(t,e,n,r){var i=new Mn(null,void 0);return t&&Fn(i,t),e&&jn(i,e),n&&Vn(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Pt(t.aa,(function(t,e){Bn(r,e,t)})),e=t.D,n=t.sa,e&&n&&Bn(r,e,n),Bn(r,"VER",t.ma),zr(t,r),r}function ii(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Sr(new yr({ib:!0})):new Sr(t.qa)).L=t.H,e}function oi(){}function ai(){if(qt&&!(10<=Number(te)))throw Error("Environmental error: no available transport.")}function si(t,e){Ee.call(this),this.g=new jr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!kt(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kt(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new hi(this)}function ui(t){fn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ci(){pn.call(this),this.status=1}function hi(t){this.g=t}(st=Sr.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():hn.g(),this.C=this.u?un(this.u):un(hn),this.g.onreadystatechange=yt(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Cr(this,o)}t=n||"";var i=new Rn(this.headers);r&&Dn(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Or,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.T()),n=ht.FormData&&t instanceof ht.FormData,!(0<=Tt(Nr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Pr(this),0<this.B&&((this.K=function(t){return qt&&$t()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yt(this.pa,this)):this.A=Ve(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Cr(this,o)}},st.pa=function(){"undefined"!=typeof ct&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Se(this,"timeout"),this.abort(8))},st.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Se(this,"complete"),Se(this,"abort"),xr(this))},st.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xr(this,!0)),Sr.Z.M.call(this)},st.Fa=function(){this.s||(this.F||this.v||this.l?Rr(this):this.cb())},st.cb=function(){Rr(this)},st.ba=function(){try{return 2<Lr(this)?this.g.status:-1}catch(ar){return-1}},st.ga=function(){try{return this.g?this.g.responseText:""}catch(ar){return""}},st.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Er(e)}},st.Da=function(){return this.m},st.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(st=jr.prototype).ma=8,st.G=1,st.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},st.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new vn(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Ut(n=Lt(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"===typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Wr(this,e,r),Bn(i=Un(this.F),"RID",t),Bn(i,"CVER",22),this.D&&Bn(i,"X-HTTP-Session-Id",this.D),zr(this,i),this.o&&n&&Ur(i,this.o,n),lr(this.i,e),this.Ra&&Bn(i,"TYPE","init"),this.ja?(Bn(i,"$req",r),Bn(i,"SID","null"),e.$=!0,wn(e,i,null)):wn(e,i,r),this.G=2}}else 3==this.G&&(t?Hr(this,t):0==this.l.length||ur(this.i)||Hr(this))},st.Ga=function(){if(this.u=null,Jr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=rn(yt(this.bb,this),t)}},st.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,en(10),qr(this),Jr(this))},st.ab=function(){null!=this.v&&(this.v=null,qr(this),Xr(this),en(19))},st.jb=function(t){t?(this.h.info("Successfully pinged google.com"),en(2)):(this.h.info("Failed to ping google.com"),en(1))},(st=oi.prototype).xa=function(){},st.wa=function(){},st.va=function(){},st.ua=function(){},st.Oa=function(){},ai.prototype.g=function(t,e){return new si(t,e)},wt(si,Ee),si.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Pe(yt(t.hb,t,e))),en(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=ri(t,null,t.W),Gr(t)},si.prototype.close=function(){Vr(this.g)},si.prototype.u=function(t){if("string"===typeof t){var e={};e.__data__=t,Kr(this.g,e)}else this.v?((e={}).__data__=ke(t),Kr(this.g,e)):Kr(this.g,t)},si.prototype.M=function(){this.g.j=null,delete this.j,Vr(this.g),delete this.g,si.Z.M.call(this)},wt(ui,fn),wt(ci,pn),wt(hi,oi),hi.prototype.xa=function(){Se(this.g,"a")},hi.prototype.wa=function(t){Se(this.g,new ui(t))},hi.prototype.va=function(t){Se(this.g,new ci(t))},hi.prototype.ua=function(){Se(this.g,"b")},ai.prototype.createWebChannel=ai.prototype.g,si.prototype.send=si.prototype.u,si.prototype.open=si.prototype.m,si.prototype.close=si.prototype.close,on.NO_ERROR=0,on.TIMEOUT=8,on.HTTP_ERROR=6,an.COMPLETE="complete",cn.EventType=ln,ln.OPEN="a",ln.CLOSE="b",ln.ERROR="c",ln.MESSAGE="d",Ee.prototype.listen=Ee.prototype.N,Sr.prototype.listenOnce=Sr.prototype.O,Sr.prototype.getLastError=Sr.prototype.La,Sr.prototype.getLastErrorCode=Sr.prototype.Da,Sr.prototype.getStatus=Sr.prototype.ba,Sr.prototype.getResponseJson=Sr.prototype.Qa,Sr.prototype.getResponseText=Sr.prototype.ga,Sr.prototype.send=Sr.prototype.ea;var li=function(){return new ai},fi=function(){return Je()},pi=on,di=an,vi=Xe,gi={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},mi=yr,yi=cn,bi=Sr,wi=n(3454),_i=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();_i.o=-1;var Ii={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ti=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return i(e,t),e}(Error),Ei=new q("@firebase/firestore");function Si(){return Ei.logLevel}function Ai(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ei.logLevel<=P.DEBUG){var r=e.map(Oi);Ei.debug.apply(Ei,h(["Firestore (8.10.1): "+t],r))}}function ki(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ei.logLevel<=P.ERROR){var r=e.map(Oi);Ei.error.apply(Ei,h(["Firestore (8.10.1): "+t],r))}}function Ni(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ei.logLevel<=P.WARN){var r=e.map(Oi);Ei.warn.apply(Ei,h(["Firestore (8.10.1): "+t],r))}}function Oi(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Ci(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw ki(e),new Error(e)}function Di(t,e){t||Ci()}function Ri(t,e){return t}function xi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Pi=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=xi(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Li(t,e){return t<e?-1:t>e?1:0}function Mi(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ui(t){return t+"\0"}var Fi=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ti(Ii.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ti(Ii.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ti(Ii.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ti(Ii.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Li(this.nanoseconds,t.nanoseconds):Li(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ji=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Fi(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Vi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qi(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Bi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ki=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ci(),void 0===n?n=t.length-e:n>t.length-e&&Ci(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Gi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Ti(Ii.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Ki),Hi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Hi.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ti(Ii.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Ti(Ii.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ti(Ii.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Ti(Ii.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Ki),Wi=function(){function t(t){this.fields=t,t.sort(zi.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Mi(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Qi=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Li(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Qi.EMPTY_BYTE_STRING=new Qi("");var Xi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(t){if(Di(!!t),"string"==typeof t){var e=0,n=Xi.exec(t);if(Di(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ji(t.seconds),nanos:Ji(t.nanos)}}function Ji(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function $i(t){return"string"==typeof t?Qi.fromBase64String(t):Qi.fromUint8Array(t)}function Zi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function to(t){var e=t.mapValue.fields.__previous_value__;return Zi(e)?to(e):e}function eo(t){var e=Yi(t.mapValue.fields.__local_write_time__.timestampValue);return new Fi(e.seconds,e.nanos)}function no(t){return null==t}function ro(t){return 0===t&&1/t==-1/0}function io(t){return"number"==typeof t&&Number.isInteger(t)&&!ro(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var oo=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Gi.fromString(e))},t.fromName=function(e){return new t(Gi.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Gi.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Gi.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Gi(e.slice()))},t}();function ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zi(t)?4:10:Ci()}function so(t,e){var n=ao(t);if(n!==ao(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return eo(t).isEqual(eo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Yi(t.timestampValue),r=Yi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return $i(t.bytesValue).isEqual($i(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ji(t.geoPointValue.latitude)===Ji(e.geoPointValue.latitude)&&Ji(t.geoPointValue.longitude)===Ji(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ji(t.integerValue)===Ji(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ji(t.doubleValue),r=Ji(e.doubleValue);return n===r?ro(n)===ro(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Mi(t.arrayValue.values||[],e.arrayValue.values||[],so);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Vi(n)!==Vi(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!so(n[i],r[i])))return!1;return!0}(t,e);default:return Ci()}}function uo(t,e){return void 0!==(t.values||[]).find((function(t){return so(t,e)}))}function co(t,e){var n=ao(t),r=ao(e);if(n!==r)return Li(n,r);switch(n){case 0:return 0;case 1:return Li(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ji(t.integerValue||t.doubleValue),r=Ji(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ho(t.timestampValue,e.timestampValue);case 4:return ho(eo(t),eo(e));case 5:return Li(t.stringValue,e.stringValue);case 6:return function(t,e){var n=$i(t),r=$i(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Li(n[i],r[i]);if(0!==o)return o}return Li(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Li(Ji(t.latitude),Ji(e.latitude));return 0!==n?n:Li(Ji(t.longitude),Ji(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=co(n[i],r[i]);if(o)return o}return Li(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Li(r[a],o[a]);if(0!==s)return s;var u=co(n[r[a]],i[o[a]]);if(0!==u)return u}return Li(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ci()}}function ho(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Li(t,e);var n=Yi(t),r=Yi(e),i=Li(n.seconds,r.seconds);return 0!==i?i:Li(n.nanos,r.nanos)}function lo(t){return fo(t)}function fo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Yi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?$i(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,oo.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=fo(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+fo(t.fields[o])}return e+"}"}(t.mapValue):Ci();var e,n}function po(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function vo(t){return!!t&&"integerValue"in t}function go(t){return!!t&&"arrayValue"in t}function mo(t){return!!t&&"nullValue"in t}function yo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bo(t){return!!t&&"mapValue"in t}function wo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return qi(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=wo(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=wo(t.arrayValue.values[r]);return n}return Object.assign({},t)}var _o=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!bo(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=wo(e)},t.prototype.setAll=function(t){var e=this,n=zi.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=wo(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());bo(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return so(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];bo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){qi(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(wo(this.value))},t}();function Io(t){var e=[];return qi(t.fields,(function(t,n){var r=new zi([t]);if(bo(n)){var i=Io(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new Wi(e)}var To=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,ji.min(),_o.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,_o.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,_o.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=_o.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=_o.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Eo=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function So(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Eo(t,e,n,r,i,o,a)}function Ao(t){var e=Ri(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+lo(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),no(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=jo(e.startAt)),e.endAt&&(n+="|ub:",n+=jo(e.endAt)),e.h=n}return e.h}function ko(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!qo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!so(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ko(t.startAt,e.startAt)&&Ko(t.endAt,e.endAt)}function No(t){return oo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Oo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return i(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Co(t,n,r):"array-contains"===n?new Po(t,r):"in"===n?new Lo(t,r):"not-in"===n?new Mo(t,r):"array-contains-any"===n?new Uo(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Do(t,n):new Ro(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(co(e,this.value)):null!==e&&ao(this.value)===ao(e)&&this.m(co(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ci()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Co=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=oo.fromName(r.referenceValue),i}return i(e,t),e.prototype.matches=function(t){var e=oo.comparator(t.key,this.key);return this.m(e)},e}(Oo),Do=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=xo("in",n),r}return i(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Oo),Ro=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=xo("not-in",n),r}return i(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Oo);function xo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return oo.fromName(t.referenceValue)}))}var Po=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return i(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return go(e)&&uo(e.arrayValue,this.value)},e}(Oo),Lo=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return i(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&uo(this.value.arrayValue,e)},e}(Oo),Mo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return i(e,t),e.prototype.matches=function(t){if(uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!uo(this.value.arrayValue,e)},e}(Oo),Uo=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return i(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!go(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return uo(e.value.arrayValue,t)}))},e}(Oo),Fo=function(t,e){this.position=t,this.before=e};function jo(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return lo(t)})).join(",")}var Vo=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function qo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Bo(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?oo.comparator(oo.fromName(a.referenceValue),n.key):co(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ko(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!so(t.position[n],e.position[n]))return!1;return!0}var Go=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Ho(t,e,n,r,i,o,a,s){return new Go(t,e,n,r,i,o,a,s)}function zo(t){return new Go(t)}function Wo(t){return!no(t.limit)&&"F"===t.limitType}function Qo(t){return!no(t.limit)&&"L"===t.limitType}function Xo(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Yo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Jo(t){return null!==t.collectionGroup}function $o(t){var e=Ri(t);if(null===e.p){e.p=[];var n=Yo(e),r=Xo(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Vo(n)),e.p.push(new Vo(zi.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Vo(zi.keyField(),u))}}}return e.p}function Zo(t){var e=Ri(t);if(!e.T)if("F"===e.limitType)e.T=So(e.path,e.collectionGroup,$o(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=$o(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Vo(o.field,a))}var s=e.endAt?new Fo(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Fo(e.startAt.position,!e.startAt.before):null;e.T=So(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function ta(t,e,n){return new Go(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ea(t,e){return ko(Zo(t),Zo(e))&&t.limitType===e.limitType}function na(t){return Ao(Zo(t))+"|lt:"+t.limitType}function ra(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+lo(e.value);var e})).join(", ")+"]"),no(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+jo(t.startAt)),t.endAt&&(e+=", endAt: "+jo(t.endAt)),"Target("+e+")"}(Zo(t))+"; limitType="+t.limitType+")"}function ia(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):oo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Bo(t.startAt,$o(t),e))&&(!t.endAt||!Bo(t.endAt,$o(t),e))}(t,e)}function oa(t){return function(e,n){for(var r=!1,i=0,o=$o(t);i<o.length;i++){var a=o[i],s=aa(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function aa(t,e,n){var r=t.field.isKeyField()?oo.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?co(r,i):Ci()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ci()}}function sa(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ro(e)?"-0":e}}function ua(t){return{integerValue:""+t}}function ca(t,e){return io(e)?ua(e):sa(t,e)}var ha=function(){this._=void 0};function la(t,e,n){return t instanceof da?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof va?ga(t,e):t instanceof ma?ya(t,e):function(t,e){var n=pa(t,e),r=wa(n)+wa(t.A);return vo(n)&&vo(t.A)?ua(r):sa(t.R,r)}(t,e)}function fa(t,e,n){return t instanceof va?ga(t,e):t instanceof ma?ya(t,e):n}function pa(t,e){return t instanceof ba?vo(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var da=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(ha),va=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return i(e,t),e}(ha);function ga(t,e){for(var n=_a(e),r=function(t){n.some((function(e){return so(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ma=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return i(e,t),e}(ha);function ya(t,e){for(var n=_a(e),r=function(t){n=n.filter((function(e){return!so(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ba=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return i(e,t),e}(ha);function wa(t){return Ji(t.integerValue||t.doubleValue)}function _a(t){return go(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ia=function(t,e){this.field=t,this.transform=e},Ta=function(t,e){this.version=t,this.transformResults=e},Ea=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Sa(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Aa=function(){};function ka(t,e,n){t instanceof Ra?function(t,e,n){var r=t.value.clone(),i=La(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof xa?function(t,e,n){if(Sa(t.precondition,e)){var r=La(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Pa(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Na(t,e,n){t instanceof Ra?function(t,e,n){if(Sa(t.precondition,e)){var r=t.value.clone(),i=Ma(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Da(e),r).setHasLocalMutations()}}(t,e,n):t instanceof xa?function(t,e,n){if(Sa(t.precondition,e)){var r=Ma(t.fieldTransforms,n,e),i=e.data;i.setAll(Pa(t)),i.setAll(r),e.convertToFoundDocument(Da(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Sa(t.precondition,e)&&e.convertToNoDocument(ji.min())}(t,e)}function Oa(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=pa(o.transform,a||null);null!=s&&(null==n&&(n=_o.empty()),n.set(o.field,s))}return n||null}function Ca(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Mi(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof va&&e instanceof va||t instanceof ma&&e instanceof ma?Mi(t.elements,e.elements,so):t instanceof ba&&e instanceof ba?so(t.A,e.A):t instanceof da&&e instanceof da}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Da(t){return t.isFoundDocument()?t.version:ji.min()}var Ra=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return i(e,t),e}(Aa),xa=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return i(e,t),e}(Aa);function Pa(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function La(t,e,n){var r=new Map;Di(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,fa(a,s,n[i]))}return r}function Ma(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,la(s,u,e))}return r}var Ua,Fa,ja=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return i(e,t),e}(Aa),Va=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return i(e,t),e}(Aa),qa=function(t){this.count=t};function Ba(t){switch(t){case Ii.OK:return Ci();case Ii.CANCELLED:case Ii.UNKNOWN:case Ii.DEADLINE_EXCEEDED:case Ii.RESOURCE_EXHAUSTED:case Ii.INTERNAL:case Ii.UNAVAILABLE:case Ii.UNAUTHENTICATED:return!1;case Ii.INVALID_ARGUMENT:case Ii.NOT_FOUND:case Ii.ALREADY_EXISTS:case Ii.PERMISSION_DENIED:case Ii.FAILED_PRECONDITION:case Ii.ABORTED:case Ii.OUT_OF_RANGE:case Ii.UNIMPLEMENTED:case Ii.DATA_LOSS:return!0;default:return Ci()}}function Ka(t){if(void 0===t)return ki("GRPC error has no .code"),Ii.UNKNOWN;switch(t){case Ua.OK:return Ii.OK;case Ua.CANCELLED:return Ii.CANCELLED;case Ua.UNKNOWN:return Ii.UNKNOWN;case Ua.DEADLINE_EXCEEDED:return Ii.DEADLINE_EXCEEDED;case Ua.RESOURCE_EXHAUSTED:return Ii.RESOURCE_EXHAUSTED;case Ua.INTERNAL:return Ii.INTERNAL;case Ua.UNAVAILABLE:return Ii.UNAVAILABLE;case Ua.UNAUTHENTICATED:return Ii.UNAUTHENTICATED;case Ua.INVALID_ARGUMENT:return Ii.INVALID_ARGUMENT;case Ua.NOT_FOUND:return Ii.NOT_FOUND;case Ua.ALREADY_EXISTS:return Ii.ALREADY_EXISTS;case Ua.PERMISSION_DENIED:return Ii.PERMISSION_DENIED;case Ua.FAILED_PRECONDITION:return Ii.FAILED_PRECONDITION;case Ua.ABORTED:return Ii.ABORTED;case Ua.OUT_OF_RANGE:return Ii.OUT_OF_RANGE;case Ua.UNIMPLEMENTED:return Ii.UNIMPLEMENTED;case Ua.DATA_LOSS:return Ii.DATA_LOSS;default:return Ci()}}(Fa=Ua||(Ua={}))[Fa.OK=0]="OK",Fa[Fa.CANCELLED=1]="CANCELLED",Fa[Fa.UNKNOWN=2]="UNKNOWN",Fa[Fa.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fa[Fa.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fa[Fa.NOT_FOUND=5]="NOT_FOUND",Fa[Fa.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fa[Fa.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fa[Fa.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fa[Fa.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fa[Fa.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fa[Fa.ABORTED=10]="ABORTED",Fa[Fa.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fa[Fa.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fa[Fa.INTERNAL=13]="INTERNAL",Fa[Fa.UNAVAILABLE=14]="UNAVAILABLE",Fa[Fa.DATA_LOSS=15]="DATA_LOSS";var Ga=function(){function t(t,e){this.comparator=t,this.root=e||za.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,za.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,za.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ha(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ha(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ha(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ha(this.root,t,this.comparator,!0)},t}(),Ha=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),za=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Ci();if(this.right.isRed())throw Ci();var t=this.left.check();if(t!==this.right.check())throw Ci();return t+(this.isRed()?0:1)},t}();za.EMPTY=null,za.RED=!0,za.BLACK=!1,za.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new za(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Wa=function(){function t(t){this.comparator=t,this.data=new Ga(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Qa(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Qa(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Qa=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Xa=new Ga(oo.comparator);function Ya(){return Xa}var Ja=new Ga(oo.comparator);function $a(){return Ja}var Za=new Ga(oo.comparator);function ts(){return Za}var es=new Wa(oo.comparator);function ns(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=es,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var rs=new Wa(Li);function is(){return rs}var os=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,as.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(ji.min(),r,is(),Ya(),ns())},t}(),as=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Qi.EMPTY_BYTE_STRING,n,ns(),ns(),ns())},t}(),ss=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},us=function(t,e){this.targetId=t,this.V=e},cs=function(t,e,n,r){void 0===n&&(n=Qi.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},hs=function(){function t(){this.S=0,this.D=ps(),this.C=Qi.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=ns(),e=ns(),n=ns();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ci()}})),new as(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=ps()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),ls=function(){function t(t){this.W=t,this.G=new Map,this.H=Ya(),this.J=fs(),this.Y=new Wa(Li)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Ci()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(No(i))if(0===n){var o=new oo(i.path);this.tt(e,o,To.newNoDocument(o,ji.min()))}else Di(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&No(o.target)){var a=new oo(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,To.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=ns();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new os(t,n,this.Y,this.H,r);return this.H=Ya(),this.J=fs(),this.Y=new Wa(Li),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new hs,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Wa(Li),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ai("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new hs),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function fs(){return new Ga(oo.comparator)}function ps(){return new Ga(oo.comparator)}var ds={asc:"ASCENDING",desc:"DESCENDING"},vs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gs=function(t,e){this.databaseId=t,this.I=e};function ms(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function ys(t,e){return t.I?e.toBase64():e.toUint8Array()}function bs(t,e){return ms(t,e.toTimestamp())}function ws(t){return Di(!!t),ji.fromTimestamp(function(t){var e=Yi(t);return new Fi(e.seconds,e.nanos)}(t))}function _s(t,e){return function(t){return new Gi(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Is(t){var e=Gi.fromString(t);return Di(zs(e)),e}function Ts(t,e){return _s(t.databaseId,e.path)}function Es(t,e){var n=Is(e);if(n.get(1)!==t.databaseId.projectId)throw new Ti(Ii.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ti(Ii.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oo(Ns(n))}function Ss(t,e){return _s(t.databaseId,e)}function As(t){var e=Is(t);return 4===e.length?Gi.emptyPath():Ns(e)}function ks(t){return new Gi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ns(t){return Di(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Os(t,e,n){return{name:Ts(t,e),fields:n.value.mapValue.fields}}function Cs(t,e,n){var r=Es(t,e.name),i=ws(e.updateTime),o=new _o({mapValue:{fields:e.fields}}),a=To.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ds(t,e){var n;if(e instanceof Ra)n={update:Os(t,e.key,e.value)};else if(e instanceof ja)n={delete:Ts(t,e.key)};else if(e instanceof xa)n={update:Os(t,e.key,e.data),updateMask:Hs(e.fieldMask)};else{if(!(e instanceof Va))return Ci();n={verify:Ts(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof da)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof va)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ma)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ba)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Ci()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:bs(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ci()}(t,e.precondition)),n}function Rs(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ea.updateTime(ws(t.updateTime)):void 0!==t.exists?Ea.exists(t.exists):Ea.none()}(e.currentDocument):Ea.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Di("REQUEST_TIME"===e.setToServerValue),n=new da;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new va(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new ma(i)}else"increment"in e?n=new ba(t,e.increment):Ci();var o=zi.fromServerFormat(e.fieldPath);return new Ia(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Es(t,e.update.name),o=new _o({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Wi(e.map((function(t){return zi.fromServerFormat(t)})))}(e.updateMask);return new xa(i,o,a,n,r)}return new Ra(i,o,n,r)}if(e.delete){var s=Es(t,e.delete);return new ja(s,n)}if(e.verify){var u=Es(t,e.verify);return new Va(u,n)}return Ci()}function xs(t,e){return{documents:[Ss(t,e.path)]}}function Ps(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ss(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ss(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(yo(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NAN"}};if(mo(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(yo(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NOT_NAN"}};if(mo(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qs(t.field),op:Vs(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:qs(t.field),direction:js(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||no(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Us(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Us(e.endAt)),n}function Ls(t){var e=As(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Di(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Ms(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Vo(Bs(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return no(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Fs(n.startAt));var h=null;return n.endAt&&(h=Fs(n.endAt)),Ho(e,i,s,a,u,"F",c,h)}function Ms(t){return t?void 0!==t.unaryFilter?[Gs(t)]:void 0!==t.fieldFilter?[Ks(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Ms(t)})).reduce((function(t,e){return t.concat(e)})):Ci():[]}function Us(t){return{before:t.before,values:t.position}}function Fs(t){var e=!!t.before,n=t.values||[];return new Fo(n,e)}function js(t){return ds[t]}function Vs(t){return vs[t]}function qs(t){return{fieldPath:t.canonicalString()}}function Bs(t){return zi.fromServerFormat(t.fieldPath)}function Ks(t){return Oo.create(Bs(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ci()}}(t.fieldFilter.op),t.fieldFilter.value)}function Gs(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Bs(t.unaryFilter.field);return Oo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Bs(t.unaryFilter.field);return Oo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Bs(t.unaryFilter.field);return Oo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Bs(t.unaryFilter.field);return Oo.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ci()}}function Hs(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function zs(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Ws(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Xs(e)),e=Qs(t.get(n),e);return Xs(e)}function Qs(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Xs(t){return t+"\x01\x01"}function Ys(t){var e=t.length;if(Di(e>=2),2===e)return Di("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Gi.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&Ci(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:Ci()}o=a+2}return new Gi(r)}var Js=function(t,e){this.seconds=t,this.nanoseconds=e},$s=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};$s.store="owner",$s.key="owner";var Zs=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Zs.store="mutationQueues",Zs.keyPath="userId";var tu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};tu.store="mutations",tu.keyPath="batchId",tu.userMutationsIndex="userMutationsIndex",tu.userMutationsKeyPath=["userId","batchId"];var eu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ws(e)]},t.key=function(t,e,n){return[t,Ws(e),n]},t}();eu.store="documentMutations",eu.PLACEHOLDER=new eu;var nu=function(t,e){this.path=t,this.readTime=e},ru=function(t,e){this.path=t,this.version=e},iu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};iu.store="remoteDocuments",iu.readTimeIndex="readTimeIndex",iu.readTimeIndexPath="readTime",iu.collectionReadTimeIndex="collectionReadTimeIndex",iu.collectionReadTimeIndexPath=["parentPath","readTime"];var ou=function(t){this.byteSize=t};ou.store="remoteDocumentGlobal",ou.key="remoteDocumentGlobalKey";var au=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};au.store="targets",au.keyPath="targetId",au.queryTargetsIndexName="queryTargetsIndex",au.queryTargetsKeyPath=["canonicalId","targetId"];var su=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};su.store="targetDocuments",su.keyPath=["targetId","path"],su.documentTargetsIndex="documentTargetsIndex",su.documentTargetsKeyPath=["path","targetId"];var uu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};uu.key="targetGlobalKey",uu.store="targetGlobal";var cu=function(t,e){this.collectionId=t,this.parent=e};cu.store="collectionParents",cu.keyPath=["collectionId","parent"];var hu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};hu.store="clientMetadata",hu.keyPath="clientId";var lu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};lu.store="bundles",lu.keyPath="bundleId";var fu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};fu.store="namedQueries",fu.keyPath="name";var pu=h(h([],h(h([],h(h([],h(h([],[Zs.store,tu.store,eu.store,iu.store,au.store,$s.store,uu.store,su.store]),[hu.store])),[ou.store])),[cu.store])),[lu.store,fu.store]),du="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),gu=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},mu=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Ci(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),yu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new gu,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new _u(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Au(e.target.error);n.ft.reject(new _u(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new _u(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ai("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Tu(e)},t}(),bu=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(m())&&ki("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ai("SimpleDb","Removing database:",t),Eu(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=m(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof wi&&"YES"===(null===(t=wi.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return s(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ai("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new _u(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ti(Ii.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new _u(t,n))},i.onupgradeneeded=function(t){Ai("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Ai("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,a,u,c;return s(this,(function(h){switch(h.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,c,h,l;return s(this,(function(s){switch(s.label){case 0:++o,s.label=1;case 1:return s.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=s.sent(),e=yu.open(u.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),mu.reject(t)})).toPromise(),c={},a.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(s.sent(),a),c)];case 4:return h=s.sent(),l="FirebaseError"!==h.name&&o<3,Ai("SimpleDb","Transaction failed with error:",h.message,"Retrying:",l),u.close(),l?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),wu=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Eu(this.Pt.delete())},t}(),_u=function(t){function e(e,n){var r=this;return(r=t.call(this,Ii.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return i(e,t),e}(Ti);function Iu(t){return"IndexedDbTransactionError"===t.name}var Tu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ai("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ai("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Eu(n)},t.prototype.add=function(t){return Ai("SimpleDb","ADD",this.store.name,t,t),Eu(this.store.add(t))},t.prototype.get=function(t){var e=this;return Eu(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ai("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ai("SimpleDb","DELETE",this.store.name,t),Eu(this.store.delete(t))},t.prototype.count=function(){return Ai("SimpleDb","COUNT",this.store.name),Eu(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){Ai("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new mu((function(n,r){e.onerror=function(t){var e=Au(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new mu((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new wu(i),a=e(i.primaryKey,i.value,o);if(a instanceof mu){var s=a.catch((function(t){return o.done(),mu.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return mu.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Eu(t){return new mu((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Au(t.target.error);n(e)}}))}var Su=!1;function Au(t){var e=bu._t(m());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ti("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Su||(Su=!0,setTimeout((function(){throw r}),0)),r}}return t}var ku=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return i(e,t),e}(vu);function Nu(t,e){var n=Ri(t);return bu.It(n.Mt,e)}var Ou=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&ka(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Na(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Na(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ji.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ns())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Mi(this.mutations,t.mutations,(function(t,e){return Ca(t,e)}))&&Mi(this.baseMutations,t.baseMutations,(function(t,e){return Ca(t,e)}))},t}(),Cu=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Di(e.mutations.length===r.length);for(var i=ts(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Du=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=ji.min()),void 0===o&&(o=ji.min()),void 0===a&&(a=Qi.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Ru=function(t){this.Lt=t};function xu(t,e){if(e.document)return Cs(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=oo.fromSegments(e.noDocument.path),r=Fu(e.noDocument.readTime),i=To.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=oo.fromSegments(e.unknownDocument.path);return r=Fu(e.unknownDocument.version),To.newUnknownDocument(o,r)}return Ci()}function Pu(t,e,n){var r=Lu(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Ts(t,e.key),fields:e.data.value.mapValue.fields,updateTime:ms(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new iu(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=Uu(e.version);return a=e.hasCommittedMutations,new iu(null,new nu(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Uu(e.version);return new iu(new ru(c,h),null,null,!0,r,i)}return Ci()}function Lu(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Mu(t){var e=new Fi(t[0],t[1]);return ji.fromTimestamp(e)}function Uu(t){var e=t.toTimestamp();return new Js(e.seconds,e.nanoseconds)}function Fu(t){var e=new Fi(t.seconds,t.nanoseconds);return ji.fromTimestamp(e)}function ju(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Rs(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return Rs(t.Lt,e)})),s=Fi.fromMillis(e.localWriteTimeMs);return new Ou(e.batchId,s,n,a)}function Vu(t){var e,n,r=Fu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Fu(t.lastLimboFreeSnapshotVersion):ji.min();return void 0!==t.query.documents?(Di(1===(n=t.query).documents.length),e=Zo(zo(As(n.documents[0])))):e=function(t){return Zo(Ls(t))}(t.query),new Du(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Qi.fromBase64String(t.resumeToken))}function qu(t,e){var n,r=Uu(e.snapshotVersion),i=Uu(e.lastLimboFreeSnapshotVersion);n=No(e.target)?xs(t.Lt,e.target):Ps(t.Lt,e.target);var o=e.resumeToken.toBase64();return new au(e.targetId,Ao(e.target),r,o,e.sequenceNumber,i,n)}function Bu(t){var e=Ls({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ta(e,e.limit,"L"):e}var Ku=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Gu(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Fu(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Gu(t).put({bundleId:(n=e).id,createTime:Uu(ws(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Hu(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Bu(e.bundledQuery),readTime:Fu(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Hu(t).put(function(t){return{name:t.name,readTime:Uu(ws(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Gu(t){return Nu(t,lu.store)}function Hu(t){return Nu(t,fu.store)}var zu=function(){function t(){this.Bt=new Wu}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),mu.resolve()},t.prototype.getCollectionParents=function(t,e){return mu.resolve(this.Bt.getEntries(e))},t}(),Wu=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Wa(Gi.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Wa(Gi.comparator)).toArray()},t}(),Qu=function(){function t(){this.qt=new Wu}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Ws(i)};return Xu(t).put(o)}return mu.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ui(e),""],!1,!0);return Xu(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ys(o.parent))}return n}))},t}();function Xu(t){return Nu(t,cu.store)}var Yu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ju=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function $u(t,e,n){var r=t.store(tu.store),i=t.store(eu.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){Di(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=eu.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return mu.waitFor(o).next((function(){return c}))}function Zu(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ci();e=t.noDocument}return JSON.stringify(e).length}Ju.DEFAULT_COLLECTION_PERCENTILE=10,Ju.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ju.DEFAULT=new Ju(41943040,Ju.DEFAULT_COLLECTION_PERCENTILE,Ju.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ju.DISABLED=new Ju(-1,0,0);var tc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Di(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nc(t).$t({index:tu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=rc(t),a=nc(t);return a.add({}).next((function(s){Di("number"==typeof s);for(var u=new Ou(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Ds(t.Lt,e)})),i=n.mutations.map((function(e){return Ds(t.Lt,e)}));return new tu(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new Wa((function(t,e){return Li(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=eu.key(i.userId,d.key.path,s);l=l.add(d.key.path.popLast()),h.push(a.put(c)),h.push(o.put(v,eu.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),mu.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return nc(t).get(e).next((function(t){return t?(Di(t.userId===n.userId),ju(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?mu.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return nc(t).$t({index:tu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Di(e.batchId>=r),o=ju(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return nc(t).$t({index:tu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nc(t).Nt(tu.userMutationsIndex,n).next((function(t){return t.map((function(t){return ju(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=eu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return rc(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=Ys(u);if(s===n.userId&&e.path.isEqual(h))return nc(t).get(c).next((function(t){if(!t)throw Ci();Di(t.userId===n.userId),o.push(ju(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Wa(Li),i=[];return e.forEach((function(e){var o=eu.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=rc(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Ys(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),mu.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=eu.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Wa(Li);return rc(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=Ys(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(nc(t).get(e).next((function(t){if(null===t)throw Ci();Di(t.userId===n.userId),r.push(ju(n.R,t))})))})),mu.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return $u(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),mu.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return mu.resolve();var r=IDBKeyRange.lowerBound(eu.prefixForUser(e.userId)),i=[];return rc(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Ys(t[1]);i.push(o)}else r.done()})).next((function(){Di(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return ec(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return ic(t).get(this.userId).next((function(t){return t||new Zs(e.userId,-1,"")}))},t}();function ec(t,e,n){var r=eu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return rc(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function nc(t){return Nu(t,tu.store)}function rc(t){return Nu(t,eu.store)}function ic(t){return Nu(t,Zs.store)}var oc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),ac=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new oc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return ji.fromTimestamp(new Fi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return sc(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Di(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return sc(t).$t((function(a,s){var u=Vu(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return mu.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return sc(t).$t((function(t,n){var r=Vu(n);e(r)}))},t.prototype.Xt=function(t){return uc(t).get(uu.key).next((function(t){return Di(null!==t),t}))},t.prototype.Zt=function(t,e){return uc(t).put(uu.key,e)},t.prototype.te=function(t,e){return sc(t).put(qu(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Ao(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return sc(t).$t({range:r,index:au.queryTargetsIndexName},(function(t,n,r){var o=Vu(n);ko(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=cc(t);return e.forEach((function(e){var a=Ws(e.path);i.push(o.put(new su(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),mu.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=cc(t);return mu.forEach(e,(function(e){var o=Ws(e.path);return mu.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=cc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=cc(t),i=ns();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=Ys(t[1]),o=new oo(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Ws(e.path),r=IDBKeyRange.bound([n],[Ui(n)],!1,!0),i=0;return cc(t).$t({index:su.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return sc(t).get(e).next((function(t){return t?Vu(t):null}))},t}();function sc(t){return Nu(t,au.store)}function uc(t){return Nu(t,uu.store)}function cc(t){return Nu(t,su.store)}function hc(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){if(t.code!==Ii.FAILED_PRECONDITION||t.message!==du)throw t;return Ai("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function lc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Li(n,i);return 0===a?Li(r,o):a}var fc=function(){function t(t){this.ne=t,this.buffer=new Wa(lc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();lc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),pc=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Ai("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return a(e,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Iu(e=n.sent())?(Ai("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,hc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),dc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return mu.resolve(_i.o);var r=new fc(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ai("LruGarbageCollector","Garbage collection skipped; disabled"),mu.resolve(Yu)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ai("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Yu):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Ai("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Si()<=P.DEBUG&&Ai("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),mu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),vc=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new dc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return gc(t,n)},t.prototype.removeReference=function(t,e,n){return gc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return gc(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return ic(t).Ot((function(r){return ec(t,r,e).next((function(t){return t&&(n=!0),mu.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),cc(t).delete([0,Ws(a.path)])}))}));i.push(u)}})).next((function(){return mu.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return gc(t,e)},t.prototype.we=function(t,e){var n,r=cc(t),i=_i.o;return r.$t({index:su.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==_i.o&&e(new oo(Ys(n)),i),i=s,n=a):i=_i.o})).next((function(){i!==_i.o&&e(new oo(Ys(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function gc(t,e){return cc(t).put(function(t,e){return new su(0,Ws(t.path),e)}(e,t.currentSequenceNumber))}var mc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){qi(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return Bi(this.inner)},t}(),yc=function(){function t(){this.changes=new mc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:ji.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:To.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?mu.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),bc=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Ic(t).put(Tc(e),n)},t.prototype.removeEntry=function(t,e){var n=Ic(t),r=Tc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Ic(t).get(Tc(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Ic(t).get(Tc(e)).next((function(t){return{document:n.ye(e,t),size:Zu(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Ya();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Ya(),i=new Ga(oo.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Zu(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return mu.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Ic(t).$t({range:r},(function(t,e,r){for(var a=oo.fromSegments(t);o&&oo.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Ya(),o=e.path.length+1,a={};if(n.isEqual(ji.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Lu(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=iu.collectionReadTimeIndex}return Ic(t).$t(a,(function(t,n,a){if(t.length===o){var s=xu(r.R,n);e.path.isPrefixOf(s.key.path)?ia(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new wc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return _c(t).get(ou.key).next((function(t){return Di(!!t),t}))},t.prototype.me=function(t,e){return _c(t).put(ou.key,e)},t.prototype.ye=function(t,e){if(e){var n=xu(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(ji.min()))return n}return To.newInvalidDocument(t)},t}(),wc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new mc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return i(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Wa((function(t,e){return Li(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=Pu(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Zu(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=Pu(e.Ie.R,To.newNoDocument(o,ji.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),mu.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(yc);function _c(t){return Nu(t,ou.store)}function Ic(t){return Nu(t,iu.store)}function Tc(t){return t.path.toArray()}var Ec=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Di(n<r&&n>=0&&r<=11);var o=new yu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore($s.store)}(t),function(t){t.createObjectStore(Zs.store,{keyPath:Zs.keyPath}),t.createObjectStore(tu.store,{keyPath:tu.keyPath,autoIncrement:!0}).createIndex(tu.userMutationsIndex,tu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(eu.store)}(t),Sc(t),function(t){t.createObjectStore(iu.store)}(t));var a=mu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(su.store),t.deleteObjectStore(au.store),t.deleteObjectStore(uu.store)}(t),Sc(t)),a=a.next((function(){return function(t){var e=t.store(uu.store),n=new uu(0,0,ji.min().toTimestamp(),0);return e.put(uu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(tu.store).Nt().next((function(n){t.deleteObjectStore(tu.store),t.createObjectStore(tu.store,{keyPath:tu.keyPath,autoIncrement:!0}).createIndex(tu.userMutationsIndex,tu.userMutationsKeyPath,{unique:!0});var r=e.store(tu.store),i=n.map((function(t){return r.put(t)}));return mu.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(hu.store,{keyPath:hu.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(ou.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(iu.store);e.createIndex(iu.readTimeIndex,iu.readTimeIndexPath,{unique:!1}),e.createIndex(iu.collectionReadTimeIndex,iu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(lu.store,{keyPath:lu.keyPath})}(t),function(t){t.createObjectStore(fu.store,{keyPath:fu.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(iu.store).$t((function(t,n){e+=Zu(n)})).next((function(){var n=new ou(e);return t.store(ou.store).put(ou.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Zs.store),r=t.store(tu.store);return n.Nt().next((function(n){return mu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(tu.userMutationsIndex,i).next((function(r){return mu.forEach(r,(function(r){Di(r.userId===n.userId);var i=ju(e.R,r);return $u(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(su.store),n=t.store(iu.store);return t.store(uu.store).get(uu.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Gi(n),a=function(t){return[0,Ws(t)]}(o);r.push(e.get(a).next((function(n){return n?mu.resolve():function(n){return e.put(new su(0,Ws(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return mu.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(cu.store,{keyPath:cu.keyPath});var n=e.store(cu.store),r=new Wu,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Ws(i)})}};return e.store(iu.store).$t({Ft:!0},(function(t,e){var n=new Gi(t);return i(n.popLast())})).next((function(){return e.store(eu.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Ys(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(au.store);return n.$t((function(t,r){var i=Vu(r),o=qu(e.R,i);return n.put(o)}))},t}();function Sc(t){t.createObjectStore(su.store,{keyPath:su.keyPath}).createIndex(su.documentTargetsIndex,su.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(au.store,{keyPath:au.keyPath}).createIndex(au.queryTargetsIndexName,au.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(uu.store)}var Ac="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kc=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Ti(Ii.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vc(this,i),this.Le=n+"main",this.R=new Ru(u),this.Be=new bu(this.Le,11,new Ec(this.R)),this.qe=new ac(this.referenceDelegate,this.R),this.Ut=new Qu,this.Ue=function(t,e){return new bc(t,e)}(this.R,this.Ut),this.Ke=new Ku,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&ki("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ti(Ii.FAILED_PRECONDITION,Ac);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new _i(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return a(e,void 0,void 0,(function(){return s(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return a(e,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return a(e,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Oc(e).put(new hu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Iu(e))return Ai("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ai("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Nc(t).get($s.key).next((function(t){return mu.resolve(e.tn(t))}))},t.prototype.en=function(t){return Oc(t).delete(this.clientId)},t.prototype.nn=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i=this;return s(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Nu(t,hu.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return mu.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?mu.resolve(!0):Nc(t).get($s.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Ti(Ii.FAILED_PRECONDITION,Ac);return!1}}return!(!e.networkEnabled||!e.inForeground)||Oc(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ai("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return a(this,void 0,void 0,(function(){var t=this;return s(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[$s.store,hu.store],(function(e){var n=new ku(e,_i.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Oc(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return tc.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ai("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,pu,(function(o){return i=new ku(o,r.Ne?r.Ne.next():_i.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw ki("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Ti(Ii.FAILED_PRECONDITION,du);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Nc(t).get($s.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ti(Ii.FAILED_PRECONDITION,Ac)}))},t.prototype.Ze=function(t){var e=new $s(this.clientId,this.allowTabSynchronization,Date.now());return Nc(t).put($s.key,e)},t.yt=function(){return bu.yt()},t.prototype.Xe=function(t){var e=this,n=Nc(t);return n.get($s.key).next((function(t){return e.tn(t)?(Ai("IndexedDbPersistence","Releasing primary lease."),n.delete($s.key)):mu.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ki("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),!y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Ai("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ki("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){ki("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Nc(t){return Nu(t,$s.store)}function Oc(t){return Nu(t,hu.store)}function Cc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Dc=function(t,e){this.progress=t,this.wn=e},Rc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return oo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Jo(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new oo(e)).next((function(t){var e=$a();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=$a();return this.Ut.getCollectionParents(t,i).next((function(a){return mu.forEach(a,(function(a){var s=function(t,e){return new Go(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c);null==h&&(h=To.newInvalidDocument(c),r=r.insert(c,h)),Na(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){ia(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=ns(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof xa&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),xc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=ns(),i=ns(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Pc=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(ji.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(Wo(e)||Qo(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(Si()<=P.DEBUG&&Ai("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ra(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Wa(oa(t));return e.forEach((function(e,r){ia(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Si()<=P.DEBUG&&Ai("QueryEngine","Using full collection scan to execute query:",ra(e)),this.Sn.getDocumentsMatchingQuery(t,e,ji.min())},t}(),Lc=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new Ga(Li),this.Fn=new mc((function(t){return Ao(t)}),ko),this.$n=ji.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Rc(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();function Mc(t,e,n,r){return new Lc(t,e,n,r)}function Uc(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o;return s(this,(function(a){switch(a.label){case 0:return n=Ri(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new Rc(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=ns(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];a=a.add(y.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Fc(t,e){var n=Ri(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=mu.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Di(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function jc(t){var e=Ri(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Vc(t,e){var n=Ri(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Di(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=Ya();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(qc(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(ji.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return mu.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.kn=i,t}))}function qc(t,e,n,r,i){var o=ns();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Ya();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(ji.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Ai("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Bc(t,e){var n=Ri(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Kc(t,e){var n=Ri(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,mu.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Du(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function Gc(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,a;return s(this,(function(s){switch(s.label){case 0:r=Ri(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Iu(a=s.sent()))throw a;return Ai("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function Hc(t,e,n){var r=Ri(t),i=ji.min(),o=ns();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Ri(t),i=r.Fn.get(n);return void 0!==i?mu.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,Zo(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:ji.min(),n?o:ns())})).next((function(t){return{documents:t,Bn:o}}))}))}function zc(t,e){var n=Ri(t),r=Ri(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Wc(t){var e=Ri(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Ri(t),i=Ya(),o=Lu(n),a=Ic(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:iu.readTimeIndex,range:s},(function(t,e){var n=xu(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Mu(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Qc(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){return[2,(e=Ri(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Ic(t),n=ji.min();return e.$t({index:iu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Mu(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function Xc(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,a,u,c,h,l,f,p,d;return s(this,(function(s){switch(s.label){case 0:for(i=Ri(t),o=ns(),a=Ya(),u=ts(),c=0,h=n;c<h.length;c++)l=h[c],f=e.qn(l.metadata.name),l.document&&(o=o.add(f)),a=a.insert(f,e.Un(l)),u=u.insert(f,e.Kn(l.metadata.readTime));return p=i.On.newChangeBuffer({trackRemovals:!0}),[4,Kc(i,function(t){return Zo(zo(Gi.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=s.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return qc(t,p,a,ji.min(),u).next((function(e){return p.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Yc(t,e,n){return void 0===n&&(n=ns()),a(this,void 0,void 0,(function(){var r,i;return s(this,(function(o){switch(o.label){case 0:return[4,Kc(t,Zo(Bu(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ri(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=ws(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var a=r.withResumeToken(Qi.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var Jc=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return mu.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:ws(n.createTime)}),mu.resolve()},t.prototype.getNamedQuery=function(t,e){return mu.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Bu(t.bundledQuery),readTime:ws(t.readTime)}}(e)),mu.resolve()},t}(),$c=function(){function t(){this.Wn=new Wa(Zc.Gn),this.zn=new Wa(Zc.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Zc(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Zc(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new oo(new Gi([])),r=new Zc(n,t),i=new Zc(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new oo(new Gi([])),n=new Zc(e,t),r=new Zc(e,t+1),i=ns();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Zc(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Zc=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return oo.comparator(t.key,e.key)||Li(t.ns,e.ns)},t.Hn=function(t,e){return Li(t.ns,e.ns)||oo.comparator(t.key,e.key)},t}(),th=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Wa(Zc.Gn)}return t.prototype.checkEmpty=function(t){return mu.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Ou(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Zc(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return mu.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return mu.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return mu.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return mu.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return mu.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Zc(e,0),i=new Zc(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),mu.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Wa(Li);return e.forEach((function(t){var e=new Zc(t,0),i=new Zc(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),mu.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;oo.isDocumentKey(i)||(i=i.child(""));var o=new Zc(new oo(i),0),a=new Wa(Li);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),mu.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Di(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return mu.forEach(e.mutations,(function(i){var o=new Zc(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Zc(e,0),r=this.rs.firstAfterOrEqual(n);return mu.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,mu.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),eh=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ga(oo.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return mu.resolve(n?n.document.clone():To.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Ya();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():To.newInvalidDocument(t))})),mu.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Ya(),i=new oo(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||ia(e,c)&&(r=r.insert(c.key,c.clone()))}return mu.resolve(r)},t.prototype.fs=function(t,e){return mu.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new nh(this)},t.prototype.getSize=function(t){return mu.resolve(this.size)},t}(),nh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return i(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),mu.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(yc),rh=function(){function t(t){this.persistence=t,this.ds=new mc((function(t){return Ao(t)}),ko),this.lastRemoteSnapshotVersion=ji.min(),this.highestTargetId=0,this.ws=0,this._s=new $c,this.targetCount=0,this.ys=oc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),mu.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return mu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return mu.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),mu.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),mu.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new oc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,mu.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),mu.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,mu.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),mu.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return mu.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return mu.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),mu.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),mu.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),mu.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return mu.resolve(n)},t.prototype.containsKey=function(t,e){return mu.resolve(this._s.containsKey(e))},t}(),ih=function(){function t(t,e){var n=this;this.gs={},this.Ne=new _i(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new rh(this),this.Ut=new zu,this.Ue=function(t,e){return new eh(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Ru(e),this.Ke=new Jc(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new th(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ai("MemoryPersistence","Starting transaction:",t);var i=new oh(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return mu.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),oh=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return i(e,t),e}(vu),ah=function(){function t(t){this.persistence=t,this.As=new $c,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Ci()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),mu.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),mu.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),mu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mu.forEach(this.vs,(function(r){var i=oo.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return mu.or([function(){return mu.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),sh=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function uh(t,e){return"firestore_clients_"+t+"_"+e}function ch(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function hh(t,e){return"firestore_targets_"+t+"_"+e}sh.UNAUTHENTICATED=new sh(null),sh.GOOGLE_CREDENTIALS=new sh("google-credentials-uid"),sh.FIRST_PARTY=new sh("first-party-uid"),sh.MOCK_USER=new sh("mock-user");var lh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ti(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(ki("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),fh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ti(i.error.code,i.error.message)),o?new t(e,i.state,r):(ki("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ph=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=is(),a=0;i&&a<r.activeTargetIds.length;++a)i=io(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(ki("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),dh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ki("SharedClientState","Failed to parse online state: "+e),null)},t}(),vh=function(){function t(){this.activeTargetIds=is()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),gh=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Ga(Li),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=uh(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new vh),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,u,c,h,l,f=this;return s(this,(function(s){switch(s.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=s.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(uh(this.persistenceKey,r)))&&(o=ph.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(u=this.js(a))&&this.Ws(u),c=0,h=this.$s;c<h.length;c++)l=h[c],this.ks(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(hh(this.persistenceKey,t));if(n){var r=fh.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(hh(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ai("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ai("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ai("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ai("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void ki("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return a(e,void 0,void 0,(function(){var t,e,r,i,o,a;return s(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=_i.o;if(null!=t)try{var n=JSON.parse(t);Di("number"==typeof n),e=n}catch(t){ki("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==_i.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new lh(this.currentUser,t,e,n),i=ch(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=ch(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=hh(this.persistenceKey,t),i=new fh(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return ph.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return lh.Vs(new sh(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return fh.Vs(r,e)},t.prototype.js=function(t){return dh.Vs(t)},t.prototype.ii=function(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ai("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=is();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),mh=function(){function t(){this.li=new vh,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new vh,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),yh=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),bh=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ai("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ai("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),wh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},_h=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Ih=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return i(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var a=new bi;a.listenOnce(di.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case pi.NO_ERROR:var e=a.getResponseJson();Ai("Connection","XHR received:",JSON.stringify(e)),i(e);break;case pi.TIMEOUT:Ai("Connection",'RPC "'+t+'" timed out'),o(new Ti(Ii.DEADLINE_EXCEEDED,"Request time out"));break;case pi.HTTP_ERROR:var n=a.getStatus();if(Ai("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ii).indexOf(e)>=0?e:Ii.UNKNOWN}(r.status);o(new Ti(s,r.message))}else o(new Ti(Ii.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ti(Ii.UNAVAILABLE,"Connection failed."));break;default:Ci()}}finally{Ai("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=li(),i=fi(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new mi({})),this.ki(o.initMessageHeaders,e),"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())||"object"===typeof navigator&&"ReactNative"===navigator.product||m().indexOf("Electron/")>=0||function(){var t=m();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||m().indexOf("MSAppHost/")>=0||function(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");Ai("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,h=new _h({Ei:function(t){c?Ai("Connection","Not sending because WebChannel is closed:",t):(u||(Ai("Connection","Opening WebChannel transport."),s.open(),u=!0),Ai("Connection","WebChannel sending:",t),s.send(t))},Ti:function(){return s.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(s,yi.EventType.OPEN,(function(){c||Ai("Connection","WebChannel transport opened.")})),l(s,yi.EventType.CLOSE,(function(){c||(c=!0,Ai("Connection","WebChannel transport closed"),h.Vi())})),l(s,yi.EventType.ERROR,(function(t){c||(c=!0,Ni("Connection","WebChannel transport errored:",t),h.Vi(new Ti(Ii.UNAVAILABLE,"The operation could not be completed")))})),l(s,yi.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Di(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ai("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Ua[t];if(void 0!==e)return Ka(e)}(o),u=i.message;void 0===a&&(a=Ii.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.Vi(new Ti(a,u)),s.close()}else Ai("Connection","WebChannel received:",n),h.Si(n)}})),l(i,vi.STAT_EVENT,(function(t){t.stat===gi.PROXY?Ai("Connection","Detected buffering proxy"):t.stat===gi.NOPROXY&&Ai("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ai("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return Ai("RestConnection","Received: ",t),t}),(function(e){throw Ni("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=wh[t];return this.Di+"/v1/"+e+":"+n},t}());function Th(){return"undefined"!=typeof window?window:null}function Eh(){return"undefined"!=typeof document?document:null}function Sh(t){return new gs(t,!0)}var Ah=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Ai("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),kh=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Ah(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Ii.RESOURCE_EXHAUSTED?(ki(e.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Ii.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Ti(Ii.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return a(t,void 0,void 0,(function(){return s(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Ai("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Ai("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Nh=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return i(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ci()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Di(void 0===e||"string"==typeof e),Qi.fromBase64String(e||"")):(Di(void 0===e||e instanceof Uint8Array),Qi.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ii.UNKNOWN:Ka(t.code);return new Ti(e,t.message||"")}(s);n=new cs(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Es(t,r.document.name),o=ws(r.document.updateTime);var s=new _o({mapValue:{fields:r.document.fields}}),u=(a=To.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new ss(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Es(t,r.document),o=r.readTime?ws(r.readTime):ji.min(),s=To.newNoDocument(i,o),a=r.removedTargetIds||[],n=new ss([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Es(t,r.document),o=r.removedTargetIds||[],n=new ss([],o,i,null);else{if(!("filter"in e))return Ci();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new qa(r),o=h.targetId,n=new us(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return ji.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ji.min():e.readTime?ws(e.readTime):ji.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=ks(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=No(r)?{documents:xs(t,r)}:{query:Ps(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=ys(t,e.resumeToken):e.snapshotVersion.compareTo(ji.min())>0&&(n.readTime=ms(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ci()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=ks(this.R),e.removeTarget=t,this.cr(e)},e}(kh),Oh=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return i(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Di(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Di(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?ws(t.updateTime):ws(e);return n.isEqual(ji.min())&&(n=ws(e)),new Ta(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=ws(t.commitTime);return this.listener.Tr(n,e)}return Di(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=ks(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Ds(e.R,t)}))};this.cr(n)},e}(kh),Ch=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return i(e,t),e.prototype.br=function(){if(this.Rr)throw new Ti(Ii.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Ii.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ti(Ii.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Ii.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ti(Ii.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Dh=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(ki(e),this.Vr=!1):Ai("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Rh=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return a(o,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return qh(this)?(Ai("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return(e=Ri(t)).Or.add(4),[4,Ph(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,xh(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Dh(n,r)};function xh(t){return a(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:if(!qh(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Ph(t){return a(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Lh(t,e){var n=Ri(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Vh(n)?jh(n):nl(n).er()&&Uh(n,e))}function Mh(t,e){var n=Ri(t),r=nl(n);n.$r.delete(e),r.er()&&Fh(n,e),0===n.$r.size&&(r.er()?r.ir():qh(n)&&n.Br.set("Unknown"))}function Uh(t,e){t.qr.U(e.targetId),nl(t).mr(e)}function Fh(t,e){t.qr.U(e),nl(t).yr(e)}function jh(t){t.qr=new ls({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),nl(t).start(),t.Br.Sr()}function Vh(t){return qh(t)&&!nl(t).tr()&&t.$r.size>0}function qh(t){return 0===Ri(t).Or.size}function Bh(t){t.qr=void 0}function Kh(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){return t.$r.forEach((function(e,n){Uh(t,e)})),[2]}))}))}function Gh(t,e){return a(this,void 0,void 0,(function(){return s(this,(function(n){return Bh(t),Vh(t)?(t.Br.Nr(e),jh(t)):t.Br.set("Unknown"),[2]}))}))}function Hh(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o;return s(this,(function(u){switch(u.label){case 0:if(t.Br.set("Online"),!(e instanceof cs&&2===e.state&&e.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o;return s(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return u.sent(),[3,5];case 3:return r=u.sent(),Ai("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,zh(t,r)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ss?t.qr.X(e):e instanceof us?t.qr.rt(e):t.qr.et(e),n.isEqual(ji.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,jc(t.localStore)];case 8:return i=u.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Qi.EMPTY_BYTE_STRING,n.snapshotVersion)),Fh(t,e);var r=new Du(n.target,e,1,n.sequenceNumber);Uh(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return Ai("RemoteStore","Failed to raise snapshot:",o=u.sent()),[4,zh(t,o)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function zh(t,e,n){return a(this,void 0,void 0,(function(){var r=this;return s(this,(function(i){switch(i.label){case 0:if(!Iu(e))throw e;return t.Or.add(1),[4,Ph(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return jc(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return a(r,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return Ai("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,xh(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Wh(t,e){return e().catch((function(n){return zh(t,n,e)}))}function Qh(t){return a(this,void 0,void 0,(function(){var e,n,r,i,o;return s(this,(function(a){switch(a.label){case 0:e=Ri(t),n=rl(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return qh(t)&&t.Fr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Bc(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=rl(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,zh(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Xh(e)&&Yh(e),[2]}}))}))}function Xh(t){return qh(t)&&!rl(t).tr()&&t.Fr.length>0}function Yh(t){rl(t).start()}function Jh(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){return rl(t).Ar(),[2]}))}))}function $h(t){return a(this,void 0,void 0,(function(){var e,n,r,i;return s(this,(function(o){for(e=rl(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Zh(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return s(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=Cu.from(r,e,n),[4,Wh(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Qh(t)];case 2:return o.sent(),[2]}}))}))}function tl(t,e){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return e&&rl(t).pr?[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return Ba(r=e.code)&&r!==Ii.ABORTED?(n=t.Fr.shift(),rl(t).sr(),[4,Wh(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Qh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Xh(t)&&Yh(t),[2]}}))}))}function el(t,e){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return n=Ri(t),e?(n.Or.delete(2),[4,xh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Ph(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function nl(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Ri(t);return r.br(),new Nh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Kh.bind(null,t),Ri:Gh.bind(null,t),_r:Hh.bind(null,t)}),t.Mr.push((function(n){return a(e,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Vh(t)?jh(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Bh(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function rl(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Ri(t);return r.br(),new Oh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Jh.bind(null,t),Ri:tl.bind(null,t),Ir:$h.bind(null,t),Tr:Zh.bind(null,t)}),t.Mr.push((function(n){return a(e,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Qh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Ai("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var il=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new gu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ti(Ii.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ol(t,e){if(ki("AsyncQueue",e+": "+t),Iu(t))return new Ti(Ii.UNAVAILABLE,e+": "+t);throw t}var al=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||oo.comparator(e.key,n.key)}:function(t,e){return oo.comparator(t.key,e.key)},this.keyedMap=$a(),this.sortedSet=new Ga(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),sl=function(){function t(){this.Qr=new Ga(oo.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Ci():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),ul=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,al.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ea(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),cl=function(){this.Wr=void 0,this.listeners=[]},hl=function(){this.queries=new mc((function(t){return na(t)}),ea),this.onlineState="Unknown",this.Gr=new Set};function ll(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u,c;return s(this,(function(s){switch(s.label){case 0:if(n=Ri(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new cl),!i)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=s.sent(),[3,4];case 3:return u=s.sent(),c=ol(u,"Initialization of query '"+ra(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&vl(n),[2]}}))}))}function fl(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a;return s(this,(function(s){return n=Ri(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function pl(t,e){for(var n=Ri(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(a)&&(r=!0);u.Wr=a}}r&&vl(n)}function dl(t,e,n){var r=Ri(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function vl(t){t.Gr.forEach((function(t){t.next()}))}var gl=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ul(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=ul.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),ml=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),yl=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Es(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Cs(this.R,t.document,!1):To.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return ws(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=bl(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new yl(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||ns()).add(a);e.set(c,h)}}return e},t.prototype.complete=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i;return s(this,(function(o){switch(o.label){case 0:return[4,Xc(this.localStore,new yl(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Yc(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Dc(Object.assign({},this.progress),t))]}}))}))}}();function bl(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var wl=function(t){this.key=t},_l=function(t){this.key=t},Il=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=ns(),this.mutatedKeys=ns(),this.lo=oa(t),this.fo=new al(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new sl,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Wo(this.query)&&i.size===this.query.limit?i.last():null,c=Qo(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=ia(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(s=!0)),d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Wo(this.query)||Qo(this.query))for(;a.size>this.query.limit;){var h=Wo(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ci()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new ul(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new sl,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=ns(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new _l(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new wl(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=ns();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return ul.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Tl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},El=function(t){this.key=t,this.bo=!1},Sl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new mc((function(t){return na(t)}),ea),this.Vo=new Map,this.So=new Set,this.Do=new Ga(oo.comparator),this.Co=new Map,this.No=new $c,this.xo={},this.ko=new Map,this.Fo=oc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Al(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u;return s(this,(function(s){switch(s.label){case 0:return n=ef(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Kc(n.localStore,Zo(e))];case 2:return a=s.sent(),u=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,kl(n,e,r,"current"===u)];case 3:i=s.sent(),n.isPrimaryClient&&Lh(n.remoteStore,a),s.label=4;case 4:return[2,i]}}))}))}function kl(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,u,c,h,l;return s(this,(function(f){switch(f.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,a;return s(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,Hc(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Vl(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,Hc(t.localStore,e,!0)];case 1:return i=f.sent(),o=new Il(e,i.Bn),u=o._o(i.documents),c=as.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),h=o.applyChanges(u,t.isPrimaryClient,c),Vl(t,n,h.To),l=new Tl(e,n,o),[2,(t.Po.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),h.snapshot)]}}))}))}function Nl(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return s(this,(function(o){switch(o.label){case 0:return n=Ri(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!ea(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Gc(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Mh(n.remoteStore,r.targetId),Fl(n,r.targetId)})).catch(hc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Fl(n,r.targetId),[4,Gc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Ol(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,a;return s(this,(function(s){switch(s.label){case 0:r=nf(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ri(t),i=Fi.now(),o=e.reduce((function(t,e){return t.add(e.key)}),ns());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=Oa(c,n.get(c.key));null!=h&&a.push(new xa(c.key,h,Io(h.value.mapValue),Ea.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ga(Li)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Kl(r,i.changes)];case 3:return s.sent(),[4,Qh(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=ol(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Cl(t,e){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:n=Ri(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Vc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Di(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Di(r.bo):t.removedDocuments.size>0&&(Di(r.bo),r.bo=!1))})),[4,Kl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,hc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Dl(t,e,n){var r=Ri(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Ri(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&vl(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Rl(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,a,u,c;return s(this,(function(s){switch(s.label){case 0:return(r=Ri(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new Ga(oo.comparator)).insert(o,To.newNoDocument(o,ji.min())),u=ns().add(o),c=new os(ji.min(),new Map,new Wa(Li),a,u),[4,Cl(r,c)]):[3,2];case 1:return s.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Bl(r),[3,4];case 2:return[4,Gc(r.localStore,e,!1).then((function(){return Fl(r,e,n)})).catch(hc)];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))}function xl(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return s(this,(function(o){switch(o.label){case 0:n=Ri(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Fc(n.localStore,e)];case 2:return i=o.sent(),Ul(n,r,null),Ml(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Kl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,hc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Pl(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return s(this,(function(o){switch(o.label){case 0:r=Ri(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ri(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Di(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Ul(r,e,n),Ml(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Kl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,hc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ll(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a;return s(this,(function(s){switch(s.label){case 0:qh((n=Ri(t)).remoteStore)||Ai("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Ri(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=s.sent(),a=ol(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Ml(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function Ul(t,e,n){var r=Ri(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Fl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||jl(t,e)}))}function jl(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Mh(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Bl(t))}function Vl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof wl?(t.No.addReference(o.key,e),ql(t,o)):o instanceof _l?(Ai("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||jl(t,o.key)):Ci()}}function ql(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ai("SyncEngine","New document in limbo: "+n),t.So.add(r),Bl(t))}function Bl(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new oo(Gi.fromString(e)),r=t.Fo.next();t.Co.set(r,new El(n)),t.Do=t.Do.insert(n,r),Lh(t.remoteStore,new Du(Zo(zo(n.path)),r,2,_i.o))}}function Kl(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,u;return s(this,(function(c){switch(c.label){case 0:return r=Ri(t),i=[],o=[],u=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){u.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=xc.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(u)]);case 1:return c.sent(),r.vo._r(i),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u,c,h,l;return s(this,(function(s){switch(s.label){case 0:n=Ri(t),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return mu.forEach(e,(function(e){return mu.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return mu.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return s.sent(),[3,4];case 3:if(!Iu(r=s.sent()))throw r;return Ai("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],u=a.targetId,a.fromCache||(c=n.kn.get(u),h=c.snapshotVersion,l=c.withLastLimboFreeSnapshotVersion(h),n.kn=n.kn.insert(u,l));return[2]}}))}))}(r.localStore,o)];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))}function Gl(t,e){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return(n=Ri(t)).currentUser.isEqual(e)?[3,3]:(Ai("SyncEngine","User change. New user:",e.toKey()),[4,Uc(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new Ti(Ii.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Kl(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Hl(t,e){var n=Ri(t),r=n.Co.get(e);if(r&&r.bo)return ns().add(r.key);var i=ns(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function zl(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return s(this,(function(o){switch(o.label){case 0:return[4,Hc((n=Ri(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Vl(n,e.targetId,i.To),i)]}}))}))}function Wl(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){return[2,Wc((e=Ri(t)).localStore).then((function(t){return Kl(e,t)}))]}))}))}function Ql(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o;return s(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=Ri(t),r=Ri(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):mu.resolve(null)}))}))}((i=Ri(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Qh(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ul(i,e,r||null),Ml(i,e),function(t,e){Ri(Ri(t)._n).Gt(e)}(i.localStore,e)):Ci(),a.label=4;case 4:return[4,Kl(i,o)];case 5:return a.sent(),[3,7];case 6:Ai("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function Xl(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u,c,h;return s(this,(function(s){switch(s.label){case 0:return ef(n=Ri(t)),nf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Yl(n,r.toArray())]);case 1:return i=s.sent(),n.$o=!0,[4,el(n.remoteStore,!0)];case 2:for(s.sent(),o=0,a=i;o<a.length;o++)u=a[o],Lh(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],h=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):h=h.then((function(){return Fl(n,e),Gc(n.localStore,e,!0)})),Mh(n.remoteStore,e)})),[4,h]);case 4:return s.sent(),[4,Yl(n,c)];case 5:return s.sent(),function(t){var e=Ri(t);e.Co.forEach((function(t,n){Mh(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Ga(oo.comparator)}(n),n.$o=!1,[4,el(n.remoteStore,!1)];case 6:s.sent(),s.label=7;case 7:return[2]}}))}))}function Yl(t,e,n){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u,c,h,l,f,p,d,v,g;return s(this,(function(s){switch(s.label){case 0:n=Ri(t),r=[],i=[],o=0,a=e,s.label=1;case 1:return o<a.length?(u=a[o],c=void 0,(h=n.Vo.get(u))&&0!==h.length?[4,Kc(n.localStore,Zo(h[0]))]:[3,7]):[3,13];case 2:c=s.sent(),l=0,f=h,s.label=3;case 3:return l<f.length?(p=f[l],d=n.Po.get(p),[4,zl(n,d)]):[3,6];case 4:(v=s.sent()).snapshot&&i.push(v.snapshot),s.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,zc(n.localStore,u)];case 8:return g=s.sent(),[4,Kc(n.localStore,g)];case 9:return c=s.sent(),[4,kl(n,Jl(g),u,!1)];case 10:s.sent(),s.label=11;case 11:r.push(c),s.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Jl(t){return Ho(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $l(t){var e=Ri(t);return Ri(Ri(e.localStore).persistence).fn()}function Zl(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,a;return s(this,(function(s){switch(s.label){case 0:return(i=Ri(t)).$o?(Ai("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Wc(i.localStore)];case 3:return o=s.sent(),a=os.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Kl(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Gc(i.localStore,e,!0)];case 6:return s.sent(),Fl(i,e,r),[3,8];case 7:Ci(),s.label=8;case 8:return[2]}}))}))}function tf(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,a,u,c,h,l,f,p;return s(this,(function(d){switch(d.label){case 0:if(!(r=ef(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(Ai("SyncEngine","Adding an already active target "+a),[3,5]):[4,zc(r.localStore,a)]):[3,6];case 2:return u=d.sent(),[4,Kc(r.localStore,u)];case 3:return c=d.sent(),[4,kl(r,Jl(u),c.targetId,!1)];case 4:d.sent(),Lh(r.remoteStore,c),d.label=5;case 5:return i++,[3,1];case 6:h=function(t){return s(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Gc(r.localStore,t,!1).then((function(){Mh(r.remoteStore,t),Fl(r,t)})).catch(hc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,f=n,d.label=7;case 7:return l<f.length?(p=f[l],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function ef(t){var e=Ri(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rl.bind(null,e),e.vo._r=pl.bind(null,e.eventManager),e.vo.Mo=dl.bind(null,e.eventManager),e}function nf(t){var e=Ri(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pl.bind(null,e),e}var rf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.R=Sh(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Mc(this.persistence,new Pc,t.initialUser,this.R)},t.prototype.qo=function(t){return new ih(ah.bs,this.R)},t.prototype.Bo=function(t){return new mh},t.prototype.terminate=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),of=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return i(e,t),e.prototype.initialize=function(e){return a(this,void 0,void 0,(function(){var n=this;return s(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,Qc(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,nf(this.Qo.syncEngine)];case 4:return r.sent(),[4,Qh(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Mc(this.persistence,new Pc,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new pc(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Cc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ju.withCacheSize(this.cacheSizeBytes):Ju.DEFAULT;return new kc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Th(),Eh(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new mh},e}(rf),af=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return i(e,t),e.prototype.initialize=function(e){return a(this,void 0,void 0,(function(){var n,r=this;return s(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof gh?(this.sharedClientState.syncEngine={ui:Ql.bind(null,n),ai:Zl.bind(null,n),hi:tf.bind(null,n),fn:$l.bind(null,n),ci:Wl.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return a(r,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,Xl(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Th();if(!gh.yt(e))throw new Ti(Ii.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Cc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new gh(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(of),sf=function(){function t(){}return t.prototype.initialize=function(t,e){return a(this,void 0,void 0,(function(){var n=this;return s(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Dl(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Gl.bind(null,this.syncEngine),[4,el(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new hl},t.prototype.createDatastore=function(t){var e,n=Sh(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Ih(e));return function(t,e,n){return new Ch(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Dl(a.syncEngine,t,0)},o=bh.yt()?new bh:new yh,new Rh(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new Sl(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=Ri(t),Ai("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Ph(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();var uf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),cf=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new gu,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return a(this,void 0,void 0,(function(){var t,e,n,r;return s(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new ml(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return a(this,void 0,void 0,(function(){var t,e;return s(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return a(this,void 0,void 0,(function(){var t,e;return s(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return s(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ti(Ii.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u;return s(this,(function(s){switch(s.label){case 0:return n=Ri(t),r=ks(n.R)+"/documents",i={documents:e.map((function(t){return Ts(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=s.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Di(!!e.found),e.found.name,e.found.updateTime;var n=Es(t,e.found.name),r=ws(e.found.updateTime),i=new _o({mapValue:{fields:e.found.fields}});return To.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Di(!!e.missing),Di(!!e.readTime);var n=Es(t,e.missing),r=ws(e.readTime);return To.newNoDocument(n,r)}(t,e):Ci()}(n.R,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());Di(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new ja(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return a(this,void 0,void 0,(function(){var t,e=this;return s(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=oo.fromPath(n);e.mutations.push(new Va(r,e.precondition(r)))})),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return s(this,(function(o){switch(o.label){case 0:return n=Ri(t),r=ks(n.R)+"/documents",i={writes:e.map((function(t){return Ds(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Ci();e=ji.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ti(Ii.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ea.updateTime(e):Ea.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ji.min()))throw new Ti(Ii.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ea.updateTime(e)}return Ea.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),hf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Ah(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return a(t,void 0,void 0,(function(){var t,e,n=this;return s(this,(function(r){return t=new cf(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!no(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ba(e)}return!1},t}(),lf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=sh.UNAUTHENTICATED,this.clientId=Pi.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return a(r,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return Ai("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ti(Ii.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new gu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return a(t,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ol(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function ff(t,e){return a(this,void 0,void 0,(function(){var n,r,i=this;return s(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ai("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return a(i,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Uc(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function pf(t,e){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,df(t)];case 1:return n=i.sent(),Ai("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return(n=Ri(t)).asyncQueue.verifyOperationInProgress(),Ai("RemoteStore","RemoteStore received new credentials"),r=qh(n),n.Or.add(3),[4,Ph(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,xh(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function df(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ai("FirestoreClient","Using default OfflineComponentProvider"),[4,ff(t,new rf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function vf(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ai("FirestoreClient","Using default OnlineComponentProvider"),[4,pf(t,new sf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function gf(t){return df(t).then((function(t){return t.persistence}))}function mf(t){return df(t).then((function(t){return t.localStore}))}function yf(t){return vf(t).then((function(t){return t.remoteStore}))}function bf(t){return vf(t).then((function(t){return t.syncEngine}))}function wf(t){return a(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return[4,vf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Al.bind(null,e.syncEngine),n.onUnlisten=Nl.bind(null,e.syncEngine),n)]}}))}))}function _f(t,e,n){var r=this;void 0===n&&(n={});var i=new gu;return t.asyncQueue.enqueueAndForget((function(){return a(r,void 0,void 0,(function(){var r;return s(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new uf({next:function(o){e.enqueueAndForget((function(){return fl(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Ti(Ii.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Ti(Ii.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new gl(zo(n.path),o,{includeMetadataChanges:!0,so:!0});return ll(t,a)},[4,wf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function If(t,e,n){var r=this;void 0===n&&(n={});var i=new gu;return t.asyncQueue.enqueueAndForget((function(){return a(r,void 0,void 0,(function(){var r;return s(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new uf({next:function(n){e.enqueueAndForget((function(){return fl(t,a)})),n.fromCache&&"server"===r.source?i.reject(new Ti(Ii.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new gl(n,o,{includeMetadataChanges:!0,so:!0});return ll(t,a)},[4,wf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Tf=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},Ef=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Sf=new Map,Af=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},kf=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(sh.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Nf=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Of=function(){function t(t){var e=this;this.currentUser=sh.UNAUTHENTICATED,this.oc=new gu,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Ai("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Ai("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Ai("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Di("string"==typeof n.accessToken),new Af(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return a(n,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Di(null===t||"string"==typeof t),new sh(t)},t}(),Cf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=sh.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Df=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Cf(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(sh.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Rf(t,e,n){if(!n)throw new Ti(Ii.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function xf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ti(Ii.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Pf(t,e,n,r){if(!0===e&&!0===r)throw new Ti(Ii.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Lf(t){if(!oo.isDocumentKey(t))throw new Ti(Ii.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Mf(t){if(oo.isDocumentKey(t))throw new Ti(Ii.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Uf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ci()}function Ff(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ti(Ii.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Uf(t);throw new Ti(Ii.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function jf(t,e){if(e<=0)throw new Ti(Ii.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Vf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ti(Ii.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ti(Ii.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Pf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),qf=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vf({}),this._settingsFrozen=!1,t instanceof Ef?(this._databaseId=t,this._credentials=new kf):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ti(Ii.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ef(t.options.projectId)}(t),this._credentials=new Of(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ti(Ii.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ti(Ii.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vf(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new kf;switch(t.type){case"gapi":var e=t.client;return Di(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Df(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ti(Ii.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=Sf.get(this))&&(Ai("ComponentProvider","Removing Datastore"),Sf.delete(this),t.terminate()),Promise.resolve();var t},t}(),Bf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Gf(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Kf=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Gf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,zo(r))||this)._path=r,i.type="collection",i}return i(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Bf(this.firestore,null,new oo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Kf);function Hf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=k(t),Rf("collection","path",e),t instanceof qf)return Mf(n=Gi.fromString.apply(Gi,h([e],r))),new Gf(t,null,n);if(!(t instanceof Bf||t instanceof Gf))throw new Ti(Ii.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Mf(n=Gi.fromString.apply(Gi,h([t.path],r)).child(Gi.fromString(e))),new Gf(t.firestore,null,n)}function zf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=k(t),1===arguments.length&&(e=Pi.u()),Rf("doc","path",e),t instanceof qf)return Lf(n=Gi.fromString.apply(Gi,h([e],r))),new Bf(t,null,new oo(n));if(!(t instanceof Bf||t instanceof Gf))throw new Ti(Ii.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Lf(n=t._path.child(Gi.fromString.apply(Gi,h([e],r)))),new Bf(t.firestore,t instanceof Gf?t.converter:null,new oo(n))}function Wf(t,e){return t=k(t),e=k(e),(t instanceof Bf||t instanceof Gf)&&(e instanceof Bf||e instanceof Gf)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Qf(t,e){return t=k(t),e=k(e),t instanceof Kf&&e instanceof Kf&&t.firestore===e.firestore&&ea(t._query,e._query)&&t.converter===e.converter}var Xf=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Ah(this,"async_queue_retry"),this.Ic=function(){var e=Eh();e&&Ai("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Eh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Eh();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new gu;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return a(this,void 0,void 0,(function(){var t,e=this;return s(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Iu(t=n.sent()))throw t;return Ai("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,ki("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=il.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Ci()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return a(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Yf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new gu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Jf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Xf,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return i(e,t),e.prototype._terminate=function(){return this._firestoreClient||Zf(this),this._firestoreClient.terminate()},e}(qf);function $f(t){return t._firestoreClient||Zf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Zf(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Tf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new lf(t._credentials,t._queue,r)}function tp(t,e,n){var r=this,i=new gu;return t.asyncQueue.enqueue((function(){return a(r,void 0,void 0,(function(){var r;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ff(t,n)];case 1:return o.sent(),[4,pf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ii.FAILED_PRECONDITION||t.code===Ii.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function ep(t){if(t._initialized||t._terminated)throw new Ti(Ii.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var np=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ti(Ii.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zi(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),rp=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Qi.fromBase64String(e))}catch(e){throw new Ti(Ii.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Qi.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),ip=function(t){this._methodName=t},op=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ti(Ii.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ti(Ii.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Li(this._lat,t._lat)||Li(this._long,t._long)},t}(),ap=/^__.*__$/,sp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new xa(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ra(t,this.data,e,this.fieldTransforms)},t}(),up=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new xa(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function cp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ci()}}var hp=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return Cp(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(cp(this.Nc)&&ap.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),lp=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Sh(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new hp({Nc:t,methodName:e,qc:n,path:zi.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function fp(t){var e=t._freezeSettings(),n=Sh(t._databaseId);return new lp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pp(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Ap("Data must be an object, but it was:",a,r);var s,u,c=Ep(r,a);if(o.merge)s=new Wi(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=kp(e,f[l],n);if(!a.contains(p))throw new Ti(Ii.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Dp(h,p)||h.push(p)}s=new Wi(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new sp(new _o(c),s,u)}var dp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ip);function vp(t,e,n){return new hp({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._toFieldTransform=function(t){return new Ia(t.path,new da)},e.prototype.isEqual=function(t){return t instanceof e},e}(ip),mp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return i(e,t),e.prototype._toFieldTransform=function(t){var e=vp(this,t,!0),n=this.Kc.map((function(t){return Tp(t,e)})),r=new va(n);return new Ia(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ip),yp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return i(e,t),e.prototype._toFieldTransform=function(t){var e=vp(this,t,!0),n=this.Kc.map((function(t){return Tp(t,e)})),r=new ma(n);return new Ia(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ip),bp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return i(e,t),e.prototype._toFieldTransform=function(t){var e=new ba(t.R,ca(t.R,this.Qc));return new Ia(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ip);function wp(t,e,n,r){var i=t.Uc(1,e,n);Ap("Data must be an object, but it was:",i,r);var o=[],a=_o.empty();qi(r,(function(t,r){var s=Op(e,t,n);r=k(r);var u=i.Oc(s);if(r instanceof dp)o.push(s);else{var c=Tp(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new Wi(o);return new up(a,s,i.fieldTransforms)}function _p(t,e,n,r,i,o){var a=t.Uc(1,e,n),s=[kp(e,r,n)],u=[i];if(o.length%2!=0)throw new Ti(Ii.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(kp(e,o[c])),u.push(o[c+1]);for(var h=[],l=_o.empty(),f=s.length-1;f>=0;--f)if(!Dp(h,s[f])){var p=s[f],d=u[f];d=k(d);var v=a.Oc(p);if(d instanceof dp)h.push(p);else{var g=Tp(d,v);null!=g&&(h.push(p),l.set(p,g))}}var m=new Wi(h);return new up(l,m,a.fieldTransforms)}function Ip(t,e,n,r){return void 0===r&&(r=!1),Tp(n,t.Uc(r?4:3,e))}function Tp(t,e){if(Sp(t=k(t)))return Ap("Unsupported field value:",e,t),Ep(t,e);if(t instanceof ip)return function(t,e){if(!cp(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Tp(o[i],e.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=k(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ca(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Fi.fromDate(t);return{timestampValue:ms(e.R,n)}}if(t instanceof Fi)return n=new Fi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ms(e.R,n)};if(t instanceof op)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof rp)return{bytesValue:ys(e.R,t._byteString)};if(t instanceof Bf){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:_s(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Uf(t))}(t,e)}function Ep(t,e){var n={};return Bi(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(t,(function(t,r){var i=Tp(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Sp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Fi||t instanceof op||t instanceof rp||t instanceof Bf||t instanceof ip)}function Ap(t,e,n){if(!Sp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Uf(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function kp(t,e,n){if((e=k(e))instanceof np)return e._internalPath;if("string"==typeof e)return Op(t,e);throw Cp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Np=new RegExp("[~\\*/\\[\\]]");function Op(t,e,n){if(e.search(Np)>=0)throw Cp("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(np.bind.apply(np,h([void 0],e.split(".")))))._internalPath}catch(xd){throw Cp("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Cp(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Ti(Ii.INVALID_ARGUMENT,(s+=". ")+t+u)}function Dp(t,e){return t.some((function(t){return t.isEqual(e)}))}var Rp=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Bf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new xp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Pp("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),xp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Rp);function Pp(t,e){return"string"==typeof e?Op(t,e):e instanceof np?e._internalPath:e._delegate._internalPath}var Lp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Mp=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return i(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Up(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Pp("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Rp),Up=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Mp),Fp=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Lp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Up(n._firestore,n._userDataWriter,r.key,r,new Lp(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ti(Ii.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Up(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Lp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Up(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Lp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:jp(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function jp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ci()}}function Vp(t,e){return t instanceof Mp&&e instanceof Mp?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Fp&&e instanceof Fp&&t._firestore===e._firestore&&Qf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function qp(t){if(Qo(t)&&0===t.explicitOrderBy.length)throw new Ti(Ii.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bp=function(){};function Kp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Gp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return i(e,t),e.prototype._apply=function(t){var e=fp(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ti(Ii.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Jp(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(Yp(r,t,l))}s={arrayValue:{values:u}}}else s=Yp(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Jp(a,o),s=Ip(n,"where",a,"in"===o||"not-in"===o);var f=Oo.create(i,o,s);return function(t,e){if(e.g()){var n=Yo(t);if(null!==n&&!n.isEqual(e.field))throw new Ti(Ii.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Xo(t);null!==r&&$p(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Ti(Ii.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Ti(Ii.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Kf(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Go(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Bp),Hp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return i(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ti(Ii.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ti(Ii.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Vo(e,n);return function(t,e){if(null===Xo(t)){var n=Yo(t);null!==n&&$p(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Kf(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Go(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Bp),zp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return i(e,t),e.prototype._apply=function(t){return new Kf(t.firestore,t.converter,ta(t._query,this.Hc,this.Jc))},e}(Bp),Wp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return i(e,t),e.prototype._apply=function(t){var e=Xp(t,this.type,this.Yc,this.Xc);return new Kf(t.firestore,t.converter,function(t,e){return new Go(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Bp),Qp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return i(e,t),e.prototype._apply=function(t){var e=Xp(t,this.type,this.Yc,this.Xc);return new Kf(t.firestore,t.converter,function(t,e){return new Go(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Bp);function Xp(t,e,n,r){if(n[0]=k(n[0]),n[0]instanceof Rp)return function(t,e,n,r,i){if(!r)throw new Ti(Ii.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=$o(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(po(e,r.key));else{var c=r.data.field(u.field);if(Zi(c))throw new Ti(Ii.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new Ti(Ii.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Fo(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=fp(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Ti(Ii.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Ti(Ii.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Jo(t)&&-1!==c.indexOf("/"))throw new Ti(Ii.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Gi.fromString(c));if(!oo.isDocumentKey(h))throw new Ti(Ii.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new oo(h);s.push(po(e,l))}else{var f=Ip(n,r,c);s.push(f)}}return new Fo(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Yp(t,e,n){if("string"==typeof(n=k(n))){if(""===n)throw new Ti(Ii.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jo(e)&&-1!==n.indexOf("/"))throw new Ti(Ii.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Gi.fromString(n));if(!oo.isDocumentKey(r))throw new Ti(Ii.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return po(t,new oo(r))}if(n instanceof Bf)return po(t,n._key);throw new Ti(Ii.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Uf(n)+".")}function Jp(t,e){if(!Array.isArray(t)||0===t.length)throw new Ti(Ii.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ti(Ii.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function $p(t,e,n){if(!n.isEqual(e))throw new Ti(Ii.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Zp=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ao(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ji(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes($i(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ci()}},t.prototype.convertObject=function(t,e){var n=this,r={};return qi(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new op(Ji(t.latitude),Ji(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=to(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(eo(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Yi(t);return new Fi(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Gi.fromString(t);Di(zs(n));var r=new Ef(n.get(1),n.get(3)),i=new oo(n.popFirst(5));return r.isEqual(e)||ki("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function td(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ed=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return i(e,t),e.prototype.convertBytes=function(t){return new rp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Bf(this.firestore,null,e)},e}(Zp),nd=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=fp(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=rd(t,this._firestore),i=td(r.converter,e,n),o=pp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Ea.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=rd(t,this._firestore);return o="string"==typeof(e=k(e))||e instanceof np?_p(this._dataReader,"WriteBatch.update",a._key,e,n,r):wp(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,Ea.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=rd(t,this._firestore);return this._mutations=this._mutations.concat(new ja(e._key,Ea.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ti(Ii.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function rd(t,e){if((t=k(t)).firestore!==e)throw new Ti(Ii.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var id=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return i(e,t),e.prototype.convertBytes=function(t){return new rp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Bf(this.firestore,null,e)},e}(Zp);function od(t,e,n){t=Ff(t,Bf);var r=Ff(t.firestore,Jf),i=td(t.converter,e,n);return ud(r,[pp(fp(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Ea.none())])}function ad(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Ff(t,Bf);var o=Ff(t.firestore,Jf),a=fp(o);return ud(o,[("string"==typeof(e=k(e))||e instanceof np?_p(a,"updateDoc",t._key,e,n,r):wp(a,"updateDoc",t._key,e)).toMutation(t._key,Ea.exists(!0))])}function sd(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=k(t);var u={includeMetadataChanges:!1},c=0;"object"!=typeof i[c]||Yf(i[c])||(u=i[c],c++);var h,l,f,p={includeMetadataChanges:u.includeMetadataChanges};if(Yf(i[c])){var d=i[c];i[c]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[c+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[c+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Bf)l=Ff(t.firestore,Jf),f=zo(t._key.path),h={next:function(e){i[c]&&i[c](cd(l,t,e))},error:i[c+1],complete:i[c+2]};else{var v=Ff(t,Kf);l=Ff(v.firestore,Jf),f=v._query;var g=new id(l);h={next:function(t){i[c]&&i[c](new Fp(l,g,v,t))},error:i[c+1],complete:i[c+2]},qp(t._query)}return function(t,e,n,r){var i=this,o=new uf(r),u=new gl(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return a(i,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=ll,[4,wf(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return a(i,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=fl,[4,wf(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))}))}}($f(l),f,p,h)}function ud(t,e){return function(t,e){var n=this,r=new gu;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=Ol,[4,bf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}($f(t),e)}function cd(t,e,n){var r=n.docs.get(e._key),i=new id(t);return new Mp(t,i,e._key,r,new Lp(n.hasPendingWrites,n.fromCache),e.converter)}var hd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return i(e,t),e.prototype.get=function(e){var n=this,r=rd(e,this._firestore),i=new id(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Mp(n._firestore,i,r._key,t._document,new Lp(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=fp(t)}return t.prototype.get=function(t){var e=this,n=rd(t,this._firestore),r=new ed(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Ci();var i=t[0];if(i.isFoundDocument())return new Rp(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Rp(e._firestore,r,n._key,null,n.converter);throw Ci()}))},t.prototype.set=function(t,e,n){var r=rd(t,this._firestore),i=td(r.converter,e,n),o=pp(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=rd(t,this._firestore);return o="string"==typeof(e=k(e))||e instanceof np?_p(this._dataReader,"Transaction.update",a._key,e,n,r):wp(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=rd(t,this._firestore);return this._transaction.delete(e._key),this},t}());function ld(){if("undefined"==typeof Uint8Array)throw new Ti(Ii.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function fd(){if("undefined"==typeof atob)throw new Ti(Ii.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var pd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return fd(),new t(rp.fromBase64String(e))},t.fromUint8Array=function(e){return ld(),new t(rp.fromUint8Array(e))},t.prototype.toBase64=function(){return fd(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return ld(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),dd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){ep(t=Ff(t,Jf));var n=$f(t),r=t._freezeSettings(),i=new sf;return tp(n,i,new of(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){ep(t=Ff(t,Jf));var e=$f(t),n=t._freezeSettings(),r=new sf;return tp(e,r,new af(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ti(Ii.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new gu;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return a(e,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return bu.yt()?(e=t+"main",[4,bu.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Cc(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),vd=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Ef||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Ni("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=Ff(t,qf))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Ni("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var a,s;if("string"==typeof r.mockUserToken)a=r.mockUserToken,s=sh.MOCK_USER;else{a=g(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Ti(Ii.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new sh(u)}t._credentials=new Nf(new Af(a,s))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return a(e,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return[4,gf(t)];case 1:return e=r.sent(),[4,yf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Ri(t);return e.Or.delete(0),xh(e)}(n))]}}))}))}))}($f(Ff(this._delegate,Jf)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return a(e,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return[4,gf(t)];case 1:return e=r.sent(),[4,yf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return(e=Ri(t)).Or.add(0),[4,Ph(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}($f(Ff(this._delegate,Jf)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Pf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new gu;return t.asyncQueue.enqueueAndForget((function(){return a(e,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return e=Ll,[4,bf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}($f(Ff(this._delegate,Jf)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new uf(e);return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ri(t).Gr.add(e),e.next()},[4,wf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ri(t).Gr.delete(e)},[4,wf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}($f(t=Ff(t,Jf)),Yf(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Ti(Ii.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Od(this,Hf(this._delegate,t))}catch(t){throw _d(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new wd(this,zf(this._delegate,t))}catch(t){throw _d(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Ad(this,function(t,e){if(t=Ff(t,qf),Rf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ti(Ii.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Kf(t,null,function(t){return new Go(Gi.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw _d(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new gu;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,function(t){return vf(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new hf(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}($f(t),(function(n){return e(new hd(t,n))}))}(this._delegate,(function(n){return t(new md(e,n))}))},t.prototype.batch=function(){var t=this;return $f(this._delegate),new yd(new nd(this._delegate,(function(e){return ud(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Ti(Ii.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Ti(Ii.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),gd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return i(e,t),e.prototype.convertBytes=function(t){return new pd(new rp(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return wd.eu(e,this.firestore,null)},e}(Zp);var md=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new gd(t)}return t.prototype.get=function(t){var e=this,n=Cd(t);return this._delegate.get(n).then((function(t){return new Ed(e._firestore,new Mp(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Cd(t);return n?(xf("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Cd(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,h([a,e,n],i)),this},t.prototype.delete=function(t){var e=Cd(t);return this._delegate.delete(e),this},t}(),yd=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Cd(t);return n?(xf("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Cd(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,h([a,e,n],i)),this},t.prototype.delete=function(t){var e=Cd(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),bd=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Up(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Sd(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new gd(e),n),i.set(n,o)),o},t}();bd.su=new WeakMap;var wd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new gd(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Ti(Ii.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Bf(n._delegate,r,new oo(e)))},t.eu=function(e,n,r){return new t(n,new Bf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Od(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Od(this.firestore,Hf(this._delegate,t))}catch(t){throw _d(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=k(t))instanceof Bf&&Wf(this._delegate,t)},t.prototype.set=function(t,e){e=xf("DocumentReference.set",e);try{return e?od(this._delegate,t,e):od(this._delegate,t)}catch(t){throw _d(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?ad(this._delegate,t):ad.apply(void 0,h([this._delegate,t,e],n))}catch(t){throw _d(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return ud(Ff((t=this._delegate).firestore,Jf),[new ja(t._key,Ea.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Id(e),i=Td(e,(function(e){return new Ed(t.firestore,new Mp(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return sd(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ff(t,Bf);var e=Ff(t.firestore,Jf),n=$f(e),r=new id(e);return function(t,e){var n=this,r=new gu;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Ri(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Ti(Ii.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ol(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,mf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Mp(e,r,t._key,n,new Lp(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ff(t,Bf);var e=Ff(t.firestore,Jf);return _f($f(e),t._key,{source:"server"}).then((function(n){return cd(e,t,n)}))}(this._delegate):function(t){t=Ff(t,Bf);var e=Ff(t.firestore,Jf);return _f($f(e),t._key).then((function(n){return cd(e,t,n)}))}(this._delegate)).then((function(t){return new Ed(e.firestore,new Mp(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(bd.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function _d(t,e,n){return t.message=t.message.replace(e,n),t}function Id(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Yf(r))return r}return{}}function Td(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Yf(t[0])?t[0]:Yf(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Ed=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new wd(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Vp(this._delegate,t._delegate)},t}(),Sd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Ed),Ad=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new gd(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Kp(this._delegate,function(t,e,n){var r=e,i=Pp("where",t);return new Gp(i,r,n)}(e,n,r)))}catch(e){throw _d(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Kp(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Pp("orderBy",t);return new Hp(r,n)}(e,n)))}catch(e){throw _d(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Kp(this._delegate,function(t){return jf("limit",t),new zp("limit",t,"F")}(e)))}catch(e){throw _d(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Kp(this._delegate,function(t){return jf("limitToLast",t),new zp("limitToLast",t,"L")}(e)))}catch(e){throw _d(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wp("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw _d(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wp("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw _d(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qp("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw _d(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qp("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw _d(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Qf(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ff(t,Kf);var e=Ff(t.firestore,Jf),n=$f(e),r=new id(e);return function(t,e){var n=this,r=new gu;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,a,u;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,Hc(t,e,!0)];case 1:return u=s.sent(),r=new Il(e,u.Bn),i=r._o(u.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=s.sent(),u=ol(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,mf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Fp(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ff(t,Kf);var e=Ff(t.firestore,Jf),n=$f(e),r=new id(e);return If(n,t._query,{source:"server"}).then((function(n){return new Fp(e,r,t,n)}))}(this._delegate):function(t){t=Ff(t,Kf);var e=Ff(t.firestore,Jf),n=$f(e),r=new id(e);return qp(t._query),If(n,t._query).then((function(n){return new Fp(e,r,t,n)}))}(this._delegate)).then((function(t){return new Nd(e.firestore,new Fp(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Id(e),i=Td(e,(function(e){return new Nd(t.firestore,new Fp(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return sd(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(bd.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),kd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Sd(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Nd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Ad(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Sd(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new kd(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Sd(n._firestore,r))}))},t.prototype.isEqual=function(t){return Vp(this._delegate,t._delegate)},t}(),Od=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return i(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new wd(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new wd(this.firestore,void 0===t?zf(this._delegate):zf(this._delegate,t))}catch(t){throw _d(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Ff(t.firestore,Jf),r=zf(t),i=td(t.converter,e);return ud(n,[pp(fp(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Ea.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new wd(e.firestore,t)}))},e.prototype.isEqual=function(t){return Wf(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(bd.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Ad);function Cd(t){return Ff(t,Bf)}var Dd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(np.bind.apply(np,h([void 0],t)))}return t.documentId=function(){return new t(zi.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=k(t))instanceof np&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Rd=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new gp("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new dp("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new mp("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yp("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new bp("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();var xd,Pd={Firestore:vd,GeoPoint:op,Timestamp:Fi,Blob:pd,Transaction:md,WriteBatch:yd,DocumentReference:wd,DocumentSnapshot:Ed,Query:Ad,QueryDocumentSnapshot:Sd,QuerySnapshot:Nd,CollectionReference:Od,FieldPath:Dd,FieldValue:Rd,setLogLevel:function(t){var e;e=t,Ei.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new N("firestore",(function(t){return function(t,e){return new vd(t,new Jf(t,e),new dd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Pd)))})(xd=rt),xd.registerVersion("@firebase/firestore","2.4.1");var Ld="firebasestorage.googleapis.com",Md=function(t){function e(n,r){var i=t.call(this,Ud(n),"Firebase Storage: "+r+" ("+Ud(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return i(e,t),e.prototype._codeEquals=function(t){return Ud(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(b);function Ud(t){return"storage/"+t}function Fd(){return new Md("unknown","An unknown error occurred, please check the error payload for server response.")}function jd(){return new Md("canceled","User canceled the upload/download.")}function Vd(){return new Md("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function qd(t){return new Md("invalid-argument",t)}function Bd(){return new Md("app-deleted","The Firebase app was deleted.")}function Kd(t){return new Md("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gd(t,e){return new Md("invalid-format","String does not match format '"+t+"': "+e)}function Hd(t){throw new Md("internal-error","Internal error: "+t)}var zd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Wd=function(t,e){this.data=t,this.contentType=e||null};function Qd(t,e){switch(t){case zd.RAW:return new Wd(Xd(e));case zd.BASE64:case zd.BASE64URL:return new Wd(Yd(t,e));case zd.DATA_URL:return new Wd(function(t){var e=new Jd(t);return e.base64?Yd(zd.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(xd){throw Gd(zd.DATA_URL,"Malformed data URL.")}return Xd(e)}(e.rest)}(e),new Jd(e).contentType)}throw Fd()}function Xd(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<t.length-1&&56320===(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Yd(t,e){switch(t){case zd.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Gd(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case zd.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Gd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(xd){throw Gd(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var Jd=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Gd(zd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i};var $d,Zd={STATE_CHANGED:"state_changed"},tv={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ev(t){switch(t){case"running":case"pausing":case"canceling":return tv.RUNNING;case"paused":return tv.PAUSED;case"success":return tv.SUCCESS;case"canceled":return tv.CANCELED;default:return tv.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}($d||($d={}));var nv=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=$d.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=$d.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=$d.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Hd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Hd("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Hd("cannot .getStatus() before sending");try{return this.xhr_.status}catch(xd){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Hd("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();var rv=function(){function t(){}return t.prototype.createConnection=function(){return new nv},t}(),iv=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(xd){return new t(e,"")}if(""===r.path)return r;throw new Md("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===Ld?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var h=u[c],l=h.regex.exec(e);if(l){var f=l[h.indices.bucket],p=l[h.indices.path];p||(p=""),r=new t(f,p),h.postModify(r);break}}if(null==r)throw function(t){return new Md("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),ov=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function av(t){return"string"===typeof t||t instanceof String}function sv(t){return uv()&&t instanceof Blob}function uv(){return"undefined"!==typeof Blob}function cv(t,e,n,r){if(r<e)throw qd("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw qd("Invalid value for '"+t+"'. Expected "+n+" or less.")}function hv(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null===n||void 0===n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function lv(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}var fv=function(){function t(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!function(t){return void 0!==t}(s)?i():i(s)}catch(xd){o(xd)}else null!==a?((r=Fd()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?Bd():jd()):o(r=new Md("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new pv(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(f,s())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,h([null,t],e));else{var i;s()||o?c.call.apply(c,h([null,t],e)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),l(i))}}var p=!1;function d(t){p||(p=!0,u||(null!==i?(t||(a=2),clearTimeout(i),l(0)):t||(a=1)))}return l(0),setTimeout((function(){o=!0,d(!0)}),n),d}((function(e,n){if(n)e(!1,new pv(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===$d.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new pv(a,r))}else{var s=r.getErrorCode()===$d.ABORT;e(!1,new pv(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),pv=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function dv(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function vv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=dv();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(uv())return new Blob(t);throw new Md("unsupported-environment","This browser doesn't seem to support creating Blobs")}var gv=function(){function t(t,e){var n=0,r="";sv(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(sv(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(uv()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(vv.apply(null,r))}var i=e.map((function(t){return av(t)?Qd(zd.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function mv(t){var e;try{e=JSON.parse(t)}catch(xd){return null}return function(t){return"object"===typeof t&&!Array.isArray(t)}(e)?e:null}function yv(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function bv(t,e){return e}var wv=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||bv},_v=null;function Iv(){if(_v)return _v;var t=[];t.push(new wv("bucket")),t.push(new wv("generation")),t.push(new wv("metageneration")),t.push(new wv("name","fullPath",!0));var e=new wv("name");e.xform=function(t,e){return function(t){return!av(t)||t.length<2?t:yv(t)}(e)},t.push(e);var n=new wv("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new wv("timeCreated")),t.push(new wv("updated")),t.push(new wv("md5Hash",null,!0)),t.push(new wv("cacheControl",null,!0)),t.push(new wv("contentDisposition",null,!0)),t.push(new wv("contentEncoding",null,!0)),t.push(new wv("contentLanguage",null,!0)),t.push(new wv("contentType",null,!0)),t.push(new wv("metadata","customMetadata",!0)),_v=t}function Tv(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new iv(n,r);return e._makeStorageReference(i)}})}(r,t),r}function Ev(t,e,n){var r=mv(e);return null===r?null:Tv(t,r,n)}function Sv(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function Av(t,e,n){var r=mv(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new iv(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];s=t._makeStorageReference(new iv(e,h.name)),r.items.push(s)}return r}(t,e,r)}var kv=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Nv(t){if(!t)throw Fd()}function Ov(t,e){return function(n,r){var i=Ev(t,r,e);return Nv(null!==i),i}}function Cv(t,e){return function(n,r){var i=Ev(t,r,e);return Nv(null!==i),function(t,e,n){var r=mv(e);if(null===r)return null;if(!av(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return hv("/b/"+o(r)+"/o/"+o(i),n)+lv({alt:"media",token:e})}))[0]}(i,r,t.host)}}function Dv(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new Md("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Md("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Md("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Md("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Rv(t){var e=Dv(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Md("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function xv(t,e,n){var r=hv(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new kv(r,"GET",Ov(t,n),i);return o.errorHandler=Rv(e),o}function Pv(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=hv(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new kv(a,"GET",function(t,e){return function(n,r){var i=Av(t,e,r);return Nv(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=Dv(e),u}function Lv(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Mv=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Uv(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(xd){Nv(!1)}return Nv(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Fv=262144;function jv(t,e,n,r,i,o,a,s){var u=new Mv(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Md("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(l,f);if(null===d)throw Vd();var v=e.maxUploadRetryTime,g=new kv(n,"POST",(function(t,n){var i,a=Uv(t,["active","final"]),s=u.current+h,c=r.size();return i="final"===a?Ov(e,o)(t,n):null,new Mv(s,c,"final"===a,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=s||null,g.errorHandler=Dv(t),g}var Vv=function(t,e,n){var r=function(t){return"function"===typeof t}(t)||null!=e||null!=n;if(r)this.next=t,this.error=e,this.complete=n;else{var i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}};function qv(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Bv=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Iv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=Lv(e,r,i),s={name:a.fullPath},u=hv(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=Sv(a,n),l=t.maxUploadRetryTime,f=new kv(u,"POST",(function(t){var e;Uv(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(xd){Nv(!1)}return Nv(av(e)),e}),l);return f.urlParams=s,f.headers=c,f.body=h,f.errorHandler=Dv(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new kv(n,"POST",(function(t){var e=Uv(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(xd){Nv(!1)}n||Nv(!1);var i=Number(n);return Nv(!isNaN(i)),new Mv(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Dv(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Fv*this._chunkMultiplier,n=new Mv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=jv(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(xd){return t._error=xd,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){Fv*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=xv(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=Lv(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Sv(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",l=gv.getBlob(c,r,h);if(null===l)throw Vd();var f={name:u.fullPath},p=hv(o,t.host),d=t.maxUploadRetryTime,v=new kv(p,"POST",Ov(t,n),d);return v.urlParams=f,v.headers=a,v.body=l.uploadData(),v.errorHandler=Dv(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=jd(),this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=ev(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Vv(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(ev(this._state)){case tv.SUCCESS:qv(this._resolve.bind(null,this.snapshot))();break;case tv.CANCELED:case tv.ERROR:qv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(ev(this._state)){case tv.RUNNING:case tv.PAUSED:t.next&&qv(t.next.bind(t,this.snapshot))();break;case tv.SUCCESS:t.complete&&qv(t.complete.bind(t))();break;default:t.error&&qv(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Kv=function(){function t(t,e){this._service=t,this._location=e instanceof iv?e:iv.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new iv(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return yv(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new iv(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Kd(t)},t}();function Gv(t){var e={prefixes:[],items:[]};return Hv(t,e).then((function(){return e}))}function Hv(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o;return s(this,(function(a){switch(a.label){case 0:return[4,zv(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Hv(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function zv(t,e){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return null!=e&&"number"===typeof e.maxResults&&cv("options.maxResults",1,1e3,e.maxResults),n=e||{},r=Pv(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function Wv(t,e){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=hv(e.fullServerUrl(),t.host),o=Sv(n,r),a=t.maxOperationRetryTime,s=new kv(i,"PATCH",Ov(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=Rv(e),s}(t.storage,t._location,e,Iv()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function Qv(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=hv(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new kv(r,"GET",Cv(t,n),i);return o.errorHandler=Rv(e),o}(t.storage,t._location,Iv()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new Md("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function Xv(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=hv(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new kv(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Rv(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function Yv(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new iv(t._location.bucket,n);return new Kv(t.storage,r)}function Jv(t){return/^[A-Za-z]+:\/\//.test(t)}function $v(t,e){if(t instanceof eg){var n=t;if(null==n._bucket)throw new Md("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Kv(n,n._bucket);return null!=e?$v(r,e):r}return void 0!==e?Yv(t,e):t}function Zv(t,e){if(e&&Jv(e)){if(t instanceof eg)return new Kv(t,e);throw qd("To use ref(service, url), the first argument must be a Storage instance.")}return $v(t,e)}function tg(t,e){var n=null===e||void 0===e?void 0:e.storageBucket;return null==n?null:iv.makeFromBucketSpec(n,t)}var eg=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Ld,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?iv.makeFromBucketSpec(i,this._host):tg(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=iv.makeFromBucketSpec(this._url,t):this._bucket=tg(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){cv("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){cv("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return a(this,void 0,void 0,(function(){var t,e;return s(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return a(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Kv(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new ov(Bd());var i=function(t,e,n,r,i,o){var a=lv(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new fv(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return a(this,void 0,void 0,(function(){var e,n,r;return s(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();function ng(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Bv(t,new gv(e),n)}(t=k(t),e,n)}function rg(t){return function(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=xv(t.storage,t._location,Iv()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=k(t))}function ig(t,e){return Zv(t=k(t),e)}function og(t,e,n,r){void 0===r&&(r={}),function(t,e,n,r){void 0===r&&(r={}),t.host="http://"+e+":"+n;var i=r.mockUserToken;i&&(t._overrideAuthToken="string"===typeof i?i:g(i,t.app.options.projectId))}(t,e,n,r)}var ag=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),sg=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new ag(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new ag(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"===typeof e?function(t){return e(new ag(t,i,i._ref))}:{next:e.next?function(t){return e.next(new ag(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),ug=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new cg(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new cg(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),cg=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){var n=function(t,e){return Yv(t,e)}(this._delegate,e);return new t(n,this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new sg(ng(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=zd.RAW),this._throwIfRoot("putString");var r=Qd(e,t),i=o({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new sg(new Bv(this._delegate,new gv(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return Gv(t=k(t))}(this._delegate).then((function(e){return new ug(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return zv(t=k(t),e)}(this._delegate,t||void 0).then((function(t){return new ug(t,e.storage)}))},t.prototype.getMetadata=function(){return rg(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Wv(t=k(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Qv(t=k(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Xv(t=k(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Kd(t)},t}(),hg=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Jv(t))throw qd("ref() expected a child path but got a URL, use refFromURL instead.");return new cg(ig(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Jv(t))throw qd("refFromURL() expected a full URL but got a child path, use ref() instead.");try{iv.makeFromUrl(t,this._delegate.host)}catch(xd){throw qd("refFromUrl() expected a valid full URL but got an invalid one.")}return new cg(ig(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),og(this._delegate,t,e,n)},t}();function lg(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new hg(r,new eg(r,i,o,new rv,n,rt.SDK_VERSION))}!function(t){var e={TaskState:tv,TaskEvent:Zd,StringFormat:zd,Storage:eg,Reference:cg};t.INTERNAL.registerComponent(new N("storage",lg,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.7.1")}(rt);rt.apps.length||rt.initializeApp({apiKey:"AIzaSyCN4Yq01q3SkQxd5koak7V0ku3bKUXr9cY",authDomain:"nextfire-mathcrln.firebaseapp.com",projectId:"nextfire-mathcrln",storageBucket:"nextfire-mathcrln.appspot.com",messagingSenderId:"577121791688",appId:"1:577121791688:web:121aa305ce0b7ce54b3ffd"});var fg=rt.auth(),pg=new rt.auth.GoogleAuthProvider,dg=rt.firestore(),vg=rt.firestore.FieldValue.serverTimestamp,gg=rt.firestore.Timestamp.fromMillis,mg=rt.firestore.FieldValue.increment,yg=rt.storage(),bg=rt.storage.TaskEvent.STATE_CHANGED},1551:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,a=(o=n(7294))&&o.__esModule?o:{default:o},s=n(1003),u=n(880),c=n(9246);function h(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var l={};function f(t,e,n,r){if(t&&s.isLocalURL(e)){t.prefetch(e,n,r).catch((function(t){0}));var i=r&&"undefined"!==typeof r.locale?r.locale:t&&t.locale;l[e+"%"+n+(i?"%"+i:"")]=!0}}var p=a.default.forwardRef((function(t,e){var n,r=t.legacyBehavior,o=void 0===r?!0!==Boolean(!1):r,p=t.href,d=t.as,v=t.children,g=t.prefetch,m=t.passHref,y=t.replace,b=t.shallow,w=t.scroll,_=t.locale,I=t.onClick,T=t.onMouseEnter,E=h(t,["href","as","children","prefetch","passHref","replace","shallow","scroll","locale","onClick","onMouseEnter"]);n=v,o&&"string"===typeof n&&(n=a.default.createElement("a",null,n));var S,A=!1!==g,k=u.useRouter(),N=a.default.useMemo((function(){var t=i(s.resolveHref(k,p,!0),2),e=t[0],n=t[1];return{href:e,as:d?s.resolveHref(k,d):n||e}}),[k,p,d]),O=N.href,C=N.as,D=a.default.useRef(O),R=a.default.useRef(C);o&&(S=a.default.Children.only(n));var x=o?S&&"object"===typeof S&&S.ref:e,P=i(c.useIntersection({rootMargin:"200px"}),3),L=P[0],M=P[1],U=P[2],F=a.default.useCallback((function(t){R.current===C&&D.current===O||(U(),R.current=C,D.current=O),L(t),x&&("function"===typeof x?x(t):"object"===typeof x&&(x.current=t))}),[C,x,O,U,L]);a.default.useEffect((function(){var t=M&&A&&s.isLocalURL(O),e="undefined"!==typeof _?_:k&&k.locale,n=l[O+"%"+C+(e?"%"+e:"")];t&&!n&&f(k,O,C,{locale:e})}),[C,O,M,_,A,k]);var j={ref:F,onClick:function(t){o||"function"!==typeof I||I(t),o&&S.props&&"function"===typeof S.props.onClick&&S.props.onClick(t),t.defaultPrevented||function(t,e,n,r,i,o,a,u){("A"!==t.currentTarget.nodeName.toUpperCase()||!function(t){var e=t.currentTarget.target;return e&&"_self"!==e||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which}(t)&&s.isLocalURL(n))&&(t.preventDefault(),e[i?"replace":"push"](n,r,{shallow:o,locale:u,scroll:a}))}(t,k,O,C,y,b,w,_)},onMouseEnter:function(t){o||"function"!==typeof T||T(t),o&&S.props&&"function"===typeof S.props.onMouseEnter&&S.props.onMouseEnter(t),s.isLocalURL(O)&&f(k,O,C,{priority:!0})}};if(!o||m||"a"===S.type&&!("href"in S.props)){var V="undefined"!==typeof _?_:k&&k.locale,q=k&&k.isLocaleDomain&&s.getDomainLocale(C,V,k&&k.locales,k&&k.domainLocales);j.href=q||s.addBasePath(s.addLocale(C,V,k&&k.defaultLocale))}return o?a.default.cloneElement(S,j):a.default.createElement("a",Object.assign({},E,j),n)}));e.default=p,("function"===typeof e.default||"object"===typeof e.default&&null!==e.default)&&(Object.assign(e.default,e),t.exports=e.default)},9246:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(e,"__esModule",{value:!0}),e.useIntersection=function(t){var e=t.rootRef,n=t.rootMargin,r=t.disabled||!s,h=o.useRef(),l=i(o.useState(!1),2),f=l[0],p=l[1],d=i(o.useState(e?e.current:null),2),v=d[0],g=d[1],m=o.useCallback((function(t){h.current&&(h.current(),h.current=void 0),r||f||t&&t.tagName&&(h.current=function(t,e,n){var r=function(t){var e,n={root:t.root||null,margin:t.rootMargin||""},r=c.find((function(t){return t.root===n.root&&t.margin===n.margin}));r?e=u.get(r):(e=u.get(n),c.push(n));if(e)return e;var i=new Map,o=new IntersectionObserver((function(t){t.forEach((function(t){var e=i.get(t.target),n=t.isIntersecting||t.intersectionRatio>0;e&&n&&e(n)}))}),t);return u.set(n,e={id:n,observer:o,elements:i}),e}(n),i=r.id,o=r.observer,a=r.elements;return a.set(t,e),o.observe(t),function(){if(a.delete(t),o.unobserve(t),0===a.size){o.disconnect(),u.delete(i);var e=c.findIndex((function(t){return t.root===i.root&&t.margin===i.margin}));e>-1&&c.splice(e,1)}}}(t,(function(t){return t&&p(t)}),{root:v,rootMargin:n}))}),[r,v,n,f]),y=o.useCallback((function(){p(!1)}),[]);return o.useEffect((function(){if(!s&&!f){var t=a.requestIdleCallback((function(){return p(!0)}));return function(){return a.cancelIdleCallback(t)}}}),[f]),o.useEffect((function(){e&&g(e.current)}),[e]),[m,f,y]};var o=n(7294),a=n(4686),s="undefined"!==typeof IntersectionObserver;var u=new Map,c=[];("function"===typeof e.default||"object"===typeof e.default&&null!==e.default)&&(Object.assign(e.default,e),t.exports=e.default)},652:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return w}});var r=n(5893),i=(n(6774),n(1664)),o=n.n(i),a=n(1163),s=n(7294),u=n(8218),c=n(6482);function h(){var t=(0,s.useContext)(u.S),e=t.user,n=t.username,i=(0,a.useRouter)();return(0,r.jsx)("nav",{className:"navbar",children:(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,r.jsx)(o(),{href:"/",children:(0,r.jsx)("button",{className:"btn-logo",children:"NXT"})})}),(null===e||void 0===e?void 0:e.displayName)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{className:"push-left",children:(0,r.jsx)("button",{onClick:function(){c.I8.signOut(),i.reload()},children:"Sign Out"})}),(0,r.jsx)("li",{children:(0,r.jsx)(o(),{href:"/admin",children:(0,r.jsx)("button",{className:"btn-blue",children:"Write Posts"})})}),(0,r.jsx)("li",{children:(0,r.jsx)(o(),{href:"/".concat(n),children:(0,r.jsx)("img",{src:(null===e||void 0===e?void 0:e.photoURL)||"/hacker.png"})})})]}),!(null===e||void 0===e?void 0:e.displayName)&&(0,r.jsx)("li",{children:(0,r.jsx)(o(),{href:"/enter",children:(0,r.jsx)("button",{className:"btn-blue",children:"Log in"})})})]})})}var l=n(4931),f=function(){return f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},f.apply(this,arguments)},p=function(t){return{loading:void 0===t||null===t,value:t}},d=function(t){var e=t?t():void 0,n=(0,s.useReducer)((function(t,e){switch(e.type){case"error":return f({},t,{error:e.error,loading:!1,value:void 0});case"reset":return p(e.defaultValue);case"value":return f({},t,{error:void 0,loading:!1,value:e.value});default:return t}}),p(e)),r=n[0],i=n[1];return{error:r.error,loading:r.loading,reset:function(){var e=t?t():void 0;i({type:"reset",defaultValue:e})},setError:function(t){i({type:"error",error:t})},setValue:function(t){i({type:"value",value:t})},value:r.value}};function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(){var t=g(function(t){var e=d((function(){return t.currentUser})),n=e.error,r=e.loading,i=e.setError,o=e.setValue,a=e.value;return(0,s.useEffect)((function(){var e=t.onAuthStateChanged(o,i);return function(){e()}}),[t]),[a,r,n]}(c.I8),2),e=t[0],n=(t[1],(0,s.useState)("")),r=n[0],i=n[1];return(0,s.useEffect)((function(){e?c.RZ.collection("users").doc(e.uid).onSnapshot((function(t){var e;i(null===(e=t.data())||void 0===e?void 0:e.username)})):i("")}),[e]),{user:e,username:r}}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){y(t,e,n[e])}))}return t}var w=function(t){var e=t.Component,n=t.pageProps,i=m();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(u.d,{value:i,children:[(0,r.jsx)(h,{}),(0,r.jsx)(e,b({},n)),(0,r.jsx)(l.x7,{})]})})}},6774:function(){},7663:function(t){!function(){var e={162:function(t){var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"===typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var s,u=[],c=!1,h=-1;function l(){c&&s&&(c=!1,s.length?u=s.concat(u):h=-1,u.length&&f())}function f(){if(!c){var t=a(l);c=!0;for(var e=u.length;e;){for(s=u,u=[];++h<e;)s&&s[h].run();h=-1,e=u.length}s=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={exports:{}},a=!0;try{e[t](o,o.exports,r),a=!1}finally{a&&delete n[t]}return o.exports}r.ab="//";var i=r(162);t.exports=i}()},1664:function(t,e,n){t.exports=n(1551)},1163:function(t,e,n){t.exports=n(880)},4931:function(t,e,n){"use strict";n.d(e,{x7:function(){return vt},ZP:function(){return gt}});var r=n(7294);let i={data:""},o=t=>"object"==typeof window?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||i,a=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,s=/\/\*[^]*?\*\/|  +/g,u=/\n+/g,c=(t,e)=>{let n="",r="",i="";for(let o in t){let a=t[o];"@"==o[0]?"i"==o[1]?n=o+" "+a+";":r+="f"==o[1]?c(a,o):o+"{"+c(a,"k"==o[1]?"":e)+"}":"object"==typeof a?r+=c(a,e?e.replace(/([^,])+/g,(t=>o.replace(/(^:.*)|([^,])+/g,(e=>/&/.test(e)?e.replace(/&/g,t):t?t+" "+e:e)))):o):null!=a&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=c.p?c.p(o,a):o+":"+a+";")}return n+(e&&i?e+"{"+i+"}":i)+r},h={},l=t=>{if("object"==typeof t){let e="";for(let n in t)e+=n+l(t[n]);return e}return t},f=(t,e,n,r,i)=>{let o=l(t),f=h[o]||(h[o]=(t=>{let e=0,n=11;for(;e<t.length;)n=101*n+t.charCodeAt(e++)>>>0;return"go"+n})(o));if(!h[f]){let e=o!==t?t:(t=>{let e,n,r=[{}];for(;e=a.exec(t.replace(s,""));)e[4]?r.shift():e[3]?(n=e[3].replace(u," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][e[1]]=e[2].replace(u," ").trim();return r[0]})(t);h[f]=c(i?{["@keyframes "+f]:e}:e,n?"":"."+f)}return((t,e,n)=>{-1==e.data.indexOf(t)&&(e.data=n?t+e.data:e.data+t)})(h[f],e,r),f},p=(t,e,n)=>t.reduce(((t,r,i)=>{let o=e[i];if(o&&o.call){let t=o(n),e=t&&t.props&&t.props.className||/^go/.test(t)&&t;o=e?"."+e:t&&"object"==typeof t?t.props?"":c(t,""):!1===t?"":t}return t+r+(null==o?"":o)}),"");function d(t){let e=this||{},n=t.call?t(e.p):t;return f(n.unshift?n.raw?p(n,[].slice.call(arguments,1),e.p):n.reduce(((t,n)=>Object.assign(t,n&&n.call?n(e.p):n)),{}):n,o(e.target),e.g,e.o,e.k)}d.bind({g:1});let v,g,m,y=d.bind({k:1});function b(t,e){let n=this||{};return function(){let r=arguments;function i(o,a){let s=Object.assign({},o),u=s.className||i.className;n.p=Object.assign({theme:g&&g()},s),n.o=/ *go\d+/.test(u),s.className=d.apply(n,r)+(u?" "+u:""),e&&(s.ref=a);let c=t;return t[0]&&(c=s.as||t,delete s.as),m&&c[0]&&m(s),v(c,s)}return e?e(i):i}}function w(){return w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w.apply(this,arguments)}function _(t,e){return e||(e=t.slice(0)),t.raw=e,t}var I,T=function(t,e){return function(t){return"function"===typeof t}(t)?t(e):t},E=function(){var t=0;return function(){return(++t).toString()}}();!function(t){t[t.ADD_TOAST=0]="ADD_TOAST",t[t.UPDATE_TOAST=1]="UPDATE_TOAST",t[t.UPSERT_TOAST=2]="UPSERT_TOAST",t[t.DISMISS_TOAST=3]="DISMISS_TOAST",t[t.REMOVE_TOAST=4]="REMOVE_TOAST",t[t.START_PAUSE=5]="START_PAUSE",t[t.END_PAUSE=6]="END_PAUSE"}(I||(I={}));var S=function t(e,n){switch(n.type){case I.ADD_TOAST:return w({},e,{toasts:[n.toast].concat(e.toasts).slice(0,20)});case I.UPDATE_TOAST:return w({},e,{toasts:e.toasts.map((function(t){return t.id===n.toast.id?w({},t,n.toast):t}))});case I.UPSERT_TOAST:var r=n.toast;return e.toasts.find((function(t){return t.id===r.id}))?t(e,{type:I.UPDATE_TOAST,toast:r}):t(e,{type:I.ADD_TOAST,toast:r});case I.DISMISS_TOAST:return w({},e,{toasts:e.toasts.map((function(t){return t.id===n.toastId||void 0===n.toastId?w({},t,{visible:!1}):t}))});case I.REMOVE_TOAST:return void 0===n.toastId?w({},e,{toasts:[]}):w({},e,{toasts:e.toasts.filter((function(t){return t.id!==n.toastId}))});case I.START_PAUSE:return w({},e,{pausedAt:n.time});case I.END_PAUSE:var i=n.time-(e.pausedAt||0);return w({},e,{pausedAt:void 0,toasts:e.toasts.map((function(t){return w({},t,{pauseDuration:t.pauseDuration+i})}))})}},A=[],k={toasts:[],pausedAt:void 0},N=function(t){k=S(k,t),A.forEach((function(t){t(k)}))},O={blank:4e3,error:4e3,success:2e3,loading:3e4},C=function(t){return function(e,n){var r=function(t,e,n){return void 0===e&&(e="blank"),w({id:(null==n?void 0:n.id)||E(),createdAt:Date.now(),visible:!0,type:e,role:"status",ariaLive:"polite",message:t,pauseDuration:0},n)}(e,t,n);return N({type:I.UPSERT_TOAST,toast:r}),r.id}},D=function(t,e){return C("blank")(t,e)};D.error=C("error"),D.success=C("success"),D.loading=C("loading"),D.dismiss=function(t){N({type:I.DISMISS_TOAST,toastId:t}),setTimeout((function(){N({type:I.REMOVE_TOAST,toastId:t})}),1e3)},D.remove=function(t){return N({type:I.REMOVE_TOAST,toastId:t})},D.promise=function(t,e,n){var r=D.loading(e.loading,w({},n,null==n?void 0:n.loading));return t.then((function(t){return D.success(T(e.success,t),w({id:r},n,null==n?void 0:n.success)),t})).catch((function(t){D.error(T(e.error,t),w({id:r},n,null==n?void 0:n.error))})),t};var R=function(t){var e=function(t){void 0===t&&(t={});var e=(0,r.useState)(k),n=e[0],i=e[1];(0,r.useEffect)((function(){return A.push(i),function(){var t=A.indexOf(i);t>-1&&A.splice(t,1)}}),[n]);var o=n.toasts.map((function(e){var n,r,i;return w({},t,t[e.type],e,{duration:e.duration||(null==(n=t[e.type])?void 0:n.duration)||(null==(r=t)?void 0:r.duration)||O[e.type],style:w({},t.style,null==(i=t[e.type])?void 0:i.style,e.style)})}));return w({},n,{toasts:o})}(t),n=e.toasts,i=e.pausedAt,o=n.filter((function(t){return t.visible}));(0,r.useEffect)((function(){if(!i){var t=Date.now(),e=n.map((function(e){var n=(e.duration||0)+e.pauseDuration-(t-e.createdAt);if(!(n<0))return setTimeout((function(){return D.dismiss(e.id)}),n);e.visible&&D.dismiss(e.id)}));return function(){e.forEach((function(t){return t&&clearTimeout(t)}))}}}),[n,i]);var a=(0,r.useMemo)((function(){return{startPause:function(){N({type:I.START_PAUSE,time:Date.now()})},endPause:function(){i&&N({type:I.END_PAUSE,time:Date.now()})},updateHeight:function(t,e){return N({type:I.UPDATE_TOAST,toast:{id:t,height:e}})},calculateOffset:function(t,e){var n=e||{},r=n.reverseOrder,i=void 0!==r&&r,a=n.margin,s=void 0===a?8:a,u=o.findIndex((function(e){return e.id===t})),c=-1!==u?o.slice.apply(o,i?[u+1]:[0,u]).reduce((function(t,e){return t+(e.height||0)+s}),0):0;return c}}}),[o,i]);return{toasts:n,visibleToasts:o,handlers:a}};function x(){var t=_(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"]);return x=function(){return t},t}function P(){var t=_(["\n  from {\n    transform: scale(0) rotate(90deg);\n\t opacity: 0;\n  }\n\n  to {\n    transform: scale(1) rotate(90deg);\n\t opacity: 1;\n  }\n"]);return P=function(){return t},t}function L(){var t=_(["\n  from {\n    transform: scale(0);\n\t opacity: 0;\n  }\n\n  to {\n    transform: scale(1);\n\t opacity: 1;\n  }\n"]);return L=function(){return t},t}function M(){var t=_(["\n  from {\n    transform: scale(0) rotate(45deg);\n\t opacity: 0;\n  }\n\n  to {\n    transform: scale(1) rotate(45deg);\n\t opacity: 1;\n  }\n"]);return M=function(){return t},t}var U=y(M()),F=y(L()),j=y(P()),V=b("div")(x(),(function(t){return t.primary||"#ff4b4b"}),U,F,(function(t){return t.secondary||"#fff"}),j);function q(){var t=_(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"]);return q=function(){return t},t}function B(){var t=_(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]);return B=function(){return t},t}var K=y(B()),G=b("div")(q(),(function(t){return t.secondary||"#e0e0e0"}),(function(t){return t.primary||"#616161"}),K);function H(){var t=_(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"]);return H=function(){return t},t}function z(){var t=_(["\n  0% {\n\t\theight: 0;\n\t\twidth: 0;\n\t\topacity: 0;\n  }\n\n  40% {\n\t\theight: 0;\n\t\twidth: 6px;\n\t\topacity: 1;\n  }\n\n  100% {\n    opacity: 1;\n\t\theight: 10px;\n  }\n"]);return z=function(){return t},t}function W(){var t=_(["\n  from {\n    transform: scale(0) rotate(45deg);\n\t opacity: 0;\n  }\n\n  to {\n    transform: scale(1) rotate(45deg);\n\t opacity: 1;\n  }\n"]);return W=function(){return t},t}var Q=y(W()),X=y(z()),Y=b("div")(H(),(function(t){return t.primary||"#61d345"}),Q,X,(function(t){return t.secondary||"#fff"}));function J(){var t=_(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]);return J=function(){return t},t}function $(){var t=_(["\n  position: absolute;\n"]);return $=function(){return t},t}var Z=b("div")($()),tt=b("div")(J()),et=function(t){var e=t.type,n=t.theme;return"blank"===e?null:(0,r.createElement)(tt,null,(0,r.createElement)(G,Object.assign({},n)),"loading"!==e&&(0,r.createElement)(Z,null,"error"===e?(0,r.createElement)(V,Object.assign({},n)):(0,r.createElement)(Y,Object.assign({},n))))};function nt(){var t=_(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"]);return nt=function(){return t},t}function rt(){var t=_(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\n\nto {\n  transform: scale(1);\n  opacity: 1;\n}\n"]);return rt=function(){return t},t}var it=y(rt()),ot=b("div")(nt(),it);function at(){var t=_(["",""]);return at=function(){return t},t}function st(){var t=_(["",""]);return st=function(){return t},t}function ut(){var t=_(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1;\n"]);return ut=function(){return t},t}function ct(){var t=_(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  margin: 16px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]);return ct=function(){return t},t}var ht=function(t){return"\n0% {transform: translate3d(0,"+-80*t+"px,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"},lt=function(t){return"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,"+-130*t+"px,-1px) scale(.5); opacity:0;}\n"},ft=b("div",r.forwardRef)(ct()),pt=b("div")(ut()),dt=(0,r.memo)((function(t){var e=t.toast,n=t.position,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,["toast","position"]),o=(0,r.useCallback)((function(t){t&&setTimeout((function(){var e=t.getBoundingClientRect();i.onHeight(e.height)}))}),[]),a=function(t,e){var n=t.includes("top");return w({position:"fixed",transition:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY("+e*(n?1:-1)+"px)"},n?{top:0}:{bottom:0},t.includes("left")?{left:0}:t.includes("right")?{right:0}:{left:0,pointerEvents:"none",right:0,justifyContent:"center"})}(n,i.offset),s=null!=e&&e.height?function(t,e){var n=t.includes("top")?1:-1;return e?{animation:y(st(),ht(n))+" 0.35s cubic-bezier(.21,1.02,.73,1) forwards"}:{animation:y(at(),lt(n))+" 0.8s forwards cubic-bezier(.06,.71,.55,1)",pointerEvents:"none"}}(n,e.visible):{opacity:0};return(0,r.createElement)("div",{style:w({display:"flex",zIndex:e.visible?9999:void 0},a)},(0,r.createElement)(ft,{ref:o,className:e.className,style:w({},s,e.style)},function(){var t=e.icon,n=e.type,i=e.iconTheme;return void 0!==t?"string"===typeof t?(0,r.createElement)(ot,null,t):t:(0,r.createElement)(et,{theme:i,type:n})}(),(0,r.createElement)(pt,{role:e.role,"aria-live":e.ariaLive},T(e.message,e))))}));!function(t,e,n,r){c.p=e,v=t,g=n,m=r}(r.createElement);var vt=function(t){var e=t.reverseOrder,n=t.position,i=void 0===n?"top-center":n,o=t.containerStyle,a=t.toastOptions,s=R(a),u=s.toasts,c=s.handlers;return(0,r.createElement)("div",{style:w({position:"fixed",zIndex:9999},o),onMouseEnter:c.startPause,onMouseLeave:c.endPause},u.map((function(t){return(0,r.createElement)(dt,{key:t.id,onHeight:function(e){return c.updateHeight(t.id,e)},toast:t,offset:c.calculateOffset(t.id,{reverseOrder:e}),position:i})})))},gt=D}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[774,179],(function(){return e(6840),e(880)}));var n=t.O();_N_E=n}]);