(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{5683:function(n,e,t){var r="[object Symbol]",u=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i="\\u2700-\\u27bf",c="a-z\\xdf-\\xf6\\xf8-\\xff",s="A-Z\\xc0-\\xd6\\xd8-\\xde",a="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f="['\u2019]",l="["+a+"]",d="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",v="\\d+",h="[\\u2700-\\u27bf]",p="["+c+"]",x="[^\\ud800-\\udfff"+a+v+i+c+s+"]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",b="["+s+"]",j="(?:"+p+"|"+x+")",y="(?:"+b+"|"+x+")",A="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",O="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",E="(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?",_="[\\ufe0e\\ufe0f]?",S=_+E+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",g,m].join("|")+")"+_+E+")*"),w="(?:"+[h,g,m].join("|")+")"+S,I=RegExp(f,"g"),N=RegExp(d,"g"),Z=RegExp([b+"?"+p+"+"+A+"(?="+[l,b,"$"].join("|")+")",y+"+"+O+"(?="+[l,b+j,"$"].join("|")+")",b+"?"+j+"+"+A,b+"+"+O,v,w].join("|"),"g"),C=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,L="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,U="object"==typeof self&&self&&self.Object===Object&&self,R=L||U||Function("return this")();var k,T=(k={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"ss"},function(n){return null==k?void 0:k[n]});var z=Object.prototype.toString,P=R.Symbol,F=P?P.prototype:void 0,V=F?F.toString:void 0;function D(n){if("string"==typeof n)return n;if(function(n){return"symbol"==typeof n||function(n){return!!n&&"object"==typeof n}(n)&&z.call(n)==r}(n))return V?V.call(n):"";var e=n+"";return"0"==e&&1/n==-Infinity?"-0":e}function K(n){return null==n?"":D(n)}var M,Y=(M=function(n,e,t){return n+(t?"-":"")+e.toLowerCase()},function(n){return function(n,e,t,r){var u=-1,o=n?n.length:0;for(r&&o&&(t=n[++u]);++u<o;)t=e(t,n[u],u,n);return t}(function(n,e,t){return n=K(n),void 0===(e=t?void 0:e)?function(n){return C.test(n)}(n)?function(n){return n.match(Z)||[]}(n):function(n){return n.match(u)||[]}(n):n.match(e)||[]}(function(n){return(n=K(n))&&n.replace(o,T).replace(N,"")}(n).replace(I,"")),M,"")});n.exports=Y},4830:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(9023)}])},1024:function(n,e,t){"use strict";t.d(e,{Z:function(){return s}});var r=t(5893),u=t(1664),o=t.n(u),i=t(7294),c=t(8218);function s(n){return(0,i.useContext)(c.S).username?n.children:n.fallback||(0,r.jsx)(o(),{href:"/enter",children:"You must be signed in"})}},4165:function(n,e,t){"use strict";t.d(e,{Z:function(){return i}});var r=t(5893),u=t(1664),o=t.n(u);function i(n){var e=n.posts,t=n.admin;return(0,r.jsx)(r.Fragment,{children:e?e.map((function(n){return(0,r.jsx)(c,{post:n,admin:t},n.slug)})):null})}function c(n){var e=n.post,t=n.admin,u=void 0!==t&&t,i=null===e||void 0===e?void 0:e.content.trim().split(/\s+/g).length,c=(i/100+1).toFixed(0);return(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)(o(),{href:"/".concat(e.username),children:(0,r.jsx)("a",{children:(0,r.jsxs)("strong",{children:["By @",e.username]})})}),(0,r.jsx)(o(),{href:"/".concat(e.username,"/").concat(e.slug),children:(0,r.jsx)("h2",{children:(0,r.jsx)("a",{children:e.title})})}),(0,r.jsxs)("footer",{children:[(0,r.jsxs)("span",{children:[i," words. ",c," min read"]}),(0,r.jsxs)("span",{className:"push-left",children:["\ud83d\udc97 ",e.heartCount||0," Hearts"]})]}),u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o(),{href:"/admin/".concat(e.slug),children:(0,r.jsx)("h3",{children:(0,r.jsx)("button",{className:"btn-blue",children:"Edit"})})}),e.published?(0,r.jsx)("p",{className:"text-success",children:"Live"}):(0,r.jsx)("p",{className:"text-danger",children:"Unpublished"})]})]})}},9023:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return y}});var r=t(4051),u=t.n(r),o=t(5893),i=t(713),c=t.n(i),s=t(1024),a=t(4165),f=t(8218),l=t(6482),d=t(7294),v=t(1163),h=t(6677),p=t(5683),x=t.n(p),g=t(4931);function m(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function b(n,e,t,r,u,o,i){try{var c=n[o](i),s=c.value}catch(a){return void t(a)}c.done?e(s):Promise.resolve(s).then(r,u)}function j(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,u,o=[],i=!0,c=!1;try{for(t=t.call(n);!(i=(r=t.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(s){c=!0,u=s}finally{try{i||null==t.return||t.return()}finally{if(c)throw u}}return o}}(n,e)||function(n,e){if(!n)return;if("string"===typeof n)return m(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(){return(0,o.jsx)("main",{children:(0,o.jsxs)(s.Z,{children:[(0,o.jsx)(A,{}),(0,o.jsx)(O,{})]})})}function A(){var n,e=l.RZ.collection("users").doc(null===l.I8||void 0===l.I8||null===(n=l.I8.currentUser)||void 0===n?void 0:n.uid).collection("posts").orderBy("createdAt"),t=j((0,h.Kx)(e),1)[0],r=null===t||void 0===t?void 0:t.docs.map((function(n){return n.data()}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h1",{children:"Manage your Posts"}),(0,o.jsx)(a.Z,{posts:r,admin:!0})]})}function O(){var n=(0,v.useRouter)(),e=(0,d.useContext)(f.S).username,t=(0,d.useState)(""),r=t[0],i=t[1],s=encodeURI(x()(r)),a=r.length>3&&r.length<100,h=function(){var t,o=(t=u().mark((function t(o){var i,c,a,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.preventDefault(),c=null===l.I8||void 0===l.I8||null===(i=l.I8.currentUser)||void 0===i?void 0:i.uid,a=l.RZ.collection("users").doc(c).collection("posts").doc(s),f={title:r,slug:s,uid:c,username:e,published:!1,content:"# hello world!",createdAt:(0,l.Bt)(),updatedAt:(0,l.Bt)(),heartCount:0},t.next=7,a.set(f);case 7:g.ZP.success("Post created!"),n.push("/admin/".concat(s));case 9:case"end":return t.stop()}}),t)})),function(){var n=this,e=arguments;return new Promise((function(r,u){var o=t.apply(n,e);function i(n){b(o,r,u,i,c,"next",n)}function c(n){b(o,r,u,i,c,"throw",n)}i(void 0)}))});return function(n){return o.apply(this,arguments)}}();return(0,o.jsxs)("form",{onSubmit:h,children:[(0,o.jsx)("input",{value:r,onChange:function(n){return i(n.target.value)},placeholder:"My Awesome Article!",className:c().input}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Slug:"})," ",s]}),(0,o.jsx)("button",{type:"submit",disabled:!a,className:"btn-green",children:"Create New Post"})]})}},713:function(n){n.exports={container:"Admin_container__7Kd1y",hidden:"Admin_hidden__blWKt",controls:"Admin_controls__RhTAv",input:"Admin_input__9_7r7",checkbox:"Admin_checkbox__Ttf_p"}},6677:function(n,e,t){"use strict";t.d(e,{Kx:function(){return f},Xi:function(){return d},iY:function(){return v},ky:function(){return l}});var r=t(7294),u=function(){return u=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var u in e=arguments[t])Object.prototype.hasOwnProperty.call(e,u)&&(n[u]=e[u]);return n},u.apply(this,arguments)},o=function(n,e){var t;if(n.exists)return u({},n.data(),e?((t={})[e]=n.id,t):null)},i=function(n){return{loading:void 0===n||null===n,value:n}},c=function(n){var e=n?n():void 0,t=(0,r.useReducer)((function(n,e){switch(e.type){case"error":return u({},n,{error:e.error,loading:!1,value:void 0});case"reset":return i(e.defaultValue);case"value":return u({},n,{error:void 0,loading:!1,value:e.value});default:return n}}),i(e)),o=t[0],c=t[1];return{error:o.error,loading:o.loading,reset:function(){var e=n?n():void 0;c({type:"reset",defaultValue:e})},setError:function(n){c({type:"error",error:n})},setValue:function(n){c({type:"value",value:n})},value:o.value}},s=function(n,e){var t=!n&&!e,r=!!n&&!!e&&n.isEqual(e);return t||r},a=function(n,e){return function(n,e,t){var u=(0,r.useRef)(n);return(0,r.useEffect)((function(){e(n,u.current)||(u.current=n,t&&t())})),u}(n,s,e)},f=function(n,e){var t=c(),u=t.error,o=t.loading,i=t.reset,s=t.setError,f=t.setValue,l=t.value,d=a(n,i);return(0,r.useEffect)((function(){if(d.current){var n=e&&e.snapshotListenOptions?d.current.onSnapshot(e.snapshotListenOptions,f,s):d.current.onSnapshot(f,s);return function(){n()}}f(void 0)}),[d.current]),[l,o,u]},l=function(n,e){var t=c(),u=t.error,o=t.loading,i=t.reset,s=t.setError,f=t.setValue,l=t.value,d=a(n,i);return(0,r.useEffect)((function(){if(d.current){var n=e&&e.snapshotListenOptions?d.current.onSnapshot(e.snapshotListenOptions,f,s):d.current.onSnapshot(f,s);return function(){n()}}f(void 0)}),[d.current]),[l,o,u]},d=function(n,e){var t=e?e.idField:void 0,u=e?e.snapshotListenOptions:void 0,i=l(n,{snapshotListenOptions:u}),c=i[0],s=i[1],a=i[2];return[(0,r.useMemo)((function(){return c?o(c,t):void 0}),[c,t]),s,a]},v=function(n,e){var t=e?e.idField:void 0,u=function(n,e){var t=c(),u=t.error,o=t.loading,i=t.reset,s=t.setError,f=t.setValue,l=t.value,d=a(n,i);return(0,r.useEffect)((function(){d.current?d.current.get(e?e.getOptions:void 0).then(f).catch(s):f(void 0)}),[d.current]),[l,o,u]}(n,{getOptions:e?e.getOptions:void 0}),i=u[0],s=u[1],f=u[2];return[i?o(i,t):void 0,s,f]}}},function(n){n.O(0,[774,888,179],(function(){return e=4830,n(n.s=e);var e}));var e=n.O();_N_E=e}]);